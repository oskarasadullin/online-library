
==== FILE: .\.dockerignore ====
node_modules
__pycache__
*.pyc
*.pyo
*.pyd
.Python
env
venv
.venv
pip-log.txt
pip-delete-this-directory.txt
.tox
.coverage
.coverage.*
.cache
nosetests.xml
coverage.xml
*.cover
*.log
.git
.gitignore
.mypy_cache
.pytest_cache
.hypothesis



==== FILE: .\.env ====
# ===========================================
# БАЗА ДАННЫХ (PostgreSQL)
# ===========================================
POSTGRES_DB=library_db
POSTGRES_USER=library_user
POSTGRES_PASSWORD=LibrarySecurePassword2025!

# ===========================================
# BACKEND (FastAPI)
# ===========================================
DATABASE_URL=postgresql://library_user:LibrarySecurePassword2025!@db:5432/library_db

# Сгенерируй НОВЫЙ ключ!
SECRET_KEY=твой-новый-секретный-ключ-32-символа

ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
BOOKS_DIRECTORY=/app/books

# ===========================================
# ОБЩИЕ НАСТРОЙКИ
# ===========================================
ENVIRONMENT=production  # ← ИЗМЕНЕНО
LOG_LEVEL=INFO



==== FILE: .\.gitignore ====
# ==================== DEPENDENCIES ====================
# Node.js
node_modules/
frontend/node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*
package-lock.json
yarn.lock

# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
backend/__pycache__/
backend/**/__pycache__/
*.pyc
*.pyo
*.pyd
.pytest_cache/
.mypy_cache/
.hypothesis/
.coverage
.coverage.*
htmlcov/
*.cover
.tox/
*.egg
*.egg-info/
dist/
build/
pip-log.txt
pip-delete-this-directory.txt

# ==================== ENVIRONMENT VARIABLES ====================
.env
.env.local
.env.development.local
.env.test.local
.env.production.local
backend/.env
frontend/.env
**/.env

# ==================== DATABASE ====================
# Локальные базы данных (не для продакшн)
*.db
*.sqlite
*.sqlite3
db.sqlite3
postgres-data/
db_volume/
*.sql.backup

# ==================== DOCKER ====================
# Docker override файлы (локальные настройки)
docker-compose.override.yml
.dockerignore

# ==================== BUILD FILES ====================
# React build
frontend/build/
frontend/dist/
frontend/.cache/
frontend/out/

# Backend build
backend/dist/
backend/build/

# ==================== IDE & EDITORS ====================
# VSCode
.vscode/
.vscode/*
!.vscode/extensions.json
!.vscode/settings.json

# JetBrains (PyCharm, WebStorm, IntelliJ)
.idea/
*.iml
*.iws
*.ipr
.idea_modules/

# Sublime Text
*.sublime-project
*.sublime-workspace

# Vim
*.swp
*.swo
*~

# ==================== OS FILES ====================
# macOS
.DS_Store
.AppleDouble
.LSOverride
Icon
._*
.Spotlight-V100
.Trashes

# Windows
Thumbs.db
ehthumbs.db
Desktop.ini
$RECYCLE.BIN/
*.lnk

# Linux
.directory
*~

# ==================== LOGS ====================
*.log
logs/
*.log.*
npm-debug.log*
yarn-debug.log*
yarn-error.log*
backend/logs/
frontend/logs/

# ==================== BOOKS (PDF FILES) ====================
# НЕ загружаем книги в Git (они большие)
books/*.pdf
backend/books/*.pdf
backend/app/books/*.pdf
*.pdf

# ==================== TESTING ====================
coverage/
.nyc_output/
test-results/
*.lcov

# ==================== TEMPORARY FILES ====================
tmp/
temp/
*.tmp
*.bak
*.swp
*.old
.cache/

# ==================== SECURITY ====================
# Секретные ключи и сертификаты
*.pem
*.key
*.cert
*.csr
*.crt
secrets/

# ==================== MISC ====================
.sass-cache/
.eslintcache
.stylelintcache
.parcel-cache/
.next/
.nuxt/
.vercel
.turbo

# Jupyter Notebook
.ipynb_checkpoints

# pyenv
.python-version

# Celery
celerybeat-schedule
celerybeat.pid

# ==================== KEEP THESE (ВАЖНЫЕ ФАЙЛЫ) ====================
# Эти файлы НУЖНО загружать в Git:
!.gitignore
!.dockerignore
!.gitkeep
!README.md
!LICENSE
!docker-compose.yml
!Dockerfile
!requirements.txt
!package.json



==== FILE: .\collect.py ====
import os
from pathlib import Path

# Что игнорировать
IGNORE_DIRS = {'node_modules', 'dist', 'build', '.git', 'postgres_data', '__pycache__', '.vscode'}
IGNORE_FILES = {'package-lock.json', 'package.json'}
IGNORE_EXTENSIONS = {'.log', '.jpg', '.jpeg', '.png', '.svg', '.ico', '.map'}

OUTPUT_FILE = 'project_code.txt'

def should_ignore(path):
    """Проверяем, нужно ли игнорировать файл/папку"""
    parts = Path(path).parts
    
    # Игнорируем папки
    if any(ignored in parts for ignored in IGNORE_DIRS):
        return True
    
    # Игнорируем файлы по имени
    if Path(path).name in IGNORE_FILES:
        return True
    
    # Игнорируем по расширению
    if Path(path).suffix in IGNORE_EXTENSIONS:
        return True
    
    return False

def collect_files(root_dir='.'):
    """Собираем все файлы проекта"""
    with open(OUTPUT_FILE, 'w', encoding='utf-8') as output:
        for root, dirs, files in os.walk(root_dir):
            # Удаляем игнорируемые директории из обхода
            dirs[:] = [d for d in dirs if d not in IGNORE_DIRS]
            
            for file in files:
                file_path = os.path.join(root, file)
                
                if should_ignore(file_path):
                    continue
                
                try:
                    print(f"Обрабатываю: {file_path}")
                    output.write(f"\n==== FILE: {file_path} ====\n")
                    
                    with open(file_path, 'r', encoding='utf-8') as f:
                        content = f.read()
                        output.write(content)
                        output.write("\n\n")
                
                except Exception as e:
                    print(f"Ошибка при чтении {file_path}: {e}")
                    output.write(f"[ОШИБКА ЧТЕНИЯ: {e}]\n\n")

if __name__ == '__main__':
    print(f"Собираю код в {OUTPUT_FILE}...")
    collect_files()
    print(f"Готово! Файл сохранён в {OUTPUT_FILE}")



==== FILE: .\docker-compose.yml ====
version: '3.8'

services:
  db:
    image: postgres:16-alpine
    container_name: library_db
    environment:
      POSTGRES_DB: ${POSTGRES_DB:-library_db}
      POSTGRES_USER: ${POSTGRES_USER:-library_user}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-library_password}
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./database/init.sql:/docker-entrypoint-initdb.d/init.sql
    ports:
      - "5433:5432"
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U library_user -d library_db"]
      interval: 10s
      timeout: 5s
      retries: 5
    networks:
      - library_network

  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    container_name: library_backend
    environment:
      DATABASE_URL: ${DATABASE_URL:-postgresql://library_user:library_password@db:5432/library_db}
      SECRET_KEY: ${SECRET_KEY:-dev-secret-key-change-in-production-32-chars}
      ACCESS_TOKEN_EXPIRE_MINUTES: ${ACCESS_TOKEN_EXPIRE_MINUTES:-30}
      BOOKS_DIRECTORY: /app/books
    volumes:
      # - ./backend/app:/app/app  ← УБЕРИ ЭТУ СТРОКУ (для dev)
      - ./books:/app/books  # Только книги оставляем
    ports:
      - "8000:8000"
    depends_on:
      db:
        condition: service_healthy
    networks:
      - library_network
    restart: unless-stopped

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    container_name: library_frontend
    ports:
      - "8080:80"
    depends_on:
      - backend
    networks:
      - library_network
    restart: unless-stopped

volumes:
  postgres_data:

networks:
  library_network:
    driver: bridge



==== FILE: .\project_code.txt ====

==== FILE: .\.dockerignore ====
node_modules
__pycache__
*.pyc
*.pyo
*.pyd
.Python
env
venv
.venv
pip-log.txt
pip-delete-this-directory.txt
.tox
.coverage
.coverage.*
.cache
nosetests.xml
coverage.xml
*.cover
*.log
.git
.gitignore
.mypy_cache
.pytest_cache
.hypothesis



==== FILE: .\.env ====
# ===========================================
# БАЗА ДАННЫХ (PostgreSQL)
# ===========================================
POSTGRES_DB=library_db
POSTGRES_USER=library_user
POSTGRES_PASSWORD=LibrarySecurePassword2025!

# ===========================================
# BACKEND (FastAPI)
# ===========================================
DATABASE_URL=postgresql://library_user:LibrarySecurePassword2025!@db:5432/library_db

# Сгенерируй НОВЫЙ ключ!
SECRET_KEY=твой-новый-секретный-ключ-32-символа

ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
BOOKS_DIRECTORY=/app/books

# ===========================================
# ОБЩИЕ НАСТРОЙКИ
# ===========================================
ENVIRONMENT=production  # ← ИЗМЕНЕНО
LOG_LEVEL=INFO



==== FILE: .\.gitignore ====
# ==================== DEPENDENCIES ====================
# Node.js
node_modules/
frontend/node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*
package-lock.json
yarn.lock

# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
backend/__pycache__/
backend/**/__pycache__/
*.pyc
*.pyo
*.pyd
.pytest_cache/
.mypy_cache/
.hypothesis/
.coverage
.coverage.*
htmlcov/
*.cover
.tox/
*.egg
*.egg-info/
dist/
build/
pip-log.txt
pip-delete-this-directory.txt

# ==================== ENVIRONMENT VARIABLES ====================
.env
.env.local
.env.development.local
.env.test.local
.env.production.local
backend/.env
frontend/.env
**/.env

# ==================== DATABASE ====================
# Локальные базы данных (не для продакшн)
*.db
*.sqlite
*.sqlite3
db.sqlite3
postgres-data/
db_volume/
*.sql.backup

# ==================== DOCKER ====================
# Docker override файлы (локальные настройки)
docker-compose.override.yml
.dockerignore

# ==================== BUILD FILES ====================
# React build
frontend/build/
frontend/dist/
frontend/.cache/
frontend/out/

# Backend build
backend/dist/
backend/build/

# ==================== IDE & EDITORS ====================
# VSCode
.vscode/
.vscode/*
!.vscode/extensions.json
!.vscode/settings.json

# JetBrains (PyCharm, WebStorm, IntelliJ)
.idea/
*.iml
*.iws
*.ipr
.idea_modules/

# Sublime Text
*.sublime-project
*.sublime-workspace

# Vim
*.swp
*.swo
*~

# ==================== OS FILES ====================
# macOS
.DS_Store
.AppleDouble
.LSOverride
Icon
._*
.Spotlight-V100
.Trashes

# Windows
Thumbs.db
ehthumbs.db
Desktop.ini
$RECYCLE.BIN/
*.lnk

# Linux
.directory
*~

# ==================== LOGS ====================
*.log
logs/
*.log.*
npm-debug.log*
yarn-debug.log*
yarn-error.log*
backend/logs/
frontend/logs/

# ==================== BOOKS (PDF FILES) ====================
# НЕ загружаем книги в Git (они большие)
books/*.pdf
backend/books/*.pdf
backend/app/books/*.pdf
*.pdf

# ==================== TESTING ====================
coverage/
.nyc_output/
test-results/
*.lcov

# ==================== TEMPORARY FILES ====================
tmp/
temp/
*.tmp
*.bak
*.swp
*.old
.cache/

# ==================== SECURITY ====================
# Секретные ключи и сертификаты
*.pem
*.key
*.cert
*.csr
*.crt
secrets/

# ==================== MISC ====================
.sass-cache/
.eslintcache
.stylelintcache
.parcel-cache/
.next/
.nuxt/
.vercel
.turbo

# Jupyter Notebook
.ipynb_checkpoints

# pyenv
.python-version

# Celery
celerybeat-schedule
celerybeat.pid

# ==================== KEEP THESE (ВАЖНЫЕ ФАЙЛЫ) ====================
# Эти файлы НУЖНО загружать в Git:
!.gitignore
!.dockerignore
!.gitkeep
!README.md
!LICENSE
!docker-compose.yml
!Dockerfile
!requirements.txt
!package.json



==== FILE: .\collect.py ====
import os
from pathlib import Path

# Что игнорировать
IGNORE_DIRS = {'node_modules', 'dist', 'build', '.git', 'postgres_data', '__pycache__', '.vscode'}
IGNORE_FILES = {'package-lock.json', 'package.json'}
IGNORE_EXTENSIONS = {'.log', '.jpg', '.jpeg', '.png', '.svg', '.ico', '.map'}

OUTPUT_FILE = 'project_code.txt'

def should_ignore(path):
    """Проверяем, нужно ли игнорировать файл/папку"""
    parts = Path(path).parts
    
    # Игнорируем папки
    if any(ignored in parts for ignored in IGNORE_DIRS):
        return True
    
    # Игнорируем файлы по имени
    if Path(path).name in IGNORE_FILES:
        return True
    
    # Игнорируем по расширению
    if Path(path).suffix in IGNORE_EXTENSIONS:
        return True
    
    return False

def collect_files(root_dir='.'):
    """Собираем все файлы проекта"""
    with open(OUTPUT_FILE, 'w', encoding='utf-8') as output:
        for root, dirs, files in os.walk(root_dir):
            # Удаляем игнорируемые директории из обхода
            dirs[:] = [d for d in dirs if d not in IGNORE_DIRS]
            
            for file in files:
                file_path = os.path.join(root, file)
                
                if should_ignore(file_path):
                    continue
                
                try:
                    print(f"Обрабатываю: {file_path}")
                    output.write(f"\n==== FILE: {file_path} ====\n")
                    
                    with open(file_path, 'r', encoding='utf-8') as f:
                        content = f.read()
                        output.write(content)
                        output.write("\n\n")
                
                except Exception as e:
                    print(f"Ошибка при чтении {file_path}: {e}")
                    output.write(f"[ОШИБКА ЧТЕНИЯ: {e}]\n\n")

if __name__ == '__main__':
    print(f"Собираю код в {OUTPUT_FILE}...")
    collect_files()
    print(f"Готово! Файл сохранён в {OUTPUT_FILE}")



==== FILE: .\docker-compose.yml ====
version: '3.8'

services:
  db:
    image: postgres:16-alpine
    container_name: library_db
    environment:
      POSTGRES_DB: ${POSTGRES_DB:-library_db}
      POSTGRES_USER: ${POSTGRES_USER:-library_user}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-library_password}
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./database/init.sql:/docker-entrypoint-initdb.d/init.sql
    ports:
      - "5433:5432"
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U library_user -d library_db"]
      interval: 10s
      timeout: 5s
      retries: 5
    networks:
      - library_network

  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    container_name: library_backend
    environment:
      DATABASE_URL: ${DATABASE_URL:-postgresql://library_user:library_password@db:5432/library_db}
      SECRET_KEY: ${SECRET_KEY:-dev-secret-key-change-in-production-32-chars}
      ACCESS_TOKEN_EXPIRE_MINUTES: ${ACCESS_TOKEN_EXPIRE_MINUTES:-30}
      BOOKS_DIRECTORY: /app/books
    volumes:
      # - ./backend/app:/app/app  ← УБЕРИ ЭТУ СТРОКУ (для dev)
      - ./books:/app/books  # Только книги оставляем
    ports:
      - "8000:8000"
    depends_on:
      db:
        condition: service_healthy
    networks:
      - library_network
    restart: unless-stopped

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    container_name: library_frontend
    ports:
      - "8080:80"
    depends_on:
      - backend
    networks:
      - library_network
    restart: unless-stopped

volumes:
  postgres_data:

networks:
  library_network:
    driver: bridge



==== FILE: .\README.md ====
# Онлайн-библиотека

Современная онлайн-библиотека с возможностью просмотра, скачивания и оценки книг.

## Технологии

- **Backend**: FastAPI, PostgreSQL, SQLAlchemy
- **Frontend**: React, React Router
- **Containerization**: Docker, Docker Compose

## Быстрый старт

### Предварительные требования

- Docker
- Docker Compose

### Установка и запуск

1. Клонируйте репозиторий
2. Создайте директорию для книг:
mkdir books

3. Поместите PDF файлы в формате `#ТЭГ_#ЖАНР_Название_книги_Автор.pdf` в директорию `books/`

4. Запустите проект:
docker-compose up --build

5. Откройте браузер:
   - Frontend: http://localhost
   - Backend API: http://localhost:8000
   - API Docs: http://localhost:8000/docs

### Создание первого админа

1. Зарегистрируйтесь через веб-интерфейс
2. Подключитесь к базе данных:
docker exec -it library_db psql -U library_user -d library_db

3. Сделайте пользователя администратором:
UPDATE users SET is_admin = true WHERE email = 'ваш@email.com';

## Функционал

- Просмотр каталога книг
- Поиск и фильтрация
- Онлайн-чтение PDF
- Скачивание книг
- Система рейтингов и отзывов
- Избранное
- Отметка прочитанных книг
- Админ-панель для управления книгами
- Светлая/темная тема

## Структура проекта

online-library/
├── backend/ # FastAPI приложение
├── frontend/ # React приложение
├── database/ # SQL скрипты
├── books/ # Директория с PDF книгами
└── docker-compose.yml

## Лицензия

MIT


==== FILE: .\backend\Dockerfile ====
FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY ./app ./app

RUN mkdir -p /app/books

# С workers для лучшей производительности
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000", "--workers", "2"]



==== FILE: .\backend\requirements.txt ====
﻿fastapi==0.109.0
uvicorn[standard]==0.27.0
sqlalchemy==2.0.25
psycopg2-binary==2.9.9
python-multipart==0.0.6
python-jose[cryptography]==3.3.0
passlib[bcrypt]==1.7.4
pydantic==2.5.3
pydantic-settings==2.1.0
python-dotenv==1.0.0
PyPDF2==3.0.1
aiofiles==23.2.1
email-validator==2.1.0
bcrypt==4.0.1



==== FILE: .\backend\app\auth.py ====
from datetime import datetime, timedelta
from typing import Optional
from jose import JWTError, jwt
from passlib.context import CryptContext
from fastapi import Depends, HTTPException, status
from fastapi.security import HTTPBearer, HTTPAuthorizationCredentials
from sqlalchemy.orm import Session
from .config import settings
from .database import get_db
from . import models, schemas

pwd_context = CryptContext(schemes=["bcrypt"], deprecated="auto", bcrypt__rounds=12)

# ИСПРАВЛЕНО: auto_error=False позволяет работать без токена
security = HTTPBearer(auto_error=False)

def verify_password(plain_password: str, hashed_password: str) -> bool:
    return pwd_context.verify(plain_password, hashed_password)

def get_password_hash(password: str) -> str:
    if len(password.encode('utf-8')) > 72:
        password = password[:72]
    return pwd_context.hash(password)

def create_access_token(data: dict, expires_delta: Optional[timedelta] = None):
    to_encode = data.copy()
    if expires_delta:
        expire = datetime.utcnow() + expires_delta
    else:
        expire = datetime.utcnow() + timedelta(minutes=15)
    to_encode.update({"exp": expire})
    encoded_jwt = jwt.encode(to_encode, settings.SECRET_KEY, algorithm=settings.ALGORITHM)
    return encoded_jwt

def get_current_user(
    credentials: HTTPAuthorizationCredentials = Depends(security),
    db: Session = Depends(get_db)
) -> models.User:
    credentials_exception = HTTPException(
        status_code=status.HTTP_401_UNAUTHORIZED,
        detail="Не удалось проверить учетные данные"
    )
    
    if not credentials:
        raise credentials_exception
    
    try:
        token = credentials.credentials
        payload = jwt.decode(token, settings.SECRET_KEY, algorithms=[settings.ALGORITHM])
        email: str = payload.get("sub")
        if email is None:
            raise credentials_exception
        token_data = schemas.TokenData(email=email)
    except JWTError:
        raise credentials_exception
    
    user = db.query(models.User).filter(models.User.email == token_data.email).first()
    if user is None:
        raise credentials_exception
    return user

def get_optional_current_user(
    credentials: Optional[HTTPAuthorizationCredentials] = Depends(security),
    db: Session = Depends(get_db)
) -> Optional[models.User]:
    """
    Возвращает пользователя если есть токен, иначе None.
    Не выбрасывает исключение при отсутствии токена.
    """
    if not credentials:
        return None
    try:
        return get_current_user(credentials, db)
    except HTTPException:
        return None

def get_current_admin_user(
    current_user: models.User = Depends(get_current_user)
) -> models.User:
    if not current_user.is_admin:
        raise HTTPException(
            status_code=status.HTTP_403_FORBIDDEN,
            detail="У вас нет прав доступа"
        )
    return current_user



==== FILE: .\backend\app\config.py ====
from pydantic_settings import BaseSettings
from typing import Optional

class Settings(BaseSettings):
    DATABASE_URL: str = "postgresql://library_user:library_password@db:5432/library_db"
    SECRET_KEY: str = "your-secret-key-change-in-production-min-32-characters-long"
    ALGORITHM: str = "HS256"
    ACCESS_TOKEN_EXPIRE_MINUTES: int = 30
    BOOKS_DIRECTORY: str = "/app/books"
    
    class Config:
        env_file = ".env"

settings = Settings()



==== FILE: .\backend\app\crud.py ====
from sqlalchemy.orm import Session
from sqlalchemy import or_, func, and_
from typing import List, Optional
from . import models, schemas
from .auth import get_password_hash

# ============ USER CRUD OPERATIONS ============

def get_user_by_email(db: Session, email: str) -> Optional[models.User]:
    """Получить пользователя по email"""
    return db.query(models.User).filter(models.User.email == email).first()

def get_user_by_id(db: Session, user_id: int) -> Optional[models.User]:
    """Получить пользователя по ID"""
    return db.query(models.User).filter(models.User.id == user_id).first()

def get_users(db: Session, skip: int = 0, limit: int = 100) -> List[models.User]:
    """Получить список всех пользователей"""
    return db.query(models.User).offset(skip).limit(limit).all()

def create_user(db: Session, user: schemas.UserCreate) -> models.User:
    """Создать нового пользователя"""
    hashed_password = get_password_hash(user.password)
    db_user = models.User(
        email=user.email,
        full_name=user.full_name,
        hashed_password=hashed_password,
        is_admin=False  # По умолчанию не админ
    )
    db.add(db_user)
    db.commit()
    db.refresh(db_user)
    return db_user

def update_user(db: Session, user_id: int, updates: dict) -> Optional[models.User]:
    """Обновить данные пользователя"""
    user = get_user_by_id(db, user_id)
    if user:
        for key, value in updates.items():
            if hasattr(user, key):
                setattr(user, key, value)
        db.commit()
        db.refresh(user)
    return user

def make_admin(db: Session, user_id: int) -> Optional[models.User]:
    """Сделать пользователя администратором"""
    return update_user(db, user_id, {"is_admin": True})

def delete_user(db: Session, user_id: int) -> bool:
    """Удалить пользователя"""
    user = get_user_by_id(db, user_id)
    if user:
        db.delete(user)
        db.commit()
        return True
    return False

# ============ BOOK CRUD OPERATIONS ============

def get_books(
    db: Session,
    skip: int = 0,
    limit: int = 100,
    tag: Optional[str] = None,
    genre: Optional[str] = None,
    author: Optional[str] = None,
    search: Optional[str] = None,
    title: Optional[str] = None
) -> List[models.Book]:
    """
    Получить список книг с фильтрацией
    
    Args:
        db: Сессия базы данных
        skip: Количество пропускаемых записей
        limit: Максимальное количество записей
        tag: Фильтр по тегу
        genre: Фильтр по жанру
        author: Фильтр по автору
        search: Поиск по всем полям
        title: Фильтр по названию
    """
    query = db.query(models.Book)
    
    if tag:
        query = query.filter(models.Book.tag.ilike(f"%{tag}%"))
    if genre:
        query = query.filter(models.Book.genre.ilike(f"%{genre}%"))
    if author:
        query = query.filter(models.Book.author.ilike(f"%{author}%"))
    if title:
        query = query.filter(models.Book.title.ilike(f"%{title}%"))
    if search:
        search_filter = or_(
            models.Book.title.ilike(f"%{search}%"),
            models.Book.description.ilike(f"%{search}%"),
            models.Book.author.ilike(f"%{search}%"),
            models.Book.tag.ilike(f"%{search}%"),
            models.Book.genre.ilike(f"%{search}%")
        )
        query = query.filter(search_filter)
    
    return query.order_by(models.Book.created_at.desc()).offset(skip).limit(limit).all()

def get_books_count(
    db: Session,
    tag: Optional[str] = None,
    genre: Optional[str] = None,
    author: Optional[str] = None,
    search: Optional[str] = None
) -> int:
    """Получить количество книг с учетом фильтров"""
    query = db.query(func.count(models.Book.id))
    
    if tag:
        query = query.filter(models.Book.tag.ilike(f"%{tag}%"))
    if genre:
        query = query.filter(models.Book.genre.ilike(f"%{genre}%"))
    if author:
        query = query.filter(models.Book.author.ilike(f"%{author}%"))
    if search:
        search_filter = or_(
            models.Book.title.ilike(f"%{search}%"),
            models.Book.description.ilike(f"%{search}%"),
            models.Book.author.ilike(f"%{search}%"),
            models.Book.tag.ilike(f"%{search}%"),
            models.Book.genre.ilike(f"%{search}%")
        )
        query = query.filter(search_filter)
    
    return query.scalar()

def get_book(db: Session, book_id: int) -> Optional[models.Book]:
    """Получить книгу по ID"""
    return db.query(models.Book).filter(models.Book.id == book_id).first()

def get_book_by_filename(db: Session, filename: str) -> Optional[models.Book]:
    """Получить книгу по имени файла"""
    return db.query(models.Book).filter(models.Book.filename == filename).first()

def create_book(db: Session, book: schemas.BookCreate) -> models.Book:
    """Создать новую книгу"""
    db_book = models.Book(**book.dict())
    db.add(db_book)
    db.commit()
    db.refresh(db_book)
    return db_book

def update_book(db: Session, book_id: int, book_update: schemas.BookUpdate) -> Optional[models.Book]:
    """Обновить информацию о книге"""
    db_book = get_book(db, book_id)
    if db_book:
        update_data = book_update.dict(exclude_unset=True)
        for field, value in update_data.items():
            setattr(db_book, field, value)
        db.commit()
        db.refresh(db_book)
    return db_book

def delete_book(db: Session, book_id: int) -> bool:
    """Удалить книгу"""
    db_book = get_book(db, book_id)
    if db_book:
        db.delete(db_book)
        db.commit()
        return True
    return False

# ============ RATING OPERATIONS ============

def get_book_average_rating(db: Session, book_id: int) -> Optional[float]:
    """Получить средний рейтинг книги"""
    result = db.query(func.avg(models.Rating.value)).filter(
        models.Rating.book_id == book_id
    ).scalar()
    return round(result, 2) if result else None

def get_book_ratings_count(db: Session, book_id: int) -> int:
    """Получить количество оценок книги"""
    return db.query(func.count(models.Rating.id)).filter(
        models.Rating.book_id == book_id
    ).scalar()

def get_user_rating_for_book(db: Session, user_id: int, book_id: int) -> Optional[float]:
    """Получить оценку пользователя для книги"""
    rating = db.query(models.Rating).filter(
        and_(
            models.Rating.user_id == user_id,
            models.Rating.book_id == book_id
        )
    ).first()
    return rating.value if rating else None

def create_or_update_rating(db: Session, user_id: int, rating_data: schemas.RatingCreate) -> models.Rating:
    """Создать или обновить оценку книги"""
    existing_rating = db.query(models.Rating).filter(
        and_(
            models.Rating.user_id == user_id,
            models.Rating.book_id == rating_data.book_id
        )
    ).first()
    
    if existing_rating:
        existing_rating.value = rating_data.value
        db.commit()
        db.refresh(existing_rating)
        return existing_rating
    else:
        db_rating = models.Rating(user_id=user_id, **rating_data.dict())
        db.add(db_rating)
        db.commit()
        db.refresh(db_rating)
        return db_rating

def delete_rating(db: Session, user_id: int, book_id: int) -> bool:
    """Удалить оценку пользователя"""
    rating = db.query(models.Rating).filter(
        and_(
            models.Rating.user_id == user_id,
            models.Rating.book_id == book_id
        )
    ).first()
    
    if rating:
        db.delete(rating)
        db.commit()
        return True
    return False

# ============ FAVORITE OPERATIONS ============

def add_to_favorites(db: Session, user_id: int, book_id: int) -> bool:
    """Добавить книгу в избранное"""
    user = db.query(models.User).filter(models.User.id == user_id).first()
    book = db.query(models.Book).filter(models.Book.id == book_id).first()
    
    if user and book:
        if book not in user.favorites:
            user.favorites.append(book)
            db.commit()
            return True
    return False

def remove_from_favorites(db: Session, user_id: int, book_id: int) -> bool:
    """Удалить книгу из избранного"""
    user = db.query(models.User).filter(models.User.id == user_id).first()
    book = db.query(models.Book).filter(models.Book.id == book_id).first()
    
    if user and book:
        if book in user.favorites:
            user.favorites.remove(book)
            db.commit()
            return True
    return False

def get_user_favorites(
    db: Session,
    user_id: int,
    skip: int = 0,
    limit: int = 100,
    tag: Optional[str] = None,
    genre: Optional[str] = None,
    author: Optional[str] = None,
    search: Optional[str] = None
) -> List[models.Book]:
    """Получить избранные книги пользователя с фильтрацией"""
    user = db.query(models.User).filter(models.User.id == user_id).first()
    
    if not user:
        return []
    
    query = db.query(models.Book).join(
        models.favorites,
        models.Book.id == models.favorites.c.book_id
    ).filter(
        models.favorites.c.user_id == user_id
    )
    
    if tag:
        query = query.filter(models.Book.tag.ilike(f"%{tag}%"))
    if genre:
        query = query.filter(models.Book.genre.ilike(f"%{genre}%"))
    if author:
        query = query.filter(models.Book.author.ilike(f"%{author}%"))
    if search:
        search_filter = or_(
            models.Book.title.ilike(f"%{search}%"),
            models.Book.description.ilike(f"%{search}%"),
            models.Book.author.ilike(f"%{search}%"),
            models.Book.tag.ilike(f"%{search}%"),
            models.Book.genre.ilike(f"%{search}%")
        )
        query = query.filter(search_filter)
    
    return query.offset(skip).limit(limit).all()

def is_favorite(db: Session, user_id: int, book_id: int) -> bool:
    """Проверить, находится ли книга в избранном"""
    count = db.query(func.count(models.favorites.c.user_id)).filter(
        and_(
            models.favorites.c.user_id == user_id,
            models.favorites.c.book_id == book_id
        )
    ).scalar()
    return count > 0

# ============ READ STATUS OPERATIONS ============

def mark_as_read(db: Session, user_id: int, book_id: int) -> bool:
    """Отметить книгу как прочитанную"""
    user = db.query(models.User).filter(models.User.id == user_id).first()
    book = db.query(models.Book).filter(models.Book.id == book_id).first()
    
    if user and book:
        if book not in user.read:
            user.read.append(book)
            db.commit()
            return True
    return False

def mark_as_unread(db: Session, user_id: int, book_id: int) -> bool:
    """Отметить книгу как непрочитанную"""
    user = db.query(models.User).filter(models.User.id == user_id).first()
    book = db.query(models.Book).filter(models.Book.id == book_id).first()
    
    if user and book:
        if book in user.read:
            user.read.remove(book)
            db.commit()
            return True
    return False

def get_user_read_books(db: Session, user_id: int) -> List[models.Book]:
    """Получить прочитанные книги пользователя"""
    user = db.query(models.User).filter(models.User.id == user_id).first()
    return user.read if user else []

def is_read(db: Session, user_id: int, book_id: int) -> bool:
    """Проверить, прочитана ли книга"""
    count = db.query(func.count(models.read_books.c.user_id)).filter(
        and_(
            models.read_books.c.user_id == user_id,
            models.read_books.c.book_id == book_id
        )
    ).scalar()
    return count > 0

# ============ REVIEW OPERATIONS ============

def create_review(db: Session, user_id: int, review: schemas.ReviewCreate) -> models.Review:
    """Создать отзыв на книгу"""
    db_review = models.Review(user_id=user_id, **review.dict())
    db.add(db_review)
    db.commit()
    db.refresh(db_review)
    return db_review

def get_book_reviews(db: Session, book_id: int, skip: int = 0, limit: int = 100) -> List[models.Review]:
    """Получить отзывы на книгу"""
    return db.query(models.Review).filter(
        models.Review.book_id == book_id
    ).order_by(
        models.Review.created_at.desc()
    ).offset(skip).limit(limit).all()

def get_user_reviews(db: Session, user_id: int, skip: int = 0, limit: int = 100) -> List[models.Review]:
    """Получить отзывы пользователя"""
    return db.query(models.Review).filter(
        models.Review.user_id == user_id
    ).order_by(
        models.Review.created_at.desc()
    ).offset(skip).limit(limit).all()

def get_review(db: Session, review_id: int) -> Optional[models.Review]:
    """Получить отзыв по ID"""
    return db.query(models.Review).filter(models.Review.id == review_id).first()

def update_review(db: Session, review_id: int, text: str) -> Optional[models.Review]:
    """Обновить текст отзыва"""
    review = get_review(db, review_id)
    if review:
        review.text = text
        db.commit()
        db.refresh(review)
    return review

def delete_review(db: Session, review_id: int) -> bool:
    """Удалить отзыв"""
    review = get_review(db, review_id)
    if review:
        db.delete(review)
        db.commit()
        return True
    return False

# ============ FILTER OPTIONS ============

def get_all_tags(db: Session) -> List[str]:
    """Получить все уникальные теги"""
    tags = db.query(models.Book.tag).distinct().order_by(models.Book.tag).all()
    return [tag[0] for tag in tags if tag[0]]

def get_all_genres(db: Session) -> List[str]:
    """Получить все уникальные жанры"""
    genres = db.query(models.Book.genre).distinct().order_by(models.Book.genre).all()
    return [genre[0] for genre in genres if genre[0]]

def get_all_authors(db: Session) -> List[str]:
    """Получить всех уникальных авторов"""
    authors = db.query(models.Book.author).distinct().order_by(models.Book.author).all()
    return [author[0] for author in authors if author[0]]

# ============ STATISTICS ============

def get_total_books_count(db: Session) -> int:
    """Получить общее количество книг"""
    return db.query(func.count(models.Book.id)).scalar()

def get_total_users_count(db: Session) -> int:
    """Получить общее количество пользователей"""
    return db.query(func.count(models.User.id)).scalar()

def get_total_reviews_count(db: Session) -> int:
    """Получить общее количество отзывов"""
    return db.query(func.count(models.Review.id)).scalar()

def get_user_statistics(db: Session, user_id: int) -> dict:
    """Получить статистику пользователя"""
    favorites_count = db.query(func.count(models.favorites.c.book_id)).filter(
        models.favorites.c.user_id == user_id
    ).scalar()
    
    read_count = db.query(func.count(models.read_books.c.book_id)).filter(
        models.read_books.c.user_id == user_id
    ).scalar()
    
    reviews_count = db.query(func.count(models.Review.id)).filter(
        models.Review.user_id == user_id
    ).scalar()
    
    ratings_count = db.query(func.count(models.Rating.id)).filter(
        models.Rating.user_id == user_id
    ).scalar()
    
    return {
        "favorites_count": favorites_count or 0,
        "read_count": read_count or 0,
        "reviews_count": reviews_count or 0,
        "ratings_count": ratings_count or 0
    }



==== FILE: .\backend\app\database.py ====
from sqlalchemy import create_engine
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker
from .config import settings

engine = create_engine(settings.DATABASE_URL)
SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)

Base = declarative_base()

def get_db():
    db = SessionLocal()
    try:
        yield db
    finally:
        db.close()



==== FILE: .\backend\app\main.py ====
from fastapi import FastAPI, Depends, HTTPException, status, File, UploadFile, Query, Request, Form
from fastapi.responses import FileResponse, JSONResponse
from fastapi.middleware.cors import CORSMiddleware
from fastapi.exceptions import RequestValidationError
from sqlalchemy.orm import Session
from typing import List, Optional
import os
import shutil
from collections import defaultdict
import time
from datetime import timedelta

from . import models, schemas, crud, auth
from .database import engine, get_db
from .config import settings
from .utils import parse_book_filename, get_books_from_directory

# Создание таблиц
models.Base.metadata.create_all(bind=engine)

app = FastAPI(title="Online Library API", version="1.0.0")

# Rate limiter для авторизации
login_attempts = defaultdict(list)
RATE_LIMIT_WINDOW = 60  # секунды
RATE_LIMIT_MAX_ATTEMPTS = 5

def check_rate_limit(ip: str) -> bool:
    """Проверка лимита запросов. Возвращает True если лимит превышен."""
    now = time.time()
    login_attempts[ip] = [t for t in login_attempts[ip] if now - t < RATE_LIMIT_WINDOW]
    
    if len(login_attempts[ip]) >= RATE_LIMIT_MAX_ATTEMPTS:
        return True
    
    login_attempts[ip].append(now)
    return False

# Rate limiters для различных действий
review_attempts = defaultdict(list)
rating_attempts = defaultdict(list)
download_attempts = defaultdict(list)
view_attempts = defaultdict(list)

def check_action_rate_limit(user_id: int, action_dict: dict, window: int, max_attempts: int) -> bool:
    """Универсальная функция для проверки rate limit по действиям пользователя."""
    now = time.time()
    key = str(user_id)
    
    # Очищаем старые попытки
    action_dict[key] = [t for t in action_dict[key] if now - t < window]
    
    # Проверяем лимит
    if len(action_dict[key]) >= max_attempts:
        return True
    
    # Добавляем текущую попытку
    action_dict[key].append(now)
    return False


# ============ ОБРАБОТЧИКИ ОШИБОК ============

@app.exception_handler(RequestValidationError)
async def validation_exception_handler(request: Request, exc: RequestValidationError):
    errors = []
    for error in exc.errors():
        field = error.get("loc")[-1] if error.get("loc") else "unknown"
        msg = error.get("msg", "")
        
        # Обрабатываем разные типы ошибок
        if "valid email" in msg.lower():
            errors.append("Неверный формат email")
        elif "field required" in msg.lower():
            errors.append("Поле обязательно для заполнения")
        elif "none is not an allowed value" in msg.lower():
            errors.append("Поле не может быть пустым")
        elif "Value error" in msg:
            # Извлекаем текст после "Value error, "
            clean_msg = msg.replace("Value error, ", "")
            errors.append(clean_msg)
        else:
            # Для всех остальных случаев - только сообщение без имени поля
            errors.append(msg)
    
    return JSONResponse(
        status_code=status.HTTP_422_UNPROCESSABLE_ENTITY,
        content={"detail": "\n".join(errors) if errors else "Ошибка валидации"}
    )


# ============ CORS НАСТРОЙКИ ============

app.add_middleware(
    CORSMiddleware,
    allow_origins=[
        "http://localhost:3000",
        "http://localhost:8080",
        "http://localhost",
        "http://192.168.88.228:8080"
    ],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# Создание директории для книг
os.makedirs(settings.BOOKS_DIRECTORY, exist_ok=True)

# ============ AUTH ENDPOINTS ============

@app.post("/api/auth/register", response_model=schemas.User, status_code=status.HTTP_201_CREATED)
def register(user: schemas.UserCreate, request: Request, db: Session = Depends(get_db)):
    # Rate limiting
    if check_rate_limit(request.client.host):
        raise HTTPException(status_code=429, detail="Превышен лимит попыток регистрации. Попробуйте через минуту")
    
    db_user = crud.get_user_by_email(db, email=user.email)
    if db_user:
        raise HTTPException(status_code=400, detail="Пользователь с таким email уже существует")
    try:
        return crud.create_user(db=db, user=user)
    except Exception as e:
        raise HTTPException(status_code=500, detail=f"Ошибка создания пользователя: {str(e)}")


@app.post("/api/auth/login", response_model=schemas.Token)
def login(user_login: schemas.UserLogin, request: Request, db: Session = Depends(get_db)):
    # Rate limiting
    if check_rate_limit(request.client.host):
        raise HTTPException(status_code=429, detail="Превышен лимит попыток входа. Попробуйте через минуту")
    
    user = crud.get_user_by_email(db, email=user_login.email)
    if not user:
        raise HTTPException(status_code=status.HTTP_401_UNAUTHORIZED, detail="Неверный email или пароль")
    if not auth.verify_password(user_login.password, user.hashed_password):
        raise HTTPException(status_code=status.HTTP_401_UNAUTHORIZED, detail="Неверный email или пароль")
    
    access_token_expires = timedelta(minutes=settings.ACCESS_TOKEN_EXPIRE_MINUTES)
    access_token = auth.create_access_token(data={"sub": user.email}, expires_delta=access_token_expires)
    return {"access_token": access_token, "token_type": "bearer"}


@app.get("/api/auth/me", response_model=schemas.User)
def get_current_user_info(current_user: models.User = Depends(auth.get_current_user)):
    """Получить информацию о текущем пользователе"""
    return current_user

# ============ BOOK ENDPOINTS ============

@app.get("/api/books", response_model=List[schemas.BookResponse])
def get_books(
    skip: int = 0,
    limit: int = 100,
    tag: Optional[str] = None,
    genre: Optional[str] = None,
    author: Optional[str] = None,
    search: Optional[str] = None,
    db: Session = Depends(get_db),
    current_user: Optional[models.User] = Depends(auth.get_optional_current_user)
):
    """Получить список книг с фильтрацией"""
    books = crud.get_books(db, skip=skip, limit=limit, tag=tag, genre=genre, author=author, search=search)
    
    result = []
    for book in books:
        book_data = schemas.BookResponse(
            id=book.id,
            filename=book.filename,
            title=book.title,
            author=book.author,
            tag=book.tag,
            genre=book.genre,
            description=book.description,
            created_at=book.created_at,
            average_rating=crud.get_book_average_rating(db, book.id),
            is_favorite=crud.is_favorite(db, current_user.id, book.id) if current_user else False,
            is_read=crud.is_read(db, current_user.id, book.id) if current_user else False,
            user_rating=crud.get_user_rating_for_book(db, current_user.id, book.id) if current_user else None
        )
        result.append(book_data)
    
    return result

@app.get("/api/books/{book_id}", response_model=schemas.BookResponse)
def get_book(
    book_id: int,
    db: Session = Depends(get_db),
    current_user: Optional[models.User] = Depends(auth.get_optional_current_user)
):
    """Получить информацию о книге"""
    book = crud.get_book(db, book_id)
    if not book:
        raise HTTPException(status_code=404, detail="Книга не найдена")
    
    return schemas.BookResponse(
        id=book.id,
        filename=book.filename,
        title=book.title,
        author=book.author,
        tag=book.tag,
        genre=book.genre,
        description=book.description,
        created_at=book.created_at,
        average_rating=crud.get_book_average_rating(db, book.id),
        is_favorite=crud.is_favorite(db, current_user.id, book.id) if current_user else False,
        is_read=crud.is_read(db, current_user.id, book.id) if current_user else False,
        user_rating=crud.get_user_rating_for_book(db, current_user.id, book.id) if current_user else None
    )

@app.get("/api/books/{book_id}/download")
def download_book(
    book_id: int,
    db: Session = Depends(get_db),
    current_user: Optional[models.User] = Depends(auth.get_optional_current_user)  # Опциональная!
):
    # Rate limiting ТОЛЬКО для авторизованных
    if current_user and check_action_rate_limit(current_user.id, download_attempts, 30, 1):
        raise HTTPException(
            status_code=429,
            detail="Вы можете скачивать файлы не чаще 1 раза в 30 секунд. Подождите."
        )
    
    book = crud.get_book(db, book_id)
    if not book:
        raise HTTPException(status_code=404, detail="Книга не найдена")
    
    file_path = os.path.join(settings.BOOKS_DIRECTORY, book.filename)
    if not os.path.exists(file_path):
        raise HTTPException(status_code=404, detail="Файл не найден")
    
    return FileResponse(file_path, media_type="application/pdf", filename=book.filename)



@app.get("/api/books/{book_id}/view")
def view_book(
    book_id: int,
    db: Session = Depends(get_db),
    current_user: Optional[models.User] = Depends(auth.get_optional_current_user)  # Опциональная!
):
    # Rate limiting ТОЛЬКО для авторизованных
    if current_user and check_action_rate_limit(current_user.id, view_attempts, 30, 1):
        raise HTTPException(
            status_code=429,
            detail="Вы можете открывать книги для чтения не чаще 1 раза в 30 секунд. Подождите."
        )
    
    book = crud.get_book(db, book_id)
    if not book:
        raise HTTPException(status_code=404, detail="Книга не найдена")
    
    file_path = os.path.join(settings.BOOKS_DIRECTORY, book.filename)
    if not os.path.exists(file_path):
        raise HTTPException(status_code=404, detail="Файл не найден")
    
    return FileResponse(file_path, media_type="application/pdf")


@app.post("/api/books/sync")
def sync_books(
    db: Session = Depends(get_db),
    current_user: models.User = Depends(auth.get_current_admin_user)
):
    """Синхронизация книг из директории с базой данных (только для админов)"""
    try:
        books_from_dir = get_books_from_directory()
        synced_count = 0
        
        for book_data in books_from_dir:
            existing_book = crud.get_book_by_filename(db, book_data['filename'])
            if not existing_book:
                book_create = schemas.BookCreate(**book_data, description="")
                crud.create_book(db, book_create)
                synced_count += 1
        
        return {"message": f"Синхронизировано {synced_count} новых книг"}
    except Exception as e:
        raise HTTPException(
            status_code=500,
            detail=f"Ошибка при синхронизации: {str(e)}"
        )

@app.post("/api/books", response_model=schemas.BookResponse, status_code=status.HTTP_201_CREATED)
async def createbook(
    file: UploadFile = File(...),
    tag: str = Form(...),           # ✅ ИСПРАВЛЕНО
    genre: str = Form(...),         # ✅ ИСПРАВЛЕНО
    title: str = Form(...),         # ✅ ИСПРАВЛЕНО
    author: str = Form(...),        # ✅ ИСПРАВЛЕНО
    description: str = Form(...),   # ✅ ИСПРАВЛЕНО
    db: Session = Depends(get_db),
    current_user: models.User = Depends(auth.get_current_admin_user)
):
    """Загрузка новой книги (только для админов)"""
    if not file.filename.endswith('.pdf'):
        raise HTTPException(
            status_code=400,
            detail="Можно загружать только PDF файлы"
        )
    
    # Формируем имя файла
    filename = f"#{tag}_#{genre}_{title.replace(' ', '_')}_{author.replace(' ', '_')}.pdf"
    
    # Проверяем, существует ли уже такая книга
    existing_book = crud.get_book_by_filename(db, filename)
    if existing_book:
        raise HTTPException(
            status_code=400,
            detail="Книга с таким именем уже существует"
        )
    
    try:
        # Сохраняем файл
        file_path = os.path.join(settings.BOOKS_DIRECTORY, filename)
        with open(file_path, "wb") as buffer:
            shutil.copyfileobj(file.file, buffer)
        
        # Создаем запись в БД
        book_create = schemas.BookCreate(
            filename=filename,
            tag=tag,
            genre=genre,
            title=title,
            author=author,
            description=description
        )
        book = crud.create_book(db, book_create)
        
        return schemas.BookResponse(
            id=book.id,
            filename=book.filename,
            title=book.title,
            author=book.author,
            tag=book.tag,
            genre=book.genre,
            description=book.description,
            created_at=book.created_at,
            average_rating=None,
            is_favorite=False,
            is_read=False,
            user_rating=None
        )
    except Exception as e:
        # Удаляем файл если произошла ошибка
        if os.path.exists(file_path):
            os.remove(file_path)
        raise HTTPException(
            status_code=500,
            detail=f"Ошибка при загрузке книги: {str(e)}"
        )

@app.put("/api/books/{book_id}", response_model=schemas.BookResponse)
def update_book(
    book_id: int,
    book_update: schemas.BookUpdate,
    db: Session = Depends(get_db),
    current_user: models.User = Depends(auth.get_current_admin_user)
):
    """Обновление информации о книге (только для админов)"""
    book = crud.update_book(db, book_id, book_update)
    if not book:
        raise HTTPException(status_code=404, detail="Книга не найдена")
    
    return schemas.BookResponse(
        id=book.id,
        filename=book.filename,
        title=book.title,
        author=book.author,
        tag=book.tag,
        genre=book.genre,
        description=book.description,
        created_at=book.created_at,
        average_rating=crud.get_book_average_rating(db, book.id),
        is_favorite=False,
        is_read=False,
        user_rating=None
    )

@app.delete("/api/books/{book_id}")
def delete_book(
    book_id: int,
    db: Session = Depends(get_db),
    current_user: models.User = Depends(auth.get_current_admin_user)
):
    """Удаление книги (только для админов)"""
    book = crud.get_book(db, book_id)
    if not book:
        raise HTTPException(status_code=404, detail="Книга не найдена")
    
    # Удаляем файл
    file_path = os.path.join(settings.BOOKS_DIRECTORY, book.filename)
    if os.path.exists(file_path):
        os.remove(file_path)
    
    # Удаляем запись из БД
    crud.delete_book(db, book_id)
    
    return {"message": "Книга успешно удалена"}

# ============ FAVORITES ENDPOINTS ============

@app.post("/api/favorites/{book_id}")
def add_to_favorites(
    book_id: int,
    db: Session = Depends(get_db),
    current_user: models.User = Depends(auth.get_current_user)
):
    """Добавить книгу в избранное"""
    if not crud.add_to_favorites(db, current_user.id, book_id):
        raise HTTPException(status_code=400, detail="Не удалось добавить в избранное")
    return {"message": "Книга добавлена в избранное"}

@app.delete("/api/favorites/{book_id}")
def remove_from_favorites(
    book_id: int,
    db: Session = Depends(get_db),
    current_user: models.User = Depends(auth.get_current_user)
):
    """Удалить книгу из избранного"""
    if not crud.remove_from_favorites(db, current_user.id, book_id):
        raise HTTPException(status_code=400, detail="Не удалось удалить из избранного")
    return {"message": "Книга удалена из избранного"}

@app.get("/api/favorites", response_model=List[schemas.BookResponse])
def get_favorites(
    db: Session = Depends(get_db),
    current_user: models.User = Depends(auth.get_current_user)
):
    """Получить список избранных книг"""
    books = crud.get_user_favorites(db, current_user.id)
    
    result = []
    for book in books:
        book_data = schemas.BookResponse(
            id=book.id,
            filename=book.filename,
            title=book.title,
            author=book.author,
            tag=book.tag,
            genre=book.genre,
            description=book.description,
            created_at=book.created_at,
            average_rating=crud.get_book_average_rating(db, book.id),
            is_favorite=True,
            is_read=crud.is_read(db, current_user.id, book.id),
            user_rating=crud.get_user_rating_for_book(db, current_user.id, book.id)
        )
        result.append(book_data)
    
    return result

# ============ READ STATUS ENDPOINTS ============

@app.post("/api/read/{book_id}")
def mark_as_read(
    book_id: int,
    db: Session = Depends(get_db),
    current_user: models.User = Depends(auth.get_current_user)
):
    """Отметить книгу как прочитанную"""
    if not crud.mark_as_read(db, current_user.id, book_id):
        raise HTTPException(status_code=400, detail="Не удалось отметить как прочитанное")
    return {"message": "Книга отмечена как прочитанная"}

@app.delete("/api/read/{book_id}")
def mark_as_unread(
    book_id: int,
    db: Session = Depends(get_db),
    current_user: models.User = Depends(auth.get_current_user)
):
    """Отметить книгу как непрочитанную"""
    if not crud.mark_as_unread(db, current_user.id, book_id):
        raise HTTPException(status_code=400, detail="Не удалось отметить как непрочитанное")
    return {"message": "Книга отмечена как непрочитанная"}

# ============ REVIEWS ENDPOINTS ============

# REVIEWS ENDPOINTS
@app.post("/api/reviews", response_model=schemas.ReviewResponse, status_code=status.HTTP_201_CREATED)
def create_review(
    review: schemas.ReviewCreate,
    db: Session = Depends(get_db),
    current_user: models.User = Depends(auth.get_current_user)
):
    # Rate limiting - 1 отзыв в минуту
    if check_action_rate_limit(current_user.id, review_attempts, 60, 1):
        raise HTTPException(
            status_code=429,
            detail="Вы можете оставлять не более 1 отзыва в минуту. Подождите немного."
        )
    
    db_review = crud.create_review(db, current_user.id, review)
    return schemas.ReviewResponse(
        id=db_review.id,
        user_id=db_review.user_id,
        book_id=db_review.book_id,
        text=db_review.text,
        created_at=db_review.created_at,
        user_name=current_user.full_name  # ✅ full_name (с подчеркиванием!)
    )

@app.get("/api/reviews/{book_id}", response_model=List[schemas.ReviewResponse])
def get_book_reviews(book_id: int, db: Session = Depends(get_db)):
    reviews = crud.get_book_reviews(db, book_id)
    return [
        schemas.ReviewResponse(
            id=review.id,
            user_id=review.user_id,
            book_id=review.book_id,
            text=review.text,
            created_at=review.created_at,
            user_name=review.user.full_name  # ✅ full_name (с подчеркиванием!)
        ) for review in reviews
    ]


# ============ RATINGS ENDPOINTS ============

@app.post("/api/ratings", response_model=schemas.RatingResponse)
def create_or_update_rating(
    rating: schemas.RatingCreate,
    db: Session = Depends(get_db),
    current_user: models.User = Depends(auth.get_current_user)
):
    # Rate limiting - 1 оценка в минуту
    if check_action_rate_limit(current_user.id, rating_attempts, 60, 1):
        raise HTTPException(
            status_code=429,
            detail="Вы можете ставить оценки не чаще 1 раза в минуту. Подождите немного."
        )
    
    db_rating = crud.create_or_update_rating(db, current_user.id, rating)
    return schemas.RatingResponse(
        id=db_rating.id,
        user_id=db_rating.user_id,
        book_id=db_rating.book_id,
        value=db_rating.value,
        created_at=db_rating.created_at
    )


# ============ FILTERS ENDPOINTS ============

@app.get("/api/filters/tags")
def get_tags(db: Session = Depends(get_db)):
    """Получить список всех тегов"""
    return {"tags": crud.get_all_tags(db)}

@app.get("/api/filters/genres")
def get_genres(db: Session = Depends(get_db)):
    """Получить список всех жанров"""
    return {"genres": crud.get_all_genres(db)}

@app.get("/api/filters/authors")
def get_authors(db: Session = Depends(get_db)):
    """Получить список всех авторов"""
    return {"authors": crud.get_all_authors(db)}

@app.get("/api/health")
def health_check():
    """Проверка здоровья API"""
    return {"status": "ok", "message": "API работает"}



==== FILE: .\backend\app\models.py ====
from sqlalchemy import Column, Integer, String, Boolean, Float, ForeignKey, DateTime, Text, Table
from sqlalchemy.orm import relationship
from datetime import datetime
from .database import Base

# Таблица для связи многие-ко-многим (избранное)
favorites = Table(
    'favorites',
    Base.metadata,
    Column('user_id', Integer, ForeignKey('users.id'), primary_key=True),
    Column('book_id', Integer, ForeignKey('books.id'), primary_key=True)
)

# Таблица для связи многие-ко-многим (прочитанные книги)
read_books = Table(
    'read_books',
    Base.metadata,
    Column('user_id', Integer, ForeignKey('users.id'), primary_key=True),
    Column('book_id', Integer, ForeignKey('books.id'), primary_key=True)
)

class User(Base):
    __tablename__ = "users"
    
    id = Column(Integer, primary_key=True, index=True)
    email = Column(String, unique=True, index=True, nullable=False)
    full_name = Column(String, nullable=False)
    hashed_password = Column(String, nullable=False)
    is_admin = Column(Boolean, default=False)
    created_at = Column(DateTime, default=datetime.utcnow)
    
    favorites = relationship("Book", secondary=favorites, back_populates="favorited_by")
    read = relationship("Book", secondary=read_books, back_populates="read_by")
    reviews = relationship("Review", back_populates="user", cascade="all, delete-orphan")
    ratings = relationship("Rating", back_populates="user", cascade="all, delete-orphan")

class Book(Base):
    __tablename__ = "books"
    
    id = Column(Integer, primary_key=True, index=True)
    filename = Column(String, unique=True, nullable=False)
    title = Column(String, nullable=False)
    author = Column(String, nullable=False)
    tag = Column(String, nullable=False)
    genre = Column(String, nullable=False)
    description = Column(Text)
    created_at = Column(DateTime, default=datetime.utcnow)
    
    favorited_by = relationship("User", secondary=favorites, back_populates="favorites")
    read_by = relationship("User", secondary=read_books, back_populates="read")
    reviews = relationship("Review", back_populates="book", cascade="all, delete-orphan")
    ratings = relationship("Rating", back_populates="book", cascade="all, delete-orphan")

class Review(Base):
    __tablename__ = "reviews"
    
    id = Column(Integer, primary_key=True, index=True)
    user_id = Column(Integer, ForeignKey("users.id"), nullable=False)
    book_id = Column(Integer, ForeignKey("books.id"), nullable=False)
    text = Column(Text, nullable=False)
    created_at = Column(DateTime, default=datetime.utcnow)
    
    user = relationship("User", back_populates="reviews")
    book = relationship("Book", back_populates="reviews")

class Rating(Base):
    __tablename__ = "ratings"
    
    id = Column(Integer, primary_key=True, index=True)
    user_id = Column(Integer, ForeignKey("users.id"), nullable=False)
    book_id = Column(Integer, ForeignKey("books.id"), nullable=False)
    value = Column(Float, nullable=False)
    created_at = Column(DateTime, default=datetime.utcnow)
    
    user = relationship("User", back_populates="ratings")
    book = relationship("Book", back_populates="ratings")



==== FILE: .\backend\app\schemas.py ====
from pydantic import BaseModel, EmailStr, validator, Field
from typing import Optional, List
from datetime import datetime
import re

class UserBase(BaseModel):
    email: EmailStr
    full_name: str


class UserCreate(UserBase):
    password: str
    
    @validator('email')
    def validate_email(cls, v):
        if not v or not v.strip():
            raise ValueError('Email не может быть пустым')
        if len(v) > 50:
            raise ValueError('Email не может превышать 50 символов')
        if not re.match(r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$', v):
            raise ValueError('Email должен содержать только латиницу')
        return v.lower()
    
    @validator('full_name')
    def validate_full_name(cls, v):
        if not v or not v.strip():
            raise ValueError('ФИО не может быть пустым')
        
        if len(v) > 50:
            raise ValueError('ФИО не может превышать 50 символов')
        
        if not re.match(r'^[А-ЯЁа-яё\s-]+$', v):
            raise ValueError('ФИО должно содержать только кириллицу')
        
        words = v.strip().split()
        
        if len(words) < 2:
            raise ValueError('Введите минимум Фамилию и Имя (например: Иванов Иван)')
        
        for word in words:
            if len(word) < 2:
                raise ValueError('Каждое слово в ФИО должно содержать минимум 2 буквы')
        
        return ' '.join(word.capitalize() for word in words)

    
    @validator('password')
    def validate_password(cls, v):
        if not v:
            raise ValueError('Пароль не может быть пустым')
        
        errors = []
        
        if len(v) < 8:
            errors.append('минимум 8 символов')
        if len(v) > 20:
            errors.append('максимум 20 символов')
        if not re.search(r'[A-Z]', v):
            errors.append('минимум одна заглавная буква (A-Z)')
        if not re.search(r'[a-z]', v):
            errors.append('минимум одна строчная буква (a-z)')
        if not re.search(r'\d', v):
            errors.append('минимум одна цифра (0-9)')
        if not re.search(r'[!@#$%_*&?]', v):
            errors.append('минимум один спецсимвол (!@#$%_*&?)')
        
        if errors:
            raise ValueError('Пароль должен содержать: ' + ', '.join(errors))
        
        return v

class User(UserBase):
    id: int
    is_admin: bool
    created_at: datetime
    
    class Config:
        from_attributes = True

class UserLogin(BaseModel):
    email: EmailStr
    password: str

class Token(BaseModel):
    access_token: str
    token_type: str

class TokenData(BaseModel):
    email: Optional[str] = None

class BookBase(BaseModel):
    title: str
    author: str
    tag: str
    genre: str
    description: Optional[str] = None

class BookCreate(BookBase):
    filename: str

class BookUpdate(BaseModel):
    title: Optional[str] = None
    author: Optional[str] = None
    tag: Optional[str] = None
    genre: Optional[str] = None
    description: Optional[str] = None

class BookResponse(BookBase):
    id: int
    filename: str
    created_at: datetime
    average_rating: Optional[float] = None
    is_favorite: bool = False
    is_read: bool = False
    user_rating: Optional[float] = None
    
    class Config:
        from_attributes = True

class ReviewBase(BaseModel):
    text: str

class ReviewCreate(ReviewBase):
    book_id: int

class ReviewResponse(ReviewBase):
    id: int
    user_id: int
    book_id: int
    created_at: datetime
    user_name: str
    
    class Config:
        from_attributes = True

class RatingBase(BaseModel):
    value: float = Field(..., ge=1, le=5)

class RatingCreate(RatingBase):
    book_id: int

class RatingResponse(RatingBase):
    id: int
    user_id: int
    book_id: int
    created_at: datetime
    
    class Config:
        from_attributes = True



==== FILE: .\backend\app\utils.py ====
import os
import re
from typing import Tuple, List
from .config import settings

def parse_book_filename(filename: str) -> Tuple[str, str, str, str]:
    """
    Парсит имя файла в формате #ТЭГ_#ЖАНР_Название_книги,_Имя_Автора.pdf
    """
    # Убираем .pdf
    name_without_ext = filename.rsplit('.', 1)[0]
    
    # Разбиваем по #
    parts = name_without_ext.split('#')
    
    if len(parts) < 3:
        return ("Unknown", "Unknown", filename, "Unknown")
    
    # Тег
    tag = parts[1].rstrip('_').strip()
    
    # Остальное
    remaining = parts[2]
    
    # Разделяем по запятой (название, автор)
    if ',' in remaining:
        before_comma, after_comma = remaining.split(',', 1)
        
        # Жанр и название до запятой
        remaining_parts = before_comma.split('_')
        genre = remaining_parts[0].strip()
        title = ' '.join(remaining_parts[1:]).strip() if len(remaining_parts) > 1 else "Unknown"
        
        # Автор после запятой
        author = after_comma.lstrip('_').replace('_', ' ').strip()
    else:
        # Старый формат без запятой
        remaining_parts = remaining.split('_')
        genre = remaining_parts[0].strip() if len(remaining_parts) > 0 else "Unknown"
        author = remaining_parts[-1].strip() if len(remaining_parts) > 1 else "Unknown"
        title_parts = remaining_parts[1:-1]
        title = ' '.join(title_parts).strip() if title_parts else "Unknown"
    
    return (tag, genre, title, author)


def get_books_from_directory() -> List[dict]:
    """
    Сканирует директорию books и возвращает список книг с их метаданными
    """
    books = []
    books_dir = settings.BOOKS_DIRECTORY
    
    if not os.path.exists(books_dir):
        os.makedirs(books_dir)
        return books
    
    for filename in os.listdir(books_dir):
        if filename.endswith('.pdf'):
            tag, genre, title, author = parse_book_filename(filename)
            books.append({
                'filename': filename,
                'tag': tag,
                'genre': genre,
                'title': title,
                'author': author
            })
    
    return books



==== FILE: .\backend\app\__init__.py ====
"""
Online Library API Application
Backend для онлайн-библиотеки с FastAPI
"""

__version__ = "1.0.0"
__author__ = "Online Library Team"

from .main import app
from .database import Base, engine, get_db
from . import models, schemas, crud, auth

__all__ = [
    "app",
    "Base",
    "engine",
    "get_db",
    "models",
    "schemas",
    "crud",
    "auth",
]



==== FILE: .\books\#1_#1_1_1.pdf ====
[ОШИБКА ЧТЕНИЯ: 'utf-8' codec can't decode byte 0xff in position 339: invalid start byte]


==== FILE: .\books\#q_#q_q_q.pdf ====
[ОШИБКА ЧТЕНИЯ: 'utf-8' codec can't decode byte 0xb7 in position 10: invalid start byte]


==== FILE: .\books\#Образование_#Учебник_Введение_в_программирование,_Иван_Иванов.pdf ====
[ОШИБКА ЧТЕНИЯ: 'utf-8' codec can't decode byte 0xff in position 1126: invalid start byte]


==== FILE: .\books\#Фантастика_#Роман_Госмическая_одиссея,_Петр_Петров.pdf (1).pdf ====
[ОШИБКА ЧТЕНИЯ: 'utf-8' codec can't decode byte 0xff in position 339: invalid start byte]


==== FILE: .\books\#Фантастика_#Роман_Гросмическая_одиссея,_Петр_Петров.pdf (1).pdf ====
[ОШИБКА ЧТЕНИЯ: 'utf-8' codec can't decode byte 0xff in position 339: invalid start byte]


==== FILE: .\books\#Фантастика_#Роман_Космическая_одиссея,_Петр_Петров.pdf ====
[ОШИБКА ЧТЕНИЯ: 'utf-8' codec can't decode byte 0xff in position 339: invalid start byte]


==== FILE: .\database\init.sql ====
-- Инициализация базы данных для Online Library

-- Создание пользователя и базы данных
CREATE DATABASE library_db;
CREATE USER library_user WITH PASSWORD 'library_password';
GRANT ALL PRIVILEGES ON DATABASE library_db TO library_user;

-- Подключение к базе данных library_db
\c library_db;

-- Предоставление прав пользователю
GRANT ALL PRIVILEGES ON SCHEMA public TO library_user;
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO library_user;
GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO library_user;

-- Установка прав по умолчанию для будущих таблиц
ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL PRIVILEGES ON TABLES TO library_user;
ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL PRIVILEGES ON SEQUENCES TO library_user;

-- Создание расширений
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
CREATE EXTENSION IF NOT EXISTS "pg_trgm"; -- Для полнотекстового поиска

-- Создание индексов для оптимизации поиска (будут созданы после создания таблиц через SQLAlchemy)
-- Эти команды выполнятся автоматически при первом запуске приложения

-- Функция для обновления timestamp
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

-- Комментарий: Таблицы будут созданы автоматически через SQLAlchemy при первом запуске приложения
-- models.Base.metadata.create_all(bind=engine) в main.py

-- После создания таблиц SQLAlchemy, можно добавить дополнительные индексы для оптимизации:
-- CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_books_title_trgm ON books USING gin(title gin_trgm_ops);
-- CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_books_author_trgm ON books USING gin(author gin_trgm_ops);
-- CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_books_tag ON books(tag);
-- CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_books_genre ON books(genre);
-- CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_books_created_at ON books(created_at DESC);
-- CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_reviews_book_id ON reviews(book_id);
-- CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_reviews_user_id ON reviews(user_id);
-- CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_ratings_book_id ON ratings(book_id);
-- CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_ratings_user_id ON ratings(user_id);
-- CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_favorites_user_book ON favorites(user_id, book_id);
-- CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_read_books_user_book ON read_books(user_id, book_id);

-- Создание первого админ-пользователя (опционально)
-- Пароль будет хешироваться через API при регистрации
-- Для создания первого админа используйте API endpoint /api/auth/register
-- Затем вручную через psql установите is_admin = true:
-- UPDATE users SET is_admin = true WHERE email = 'admin@library.com';

COMMENT ON DATABASE library_db IS 'База данных онлайн-библиотеки';



==== FILE: .\frontend\Dockerfile ====
FROM node:18-alpine as build

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .
RUN npm run build

FROM nginx:alpine

COPY --from=build /app/build /usr/share/nginx/html
COPY nginx.conf /etc/nginx/conf.d/default.conf

EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]



==== FILE: .\frontend\nginx.conf ====
server {
    listen 80;
    server_name localhost;
    client_max_body_size 100M;

    location / {
        root /usr/share/nginx/html;
        index index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    location /api {
        proxy_pass http://backend:8000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        client_max_body_size 100M;
    }
}



==== FILE: .\frontend\public\index.html ====
<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#00e965" />
    <meta name="description" content="Онлайн-библиотека - читайте книги онлайн или скачивайте бесплатно" />
    <title>Библиотека Пионеров</title>
    <link rel="icon" type="image/png" href="/favicon.png">
</head>

<body>
    <noscript>Вам необходимо включить JavaScript для работы этого приложения.</noscript>
    <div id="root"></div>
</body>

</html>


==== FILE: .\frontend\src\App.js ====
import React from 'react';
import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';
import { AuthProvider } from './contexts/AuthContext';
import { ThemeProvider } from './contexts/ThemeContext';
import Navigation from './components/Navigation';
import LandingPage from './pages/LandingPage';
import BooksPage from './pages/BooksPage';
import BookDetailPage from './pages/BookDetailPage';
import FavoritesPage from './pages/FavoritesPage';
import AuthPage from './pages/AuthPage';
import AdminPage from './pages/AdminPage';
import SectionsPage from './pages/SectionsPage';
import MethodClubPage from './pages/sections/MethodClubPage';
import PioneersWorkPage from './pages/sections/PioneersWorkPage';
import SchoolLeadersPage from './pages/sections/SchoolLeadersPage';
import VolunteersPage from './pages/sections/VolunteersPage';

function App() {
    return (
        <ThemeProvider>
            <AuthProvider>
                <Router>
                    <div className="app">
                        <Navigation />
                        <main className="main-content">
                            <Routes>
                                <Route path="/" element={<LandingPage />} />
                                <Route path="/books" element={<BooksPage />} />
                                <Route path="/books/:id" element={<BookDetailPage />} />
                                <Route path="/favorites" element={<FavoritesPage />} />
                                <Route path="/auth" element={<AuthPage />} />
                                <Route path="/admin" element={<AdminPage />} />

                                {/* Разделы - теперь один общий SectionsPage */}
                                <Route path="/sections/*" element={
                                    <SectionsPage>
                                        <Routes>
                                            <Route path="methodclub" element={<MethodClubPage />} />
                                            <Route path="pioneers" element={<PioneersWorkPage />} />
                                            <Route path="leaders" element={<SchoolLeadersPage />} />
                                            <Route path="volunteers" element={<VolunteersPage />} />
                                        </Routes>
                                    </SectionsPage>
                                } />

                            </Routes>
                        </main>
                    </div>
                </Router>
            </AuthProvider>
        </ThemeProvider>
    );
}

export default App;



==== FILE: .\frontend\src\index.css ====
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --primary-green: #00e965;
    --primary-blue: #006edc;
    --white: #ffffff;
    --light-green: #66ffaa;
    --dark-gray: #333333;
    --light-blue: #66b3ff;
    --transition-speed: 0.2s;
}

[data-theme="light"] {
    --bg-primary: #ffffff;
    --bg-secondary: #f8f9fa;
    --text-primary: #333333;
    --text-secondary: #666666;
    --border-color: #e0e0e0;
    --card-bg: #ffffff;
    --hover-bg: #f5f5f5;
}

[data-theme="dark"] {
    --bg-primary: #1a1a1a;
    --bg-secondary: #2a2a2a;
    --text-primary: #ffffff;
    --text-secondary: #cccccc;
    --border-color: #404040;
    --card-bg: #2a2a2a;
    --hover-bg: #3a3a3a;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    background-color: var(--bg-primary);
    color: var(--text-primary);
    transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease;
    line-height: 1.6;
}

code {
    font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;
}

a {
    text-decoration: none;
    color: inherit;
}

button {
    font-family: inherit;
    cursor: pointer;
    border: none;
    outline: none;
}

input,
textarea,
select {
    font-family: inherit;
    outline: none;
}

.loading {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 400px;
    font-size: 1.2rem;
    color: var(--text-secondary);
}

.error {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 400px;
    font-size: 1.2rem;
    color: #ff4444;
}

.empty-state {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 400px;
    font-size: 1.2rem;
    color: var(--text-secondary);
}


==== FILE: .\frontend\src\index.js ====
import React from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import App from './App';

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
    <React.StrictMode>
        <App />
    </React.StrictMode>
);



==== FILE: .\frontend\src\components\BookCard.js ====
import React from 'react';
import { Link } from 'react-router-dom';
import '../styles/BookCard.css';

const BookCard = ({ book }) => {
    const renderStars = (rating) => {
        return [...Array(5)].map((_, i) => (
            <span key={i}>{i < Math.floor(rating) ? '★' : '☆'}</span>
        ));
    };

    return (
        <Link to={`/books/${book.id}`} className="book-card">
            {/* Cover */}
            <div className="book-cover">
                {book.cover_image ? (
                    <img
                        src={book.cover_image}
                        alt={book.title}
                        className="book-cover-img"
                    />
                ) : (
                    <div className="book-cover-icon">📚</div>
                )}
            </div>

            {/* Body */}
            <div className="book-body">
                {/* Title */}
                <h3 className="book-title">{book.title}</h3>

                {/* Author */}
                {book.author && (
                    <div className="book-author">Автор: {book.author}</div>
                )}

                {/* Tags - жанр и категория */}
                {(book.genre || book.tag) && (
                    <div className="book-tags">
                        {book.genre && (
                            <span className="book-tag genre">{book.genre}</span>
                        )}
                        {book.tag && (
                            <span className="book-tag category">{book.tag}</span>
                        )}
                    </div>
                )}

                {/* Description */}
                {book.description && (
                    <p className="book-description">{book.description}</p>
                )}

                {/* Rating */}
                {book.rating && (
                    <div className="book-rating">
                        <div className="rating-stars">
                            {renderStars(book.rating)}
                        </div>
                        <span className="rating-value">{book.rating.toFixed(1)}</span>
                        {book.rating_count > 0 && (
                            <span className="rating-count">({book.rating_count})</span>
                        )}
                    </div>
                )}

                {/* Footer Info */}
                {(book.year || book.pages) && (
                    <div className="book-footer">
                        <div className="book-info">
                            {book.year && (
                                <span className="book-year">{book.year}</span>
                            )}
                            {book.pages && (
                                <span className="book-pages">{book.pages} стр.</span>
                            )}
                        </div>
                    </div>
                )}
            </div>
        </Link>
    );
};

export default BookCard;



==== FILE: .\frontend\src\components\Iridescence.js ====
import { Renderer, Program, Mesh, Color, Triangle } from 'ogl';
import { useEffect, useRef } from 'react';
import '../styles/Iridescence.css';

const vertexShader = `
attribute vec2 uv;
attribute vec2 position;

varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = vec4(position, 0, 1);
}
`;

const fragmentShader = `
precision highp float;

uniform float uTime;
uniform vec3 uColor;
uniform vec3 uResolution;
uniform vec2 uMouse;
uniform float uAmplitude;
uniform float uSpeed;

varying vec2 vUv;

void main() {
  float mr = min(uResolution.x, uResolution.y);
  vec2 uv = (vUv.xy * 2.0 - 1.0) * uResolution.xy / mr;

  uv += (uMouse - vec2(0.5)) * uAmplitude;

  float d = -uTime * 0.5 * uSpeed;
  float a = 0.0;
  for (float i = 0.0; i < 8.0; ++i) {
    a += cos(i - d - a * uv.x);
    d += sin(uv.y * i + a);
  }
  d += uTime * 0.5 * uSpeed;
  vec3 col = vec3(cos(uv * vec2(d, a)) * 0.6 + 0.4, cos(a + d) * 0.5 + 0.5);
  col = cos(col * cos(vec3(d, a, 2.5)) * 0.5 + 0.5) * uColor;
  gl_FragColor = vec4(col, 1.0);
}
`;

export default function Iridescence({ color = [1, 1, 1], speed = 1.0, amplitude = 0.1, mouseReact = true, ...rest }) {
    const ctnDom = useRef(null);
    const mousePos = useRef({ x: 0.5, y: 0.5 });

    useEffect(() => {
        if (!ctnDom.current) return;
        const ctn = ctnDom.current;

        let renderer, gl, animateId;

        try {
            renderer = new Renderer({ alpha: false });
            gl = renderer.gl;
            gl.clearColor(color[0], color[1], color[2], 1);

            let program;

            function resize() {
                const scale = 1;
                renderer.setSize(ctn.offsetWidth * scale, ctn.offsetHeight * scale);
                if (program) {
                    program.uniforms.uResolution.value = new Color(
                        gl.canvas.width,
                        gl.canvas.height,
                        gl.canvas.width / gl.canvas.height
                    );
                }
            }
            window.addEventListener('resize', resize, false);
            resize();

            const geometry = new Triangle(gl);
            program = new Program(gl, {
                vertex: vertexShader,
                fragment: fragmentShader,
                uniforms: {
                    uTime: { value: 0 },
                    uColor: { value: new Color(...color) },
                    uResolution: {
                        value: new Color(gl.canvas.width, gl.canvas.height, gl.canvas.width / gl.canvas.height)
                    },
                    uMouse: { value: new Float32Array([mousePos.current.x, mousePos.current.y]) },
                    uAmplitude: { value: amplitude },
                    uSpeed: { value: speed }
                }
            });

            const mesh = new Mesh(gl, { geometry, program });

            function update(t) {
                animateId = requestAnimationFrame(update);
                program.uniforms.uTime.value = t * 0.001;
                renderer.render({ scene: mesh });
            }

            ctn.appendChild(gl.canvas);
            animateId = requestAnimationFrame(update);

            function handleMouseMove(e) {
                const rect = ctn.getBoundingClientRect();
                const x = (e.clientX - rect.left) / rect.width;
                const y = 1.0 - (e.clientY - rect.top) / rect.height;
                mousePos.current = { x, y };
                program.uniforms.uMouse.value[0] = x;
                program.uniforms.uMouse.value[1] = y;
            }
            if (mouseReact) {
                ctn.addEventListener('mousemove', handleMouseMove);
            }

            return () => {
                cancelAnimationFrame(animateId);
                window.removeEventListener('resize', resize);
                if (mouseReact) {
                    ctn.removeEventListener('mousemove', handleMouseMove);
                }
                if (ctn.contains(gl.canvas)) {
                    ctn.removeChild(gl.canvas);
                }
                gl.getExtension('WEBGL_lose_context')?.loseContext();
            };
        } catch (error) {
            console.error('WebGL initialization failed:', error);
            return () => { };
        }
    }, [color, speed, amplitude, mouseReact]);

    return <div ref={ctnDom} className="iridescence-container" {...rest} />;
}



==== FILE: .\frontend\src\components\Navigation.js ====
import React, { useState } from 'react';
import { Link, useLocation } from 'react-router-dom';
import { useAuth } from '../contexts/AuthContext';
import { useTheme } from '../contexts/ThemeContext';
import '../styles/Navigation.css';

const Navigation = () => {
    const { isAuthenticated, isAdmin, logout, user } = useAuth();
    const { theme, toggleTheme } = useTheme();
    const location = useLocation();
    const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

    const isActive = (path) => location.pathname === path;

    const handleLogout = () => {
        logout();
        setMobileMenuOpen(false);
    };

    const closeMobileMenu = () => setMobileMenuOpen(false);

    return (
        <nav className="navigation">
            <div className="nav-container">
                {/* Logo */}
                <Link to="/" className="nav-logo">
                    <div className="logo-icon">📚</div>
                    <span className="logo-text">Библиотека Пионеров</span>
                </Link>

                {/* Desktop Nav Links */}
                <ul className="nav-links">
                    <li>
                        <Link
                            to="/"
                            className={`nav-link ${isActive('/') ? 'active' : ''}`}
                        >
                            Главная
                        </Link>
                    </li>
                    <li>
                        <Link
                            to="/books"
                            className={`nav-link ${isActive('/books') ? 'active' : ''}`}
                        >
                            Книги
                        </Link>
                    </li>
                    {isAuthenticated && (
                        <>
                            <li>
                                <Link
                                    to="/sections/methodclub"
                                    className={`nav-link ${isActive('/sections') ? 'active' : ''}`}
                                >
                                    Разделы
                                </Link>
                            </li>
                            <li>
                                <Link
                                    to="/favorites"
                                    className={`nav-link ${isActive('/favorites') ? 'active' : ''}`}
                                >
                                    Избранное
                                </Link>
                            </li>
                        </>
                    )}
                    {isAdmin && (
                        <li>
                            <Link
                                to="/admin"
                                className={`nav-link ${isActive('/admin') ? 'active' : ''}`}
                            >
                                Админ
                            </Link>
                        </li>
                    )}
                </ul>


                {/* Nav Actions */}
                <div className="nav-actions">
                    {/* Theme Toggle */}
                    <button
                        className="theme-toggle"
                        onClick={toggleTheme}
                        aria-label="Toggle theme"
                    >
                        {theme === 'light' ? (
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
                            </svg>
                        ) : (
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                <circle cx="12" cy="12" r="5" />
                                <line x1="12" y1="1" x2="12" y2="3" />
                                <line x1="12" y1="21" x2="12" y2="23" />
                                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
                                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
                                <line x1="1" y1="12" x2="3" y2="12" />
                                <line x1="21" y1="12" x2="23" y2="12" />
                                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
                                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
                            </svg>
                        )}
                    </button>

                    {/* User Info or Login */}
                    {isAuthenticated ? (
                        <>
                            <div className="user-info">
                                <div className="user-avatar">
                                    {user?.full_name?.charAt(0).toUpperCase() || 'U'}
                                </div>
                                <span className="user-name">{user?.full_name}</span>
                            </div>
                            <button className="btn-logout" onClick={handleLogout}>
                                Выйти
                            </button>
                        </>
                    ) : (
                        <Link to="/auth" className="btn-login">
                            Войти
                        </Link>
                    )}

                    {/* Mobile Menu Toggle */}
                    <button
                        className={`mobile-menu-toggle ${mobileMenuOpen ? 'active' : ''}`}
                        onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
                        aria-label="Toggle menu"
                    >
                        <span className="mobile-menu-bar"></span>
                        <span className="mobile-menu-bar"></span>
                        <span className="mobile-menu-bar"></span>
                    </button>
                </div>
            </div>

            {/* Mobile Menu */}
            <div className={`mobile-menu-overlay ${mobileMenuOpen ? 'active' : ''}`}>
                <div className="mobile-menu-content">
                    <Link
                        to="/"
                        className={`mobile-nav-link ${isActive('/') ? 'active' : ''}`}
                        onClick={closeMobileMenu}
                    >
                        Главная
                    </Link>
                    <Link
                        to="/books"
                        className={`mobile-nav-link ${isActive('/books') ? 'active' : ''}`}
                        onClick={closeMobileMenu}
                    >
                        Книги
                    </Link>
                    {isAuthenticated && (
                        <Link
                            to="/favorites"
                            className={`mobile-nav-link ${isActive('/favorites') ? 'active' : ''}`}
                            onClick={closeMobileMenu}
                        >
                            Избранное
                        </Link>
                    )}
                    {isAdmin && (
                        <Link
                            to="/admin"
                            className={`mobile-nav-link ${isActive('/admin') ? 'active' : ''}`}
                            onClick={closeMobileMenu}
                        >
                            Админ
                        </Link>
                    )}

                    <div className="mobile-divider"></div>

                    <div className="mobile-actions">
                        <button className="mobile-theme-toggle" onClick={toggleTheme}>
                            {theme === 'light' ? '🌙 Темная тема' : '☀️ Светлая тема'}
                        </button>

                        {isAuthenticated ? (
                            <button className="btn-logout" onClick={handleLogout} style={{ width: '100%' }}>
                                Выйти
                            </button>
                        ) : (
                            <Link to="/auth" className="btn-login" onClick={closeMobileMenu} style={{ width: '100%' }}>
                                Войти
                            </Link>
                        )}
                    </div>
                </div>
            </div>
        </nav>
    );
};

export default Navigation;



==== FILE: .\frontend\src\components\SearchFilters.js ====
import React, { useState, useEffect, useRef } from 'react';
import { createPortal } from 'react-dom';
import { filtersAPI } from '../services/api';
import '../styles/SearchFilters.css';

const CustomSelect = ({ value, onChange, options, placeholder }) => {
    const [isOpen, setIsOpen] = useState(false);
    const [selectedLabel, setSelectedLabel] = useState(placeholder);
    const [dropdownStyle, setDropdownStyle] = useState({});
    const buttonRef = useRef(null);
    const dropdownRef = useRef(null);

    useEffect(() => {
        if (value === '') {
            setSelectedLabel(placeholder);
        } else {
            const selected = options.find(opt => opt.value === value);
            if (selected) setSelectedLabel(selected.label);
        }
    }, [value, options, placeholder]);

    // Обновляем позицию dropdown при открытии
    useEffect(() => {
        if (isOpen && buttonRef.current) {
            const rect = buttonRef.current.getBoundingClientRect();
            setDropdownStyle({
                position: 'fixed',
                top: `${rect.bottom + 8}px`,
                left: `${rect.left}px`,
                width: `${rect.width}px`,
                zIndex: 9999
            });
        }
    }, [isOpen]);

    // Закрытие при клике вне
    useEffect(() => {
        const handleClickOutside = (event) => {
            if (
                buttonRef.current && !buttonRef.current.contains(event.target) &&
                dropdownRef.current && !dropdownRef.current.contains(event.target)
            ) {
                setIsOpen(false);
            }
        };

        document.addEventListener('mousedown', handleClickOutside);
        return () => document.removeEventListener('mousedown', handleClickOutside);
    }, []);

    // Обновление позиции при скролле/resize
    useEffect(() => {
        if (!isOpen) return;

        const updatePosition = () => {
            if (buttonRef.current) {
                const rect = buttonRef.current.getBoundingClientRect();
                setDropdownStyle({
                    position: 'fixed',
                    top: `${rect.bottom + 8}px`,
                    left: `${rect.left}px`,
                    width: `${rect.width}px`,
                    zIndex: 9999
                });
            }
        };

        window.addEventListener('scroll', updatePosition, true);
        window.addEventListener('resize', updatePosition);

        return () => {
            window.removeEventListener('scroll', updatePosition, true);
            window.removeEventListener('resize', updatePosition);
        };
    }, [isOpen]);

    const handleSelect = (optionValue) => {
        onChange(optionValue);
        setIsOpen(false);
    };

    const dropdownContent = isOpen ? (
        <div
            ref={dropdownRef}
            className="custom-select-dropdown"
            style={dropdownStyle}
        >
            <div className="custom-select-dropdown-inner">
                {options.map((option, index) => (
                    <div
                        key={index}
                        className={`custom-select-option ${option.value === value ? 'selected' : ''}`}
                        onClick={() => handleSelect(option.value)}
                    >
                        {option.value === value && <span className="check-mark"></span>}
                        <span className="option-text">{option.label}</span>
                    </div>
                ))}
            </div>
        </div>
    ) : null;

    return (
        <>
            <div className="custom-select-wrapper">
                <button
                    ref={buttonRef}
                    className={`custom-select-button ${isOpen ? 'active' : ''}`}
                    onClick={() => setIsOpen(!isOpen)}
                    type="button"
                >
                    <span className="custom-select-value">{selectedLabel}</span>
                    <svg
                        className="custom-select-arrow"
                        width="20"
                        height="20"
                        viewBox="0 0 20 20"
                        fill="none"
                    >
                        <path
                            d="M5 8L10 13L15 8"
                            stroke="currentColor"
                            strokeWidth="2"
                            strokeLinecap="round"
                            strokeLinejoin="round"
                        />
                    </svg>
                </button>
            </div>
            {dropdownContent && createPortal(dropdownContent, document.body)}
        </>
    );
};

const SearchFilters = ({ onFilterChange }) => {
    const [search, setSearch] = useState('');
    const [selectedTag, setSelectedTag] = useState('');
    const [selectedGenre, setSelectedGenre] = useState('');
    const [selectedAuthor, setSelectedAuthor] = useState('');

    const [tags, setTags] = useState([]);
    const [genres, setGenres] = useState([]);
    const [authors, setAuthors] = useState([]);

    useEffect(() => {
        loadFilters();
    }, []);

    useEffect(() => {
        const filters = {
            search: search || undefined,
            tag: selectedTag || undefined,
            genre: selectedGenre || undefined,
            author: selectedAuthor || undefined,
        };
        onFilterChange(filters);
    }, [search, selectedTag, selectedGenre, selectedAuthor]);

    const loadFilters = async () => {
        try {
            const [tagsRes, genresRes, authorsRes] = await Promise.all([
                filtersAPI.getTags(),
                filtersAPI.getGenres(),
                filtersAPI.getAuthors(),
            ]);
            setTags(tagsRes.data.tags);
            setGenres(genresRes.data.genres);
            setAuthors(authorsRes.data.authors);
        } catch (error) {
            console.error('Error loading filters:', error);
        }
    };

    const handleReset = () => {
        setSearch('');
        setSelectedTag('');
        setSelectedGenre('');
        setSelectedAuthor('');
    };

    const tagOptions = [
        { value: '', label: 'Все теги' },
        ...tags.map(tag => ({ value: tag, label: tag }))
    ];

    const genreOptions = [
        { value: '', label: 'Все жанры' },
        ...genres.map(genre => ({ value: genre, label: genre }))
    ];

    const authorOptions = [
        { value: '', label: 'Все авторы' },
        ...authors.map(author => ({ value: author, label: author }))
    ];

    return (
        <div className="search-filters">
            <div className="search-bar">
                <input
                    type="text"
                    className="search-input"
                    placeholder="Поиск книг по названию, автору, описанию..."
                    value={search}
                    onChange={(e) => setSearch(e.target.value)}
                />
            </div>

            <div className="filters-row">
                <CustomSelect
                    value={selectedTag}
                    onChange={setSelectedTag}
                    options={tagOptions}
                    placeholder="Все теги"
                />

                <CustomSelect
                    value={selectedGenre}
                    onChange={setSelectedGenre}
                    options={genreOptions}
                    placeholder="Все жанры"
                />

                <CustomSelect
                    value={selectedAuthor}
                    onChange={setSelectedAuthor}
                    options={authorOptions}
                    placeholder="Все авторы"
                />

                <button className="btn-reset" onClick={handleReset}>
                    Сбросить
                </button>
            </div>
        </div>
    );
};

export default SearchFilters;



==== FILE: .\frontend\src\contexts\AuthContext.js ====
import React, { createContext, useContext, useState, useEffect } from 'react';
import api from '../services/api';

const AuthContext = createContext();

export const useAuth = () => {
    const context = useContext(AuthContext);
    if (!context) {
        throw new Error('useAuth must be used within AuthProvider');
    }
    return context;
};

export const AuthProvider = ({ children }) => {
    const [user, setUser] = useState(null);
    const [token, setToken] = useState(() => localStorage.getItem('token'));
    const [loading, setLoading] = useState(true);

    useEffect(() => {
        if (token) {
            api.defaults.headers.common['Authorization'] = `Bearer ${token}`;
            fetchCurrentUser();
        } else {
            setLoading(false);
        }
    }, [token]);

    const fetchCurrentUser = async () => {
        try {
            const response = await api.get('/auth/me');
            setUser(response.data);
        } catch (error) {
            console.error('Failed to fetch user:', error);
            logout();
        } finally {
            setLoading(false);
        }
    };

    const login = async (email, password) => {
        const response = await api.post('/auth/login', { email, password });
        const { access_token } = response.data;

        localStorage.setItem('token', access_token);
        setToken(access_token);
        api.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;

        await fetchCurrentUser();
        return response.data;
    };

    const register = async (userData) => {
        const response = await api.post('/auth/register', userData);
        return response.data;
    };

    const logout = () => {
        localStorage.removeItem('token');
        setToken(null);
        setUser(null);
        delete api.defaults.headers.common['Authorization'];
    };

    return (
        <AuthContext.Provider value={{
            user,
            token,
            loading,
            login,
            register,
            logout,
            isAuthenticated: !!user,
            isAdmin: user?.is_admin || false
        }}>
            {children}
        </AuthContext.Provider>
    );
};



==== FILE: .\frontend\src\contexts\ThemeContext.js ====
import React, { createContext, useContext, useState, useEffect } from 'react';

const ThemeContext = createContext();

export const useTheme = () => {
    const context = useContext(ThemeContext);
    if (!context) {
        throw new Error('useTheme must be used within ThemeProvider');
    }
    return context;
};

export const ThemeProvider = ({ children }) => {
    const [theme, setTheme] = useState(() => {
        const saved = localStorage.getItem('theme');
        return saved || 'light';
    });

    useEffect(() => {
        document.documentElement.setAttribute('data-theme', theme);
        localStorage.setItem('theme', theme);
    }, [theme]);

    const toggleTheme = () => {
        setTheme(prev => prev === 'light' ? 'dark' : 'light');
    };

    return (
        <ThemeContext.Provider value={{ theme, toggleTheme }}>
            {children}
        </ThemeContext.Provider>
    );
};



==== FILE: .\frontend\src\pages\AdminPage.js ====
import React, { useState, useEffect, useRef } from 'react';
import { useNavigate } from 'react-router-dom';
import { useAuth } from '../contexts/AuthContext';
import { booksAPI } from '../services/api';
import '../styles/AdminPage.css';

const AdminPage = () => {
    const { isAdmin } = useAuth();
    const navigate = useNavigate();

    // Form state
    const [formData, setFormData] = useState({
        tag: '',
        genre: '',
        title: '',
        author: '',
        description: ''
    });
    const [file, setFile] = useState(null);
    const [fileName, setFileName] = useState('');

    // UI state
    const [loading, setLoading] = useState(false);
    const [message, setMessage] = useState({ text: '', type: '' });

    // Refs для анимаций
    const pageRef = useRef(null);
    const titleRef = useRef(null);
    const uploadCardRef = useRef(null);
    const syncCardRef = useRef(null);

    // Redirect если не админ
    useEffect(() => {
        if (!isAdmin) {
            navigate('/');
        }
    }, [isAdmin, navigate]);

    // Intersection Observer для плавных анимаций
    useEffect(() => {
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        // Наблюдаем за элементами
        [titleRef, uploadCardRef, syncCardRef].forEach(ref => {
            if (ref.current) {
                observer.observe(ref.current);
            }
        });

        return () => observer.disconnect();
    }, []);

    // Обработчики формы
    const handleInputChange = (e) => {
        const { name, value } = e.target;
        setFormData(prev => ({
            ...prev,
            [name]: value
        }));
    };

    const handleFileChange = (e) => {
        const selectedFile = e.target.files[0];
        if (selectedFile) {
            setFile(selectedFile);
            setFileName(selectedFile.name);
        }
    };

    const resetForm = () => {
        setFormData({
            tag: '',
            genre: '',
            title: '',
            author: '',
            description: ''
        });
        setFile(null);
        setFileName('');

        // Очистка file input
        const fileInput = document.getElementById('file');
        if (fileInput) fileInput.value = '';
    };


    const showMessage = (text, type) => {
        setMessage({ text, type });
        setTimeout(() => {
            setMessage({ text: '', type: '' });
        }, 5000);
    };

    // Добавление книги
    // Добавление книги
    const handleSubmit = async (e) => {
        e.preventDefault();

        // Проверка файла
        if (!file) {
            showMessage('Пожалуйста, выберите PDF файл', 'error');
            return;
        }

        // Проверка обязательных полей
        if (!formData.tag.trim() || !formData.genre.trim() ||
            !formData.title.trim() || !formData.author.trim() ||
            !formData.description.trim()) {
            showMessage('Заполните все обязательные поля', 'error');
            return;
        }

        setLoading(true);

        try {
            const data = new FormData();
            data.append('file', file);
            data.append('tag', formData.tag.trim());
            data.append('genre', formData.genre.trim());
            data.append('title', formData.title.trim());
            data.append('author', formData.author.trim());
            data.append('description', formData.description.trim());

            // Отладочный лог
            console.log('Отправляемые данные:');
            for (let [key, value] of data.entries()) {
                console.log(key, ':', value);
            }

            const response = await booksAPI.create(data);
            console.log('Ответ сервера:', response);

            showMessage('Книга успешно добавлена!', 'success');
            resetForm();

            // Очистка file input
            const fileInput = document.getElementById('file');
            if (fileInput) fileInput.value = '';

        } catch (error) {
            console.error('Полная ошибка:', error);
            console.error('Ответ сервера:', error.response);

            let errorMsg = 'Ошибка при добавлении книги';

            if (error.response) {
                // Сервер ответил с ошибкой
                errorMsg = error.response.data?.detail ||
                    error.response.data?.message ||
                    `Ошибка ${error.response.status}`;

                // Если есть детальная информация об ошибках полей
                if (error.response.data?.errors) {
                    console.error('Ошибки полей:', error.response.data.errors);
                }
            } else if (error.request) {
                // Запрос был отправлен, но ответа нет
                errorMsg = 'Нет ответа от сервера';
            } else {
                // Ошибка при настройке запроса
                errorMsg = error.message;
            }

            showMessage(errorMsg, 'error');
        } finally {
            setLoading(false);
        }
    };


    // Синхронизация
    const handleSync = async () => {
        setLoading(true);

        try {
            const response = await booksAPI.sync();
            showMessage(response.data.message || 'Синхронизация завершена', 'success');
        } catch (error) {
            const errorMsg = error.response?.data?.detail || 'Ошибка при синхронизации';
            showMessage(errorMsg, 'error');
        } finally {
            setLoading(false);
        }
    };

    if (!isAdmin) {
        return null;
    }

    return (
        <div className="admin-page" ref={pageRef}>
            <div className="admin-container">

                {/* Заголовок */}
                <div className="admin-header" ref={titleRef}>
                    <h1 className="admin-title">Панель администратора</h1>
                    <p className="admin-subtitle">Управление библиотекой книг</p>
                </div>

                {/* Сообщения */}
                {message.text && (
                    <div className={`admin-message admin-message-${message.type}`}>
                        <span className="message-icon">
                            {message.type === 'success' ? '' : '⚠'}
                        </span>
                        <span className="message-text">{message.text}</span>
                    </div>
                )}

                {/* Секция добавления книги */}
                <div className="admin-card" ref={uploadCardRef}>
                    <div className="card-header">
                        <h2 className="card-title">Добавить новую книгу</h2>
                        <p className="card-description">Заполните все поля и загрузите PDF файл</p>
                    </div>

                    <form className="admin-form" onSubmit={handleSubmit}>
                        {/* Тег и Жанр */}
                        <div className="form-grid">
                            <div className="form-field">
                                <label htmlFor="tag" className="form-label">
                                    Тег <span className="required">*</span>
                                </label>
                                <input
                                    type="text"
                                    id="tag"
                                    name="tag"
                                    className="form-input"
                                    value={formData.tag}
                                    onChange={handleInputChange}
                                    placeholder="Например: Художественная литература"
                                    required
                                />
                            </div>

                            <div className="form-field">
                                <label htmlFor="genre" className="form-label">
                                    Жанр <span className="required">*</span>
                                </label>
                                <input
                                    type="text"
                                    id="genre"
                                    name="genre"
                                    className="form-input"
                                    value={formData.genre}
                                    onChange={handleInputChange}
                                    placeholder="Например: Фантастика"
                                    required
                                />
                            </div>
                        </div>

                        {/* Название */}
                        <div className="form-field">
                            <label htmlFor="title" className="form-label">
                                Название книги <span className="required">*</span>
                            </label>
                            <input
                                type="text"
                                id="title"
                                name="title"
                                className="form-input"
                                value={formData.title}
                                onChange={handleInputChange}
                                placeholder="Введите полное название книги"
                                required
                            />
                        </div>

                        {/* Автор */}
                        <div className="form-field">
                            <label htmlFor="author" className="form-label">
                                Автор <span className="required">*</span>
                            </label>
                            <input
                                type="text"
                                id="author"
                                name="author"
                                className="form-input"
                                value={formData.author}
                                onChange={handleInputChange}
                                placeholder="Имя и фамилия автора"
                                required
                            />
                        </div>

                        {/* Описание */}
                        <div className="form-field">
                            <label htmlFor="description" className="form-label">
                                Описание <span className="required">*</span>
                            </label>
                            <textarea
                                id="description"
                                name="description"
                                className="form-textarea"
                                value={formData.description}
                                onChange={handleInputChange}
                                placeholder="Краткое описание книги, её содержания и особенностей"
                                rows="5"
                                required
                            />
                        </div>

                        {/* Файл */}
                        <div className="form-field">
                            <label htmlFor="file" className="form-label">
                                PDF файл <span className="required">*</span>
                            </label>
                            <div className="file-input-wrapper">
                                <input
                                    type="file"
                                    id="file"
                                    className="file-input"
                                    accept=".pdf"
                                    onChange={handleFileChange}
                                    required
                                />
                                <label htmlFor="file" className="file-input-label">
                                    <span className="file-input-icon">📄</span>
                                    <span className="file-input-text">
                                        {fileName || 'Выберите PDF файл'}
                                    </span>
                                    <span className="file-input-button">Обзор</span>
                                </label>
                            </div>
                        </div>

                        {/* Кнопка отправки */}
                        <button
                            type="submit"
                            className="btn-primary"
                            disabled={loading}
                        >
                            {loading ? (
                                <>
                                    <span className="btn-spinner"></span>
                                    <span>Добавление...</span>
                                </>
                            ) : (
                                <>
                                    <span>Добавить книгу</span>
                                    <span className="btn-arrow">→</span>
                                </>
                            )}
                        </button>
                    </form>
                </div>

                {/* Секция синхронизации */}
                <div className="admin-card" ref={syncCardRef}>
                    <div className="card-header">
                        <h2 className="card-title">Синхронизация базы данных</h2>
                        <p className="card-description">
                            Обновить данные из файловой системы
                        </p>
                    </div>

                    <div className="sync-content">
                        <div className="sync-info">
                            <div className="sync-icon">🔄</div>
                            <p className="sync-text">
                                Синхронизация проверит все файлы и обновит информацию в базе данных.
                                Это может занять некоторое время.
                            </p>
                        </div>

                        <button
                            className="btn-secondary"
                            onClick={handleSync}
                            disabled={loading}
                        >
                            {loading ? (
                                <>
                                    <span className="btn-spinner"></span>
                                    <span>Синхронизация...</span>
                                </>
                            ) : (
                                <>
                                    <span>Запустить синхронизацию</span>
                                    <span className="btn-arrow">→</span>
                                </>
                            )}
                        </button>
                    </div>
                </div>

            </div>
        </div>
    );
};

export default AdminPage;



==== FILE: .\frontend\src\pages\AuthPage.js ====
﻿import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { useAuth } from '../contexts/AuthContext';
import '../styles/AuthPage.css';

const AuthPage = () => {
  const [isLogin, setIsLogin] = useState(true);
  const [formData, setFormData] = useState({
    email: '',
    password: '',
    full_name: ''
  });
  const [error, setError] = useState('');
  const [loading, setLoading] = useState(false);

  const { login, register } = useAuth();
  const navigate = useNavigate();

  const handleChange = (e) => {
    setFormData({
      ...formData,
      [e.target.name]: e.target.value
    });
    setError('');
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setError('');
    setLoading(true);

    try {
      if (isLogin) {
        await login(formData.email, formData.password);
        navigate('/books');
      } else {
        await register(formData);
        setIsLogin(true);
        setFormData({ email: '', password: '', full_name: '' });  // Исправлено!
        setError('Регистрация успешна! Теперь войдите в систему');
      }

    } catch (err) {
      console.error('Auth error:', err);
      let errorMessage = 'Произошла ошибка. Попробуйте снова.';

      if (err.response) {
        const { status } = err.response;
        const detail = err.response.data?.detail;

        if (status === 422) {
          if (typeof detail === 'string') {
            errorMessage = detail;
          } else if (Array.isArray(detail)) {
            const messages = detail.map(error => {
              const msg = error.msg;
              if (msg.includes("value is not a valid email")) {
                return "Неверный формат email";
              } else if (msg.includes("field required")) {
                return "Поле обязательно для заполнения";
              } else if (msg.includes("Value error")) {
                return msg.replace("Value error, ", "");
              }
              return msg;
            });
            errorMessage = messages.join("\n");
          } else {
            errorMessage = "Ошибка валидации данных";
          }
        } else if (status === 429) {
          errorMessage = detail || "Слишком много попыток. Попробуйте через минуту";
        } else if (status === 400) {
          errorMessage = detail || "Пользователь с таким email уже существует";
        } else if (status === 401) {
          errorMessage = detail || "Неверный email или пароль";
        } else if (status === 403) {
          errorMessage = "Доступ запрещен";
        } else if (status === 500) {
          errorMessage = "Ошибка сервера. Попробуйте позже.";
        } else if (detail) {
          errorMessage = detail;
        }
      } else if (err.message) {
        if (err.message.includes('Network Error')) {
          errorMessage = 'Ошибка сети. Проверьте подключение.';
        } else {
          errorMessage = err.message;
        }
      }

      setError(errorMessage);
    } finally {
      setLoading(false);
    }
  };


  return (
    <div className="auth-page">
      <div className="auth-container">
        <div className="auth-header">
          <h1>{isLogin ? 'Вход' : 'Регистрация'}</h1>
        </div>

        <form className="auth-form" onSubmit={handleSubmit}>
          {!isLogin && (
            <div className="form-group">
              <label htmlFor="full_name">ФИО</label>
              <input
                type="text"
                id="full_name"
                name="full_name"
                value={formData.full_name}
                onChange={handleChange}
                required={!isLogin}
                placeholder="Иванов Иван Иванович"
              />
              <small className="form-hint">
                Введите минимум Фамилию и Имя (например: Иванов Иван)
              </small>
            </div>
          )}

          <div className="form-group">
            <label htmlFor="email">Email</label>
            <input
              type="email"
              id="email"
              name="email"
              value={formData.email}
              onChange={handleChange}
              required
              placeholder="example@mail.com"
            />
          </div>

          <div className="form-group">
            <label htmlFor="password">Пароль</label>
            <input
              type="password"
              id="password"
              name="password"
              value={formData.password}
              onChange={handleChange}
              required
              placeholder={isLogin ? "Введите пароль" : "8-20 символов"}
            />
            {!isLogin && (
              <small className="form-hint">
                8-20 символов. Обязательно: заглавная (A-Z), строчная (a-z), цифра, спецсимвол
              </small>
            )}
          </div>

          {error && (
            <div className="error-message" style={{ whiteSpace: 'pre-line' }}>
              {error}
            </div>
          )}

          <button
            type="submit"
            className="btn-submit"
            disabled={loading}
          >
            {loading ? 'Загрузка...' : (isLogin ? 'Войти' : 'Зарегистрироваться')}
          </button>
        </form>

        <div className="auth-switch">
          <button
            className="btn-link"
            onClick={() => {
              setIsLogin(!isLogin);
              setError('');
              setFormData({ email: '', password: '', full_name: '' });
            }}
          >
            {isLogin ? 'Нет аккаунта? Зарегистрируйтесь!' : 'Уже есть аккаунт? Войдите!'}
          </button>
        </div>
      </div>
    </div>
  );
};

export default AuthPage;



==== FILE: .\frontend\src\pages\BookDetailPage.js ====
import React, { useState, useEffect } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { useAuth } from '../contexts/AuthContext';
import { booksAPI, reviewsAPI, ratingsAPI, favoritesAPI, readStatusAPI } from '../services/api';
import '../styles/BookDetailPage.css';


const BookDetailPage = () => {
    const { id } = useParams();
    const navigate = useNavigate();
    const { isAuthenticated } = useAuth();

    const [book, setBook] = useState(null);
    const [reviews, setReviews] = useState([]);
    const [reviewText, setReviewText] = useState('');
    const [userRating, setUserRating] = useState(0);
    const [loading, setLoading] = useState(true);
    const [showPDF, setShowPDF] = useState(false);
    const [error, setError] = useState(''); // Добавлено для отображения ошибок

    useEffect(() => {
        loadBookData();
    }, [id]);

    const loadBookData = async () => {
        try {
            const [bookRes, reviewsRes] = await Promise.all([
                booksAPI.getById(id),
                reviewsAPI.getByBook(id)
            ]);
            setBook(bookRes.data);
            setReviews(reviewsRes.data);
            setUserRating(bookRes.data.user_rating || 0);
        } catch (error) {
            console.error('Error loading book:', error);
        } finally {
            setLoading(false);
        }
    };

    const showError = (message) => {
        setError(message);
        setTimeout(() => setError(''), 5000); // Скрыть через 5 секунд
    };

    const handleDownload = async () => {
        try {
            const response = await booksAPI.download(id);
            const url = window.URL.createObjectURL(new Blob([response.data]));
            const link = document.createElement('a');
            link.href = url;
            link.setAttribute('download', book.filename);
            document.body.appendChild(link);
            link.click();
            link.remove();
        } catch (error) {
            console.error('Error downloading book:', error);
            if (error.response?.status === 429) {
                showError(error.response.data?.detail || 'Вы можете скачивать файлы не чаще 1 раза в 30 секунд. Подождите.');
            } else if (error.response?.status === 401) {
                showError('Необходимо войти в систему для скачивания');
                navigate('/auth');
            } else {
                showError('Ошибка при скачивании книги');
            }
        }
    };

    const handleRating = async (value) => {
        if (!isAuthenticated) {
            navigate('/auth');
            return;
        }

        try {
            await ratingsAPI.create({ book_id: parseInt(id), value });
            setUserRating(value);
            loadBookData();
        } catch (error) {
            console.error('Error rating book:', error);
            if (error.response?.status === 429) {
                showError(error.response.data?.detail || 'Вы можете ставить оценки не чаще 1 раза в минуту. Подождите.');
            } else {
                showError('Ошибка при выставлении оценки');
            }
        }
    };

    const handleReviewSubmit = async (e) => {
        e.preventDefault();
        if (!isAuthenticated) {
            navigate('/auth');
            return;
        }

        try {
            await reviewsAPI.create({ book_id: parseInt(id), text: reviewText });
            setReviewText('');
            loadBookData();
            showError('Отзыв успешно добавлен!'); // Используем для успеха тоже
        } catch (error) {
            console.error('Error submitting review:', error);
            if (error.response?.status === 429) {
                showError(error.response.data?.detail || 'Вы можете оставлять не более 1 отзыва в минуту. Подождите.');
            } else {
                showError('Ошибка при отправке отзыва');
            }
        }
    };

    const handleToggleFavorite = async () => {
        if (!isAuthenticated) {
            navigate('/auth');
            return;
        }

        try {
            if (book.is_favorite) {
                await favoritesAPI.remove(id);
            } else {
                await favoritesAPI.add(id);
            }
            loadBookData();
        } catch (error) {
            console.error('Error toggling favorite:', error);
            if (error.response?.status === 429) {
                showError(error.response.data?.detail || 'Слишком частые действия. Подождите.');
            } else {
                showError('Ошибка при обновлении избранного');
            }
        }
    };

    const handleToggleRead = async () => {
        if (!isAuthenticated) {
            navigate('/auth');
            return;
        }

        try {
            if (book.is_read) {
                await readStatusAPI.markAsUnread(id);
            } else {
                await readStatusAPI.markAsRead(id);
            }
            loadBookData();
        } catch (error) {
            console.error('Error toggling read:', error);
            if (error.response?.status === 429) {
                showError(error.response.data?.detail || 'Слишком частые действия. Подождите.');
            } else {
                showError('Ошибка при обновлении статуса прочтения');
            }
        }
    };

    const handleViewPDF = async () => {
        if (!isAuthenticated) {
            navigate('/auth');
            return;
        }

        try {
            setShowPDF(!showPDF);
        } catch (error) {
            console.error('Error viewing PDF:', error);
            if (error.response?.status === 429) {
                showError(error.response.data?.detail || 'Вы можете открывать книги не чаще 1 раза в 30 секунд. Подождите.');
            } else {
                showError('Ошибка при открытии книги');
            }
        }
    };

    if (loading) return <div className="loading">Загрузка...</div>;
    if (!book) return <div className="error">Книга не найдена</div>;

    return (
        <div className="book-detail-page">
            <div className="book-detail-container">
                {/* Уведомление об ошибках */}
                {error && (
                    <div className="notification-message">
                        {error}
                    </div>
                )}

                <div className="book-main-info">
                    <h1 className="book-detail-title">{book.title}</h1>
                    <p className="book-detail-author">Автор: {book.author}</p>

                    <div className="book-detail-tags">
                        <span className="detail-tag tag-genre">{book.genre}</span>
                        <span className="detail-tag tag-category">{book.tag}</span>
                    </div>

                    {book.description && (
                        <div className="book-description">
                            <h3>Описание</h3>
                            <p>{book.description}</p>
                        </div>
                    )}

                    <div className="book-rating-section">
                        <div className="average-rating">
                            <span className="rating-label">Средний рейтинг:</span>
                            <span className="rating-value">
                                {book.average_rating ? `★ ${book.average_rating.toFixed(1)}` : 'Нет оценок'}
                            </span>
                        </div>

                        {isAuthenticated && (
                            <div className="user-rating">
                                <span className="rating-label">Ваша оценка:</span>
                                <div className="stars">
                                    {[1, 2, 3, 4, 5].map(star => (
                                        <button
                                            key={star}
                                            className={`star ${userRating >= star ? 'active' : ''}`}
                                            onClick={() => handleRating(star)}
                                        >
                                            ★
                                        </button>
                                    ))}
                                </div>
                            </div>
                        )}
                    </div>

                    <div className="book-actions">
                        <button className="btn-action btn-read" onClick={handleViewPDF}>
                            {showPDF ? 'Скрыть книгу' : 'Читать онлайн'}
                        </button>
                        <button className="btn-action btn-download" onClick={handleDownload}>
                            Скачать
                        </button>
                        {isAuthenticated && (
                            <>
                                <button
                                    className={`btn-action ${book.is_favorite ? 'active' : ''}`}
                                    onClick={handleToggleFavorite}
                                >
                                    {book.is_favorite ? 'В избранном' : 'Добавить в избранное'}
                                </button>
                                <button
                                    className={`btn-action ${book.is_read ? 'active' : ''}`}
                                    onClick={handleToggleRead}
                                >
                                    {book.is_read ? 'Прочитано' : 'Отметить как прочитанное'}
                                </button>
                            </>
                        )}
                    </div>
                </div>

                {showPDF && (
                    <div className="pdf-viewer">
                        <iframe
                            src={booksAPI.view(id)}
                            title={book.title}
                            width="100%"
                            height="800px"
                        />
                    </div>
                )}

                <div className="reviews-section">
                    <h2>Отзывы</h2>

                    {isAuthenticated && (
                        <form className="review-form" onSubmit={handleReviewSubmit}>
                            <textarea
                                className="review-textarea"
                                placeholder="Напишите ваш отзыв..."
                                value={reviewText}
                                onChange={(e) => setReviewText(e.target.value)}
                                required
                            />
                            <button type="submit" className="btn-submit">
                                Отправить отзыв
                            </button>
                        </form>
                    )}

                    <div className="reviews-list">
                        {reviews.length === 0 ? (
                            <p className="no-reviews">Пока нет отзывов</p>
                        ) : (
                            reviews.map(review => (
                                <div key={review.id} className="review-item">
                                    <div className="review-header">
                                        <span className="review-author">{review.user_name}</span>
                                        <span className="review-date">
                                            {new Date(review.created_at).toLocaleDateString('ru-RU')}
                                        </span>
                                    </div>

                                    <p className="review-text">{review.text}</p>
                                </div>
                            ))
                        )}
                    </div>
                </div>
            </div>
        </div>
    );
};

export default BookDetailPage;



==== FILE: .\frontend\src\pages\BooksPage.js ====
import React, { useState, useEffect, useRef } from 'react';
import BookCard from '../components/BookCard';
import SearchFilters from '../components/SearchFilters';
import { booksAPI } from '../services/api';
import '../styles/BooksPage.css';

const BooksPage = () => {
    const [books, setBooks] = useState([]);
    const [loading, setLoading] = useState(true);
    const [filters, setFilters] = useState({});
    const bookCardsRef = useRef([]);

    useEffect(() => {
        loadBooks();
    }, [filters]);

    // Intersection Observer для появления карточек
    useEffect(() => {
        if (books.length === 0) return;

        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observerCallback = (entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate');
                    observer.unobserve(entry.target);
                }
            });
        };

        const observer = new IntersectionObserver(observerCallback, observerOptions);

        bookCardsRef.current.forEach(card => {
            if (card) observer.observe(card);
        });

        return () => observer.disconnect();
    }, [books]);

    const loadBooks = async () => {
        setLoading(true);
        try {
            const response = await booksAPI.getAll(filters);
            setBooks(response.data);
        } catch (error) {
            console.error('Error loading books:', error);
        } finally {
            setLoading(false);
        }
    };

    return (
        <div className="books-page">
            <div className="books-container">
                {/* Premium Header */}
                <header className="page-header">
                    <h1>Библиотека</h1>
                    <p className="page-subtitle">
                        Откройте для себя тысячи удивительных книг
                    </p>
                </header>

                {/* Premium Search & Filters */}
                <div className="books-controls">
                    <SearchFilters
                        filters={filters}
                        onFilterChange={setFilters}
                    />
                </div>

                {/* Loading State */}
                {loading && (
                    <div className="books-loading">
                        <div className="loading-spinner"></div>
                        <p className="loading-text">Загружаем книги...</p>
                    </div>
                )}

                {/* Books Grid - БЕЗ results-info */}
                {!loading && books.length > 0 && (
                    <div className="books-grid">
                        {books.map((book, index) => (
                            <div
                                key={book.id}
                                className="book-card-wrapper"
                                ref={el => bookCardsRef.current[index] = el}
                            >
                                <BookCard book={book} />
                            </div>
                        ))}
                    </div>
                )}

                {/* Premium Empty State */}
                {!loading && books.length === 0 && (
                    <div className="books-empty">
                        <div className="books-empty-icon">📚</div>
                        <h2 className="books-empty-title">Книги не найдены</h2>
                        <p className="books-empty-text">
                            Попробуйте изменить параметры поиска или очистить фильтры
                        </p>
                        <button
                            className="books-empty-button"
                            onClick={() => setFilters({})}
                        >
                            Сбросить все фильтры
                        </button>
                    </div>
                )}
            </div>
        </div>
    );
};

export default BooksPage;



==== FILE: .\frontend\src\pages\FavoritesPage.js ====
import React, { useState, useEffect } from 'react';
import { useNavigate, Link } from 'react-router-dom';
import { useAuth } from '../contexts/AuthContext';
import BookCard from '../components/BookCard';
import { favoritesAPI } from '../services/api';
import '../styles/FavoritesPage.css';

const FavoritesPage = () => {
    const { isAuthenticated } = useAuth();
    const navigate = useNavigate();
    const [books, setBooks] = useState([]);
    const [loading, setLoading] = useState(true);

    useEffect(() => {
        if (!isAuthenticated) {
            navigate('/login');
            return;
        }
        loadFavorites();
    }, [isAuthenticated, navigate]);

    const loadFavorites = async () => {
        setLoading(true);
        try {
            const response = await favoritesAPI.getAll();
            setBooks(response.data);
        } catch (error) {
            console.error('Error loading favorites:', error);
        } finally {
            setLoading(false);
        }
    };

    if (!isAuthenticated) return null;

    return (
        <div className="favorites-page">
            <div className="favorites-container">
                {/* Header */}
                <header className="page-header">
                    <h1>Избранное</h1>
                    <p className="page-subtitle">
                        Ваша персональная коллекция любимых книг
                    </p>
                </header>

                {/* Loading State */}
                {loading && (
                    <div className="favorites-loading">
                        <div className="loading-spinner"></div>
                        <p className="loading-text">Загружаем избранные книги...</p>
                    </div>
                )}

                {/* Books Grid */}
                {!loading && books.length > 0 && (
                    <div className="favorites-grid">
                        {books.map((book) => (
                            <BookCard
                                key={book.id}
                                book={book}
                                onUpdate={loadFavorites}
                            />
                        ))}
                    </div>
                )}

                {/* Empty State */}
                {!loading && books.length === 0 && (
                    <div className="favorites-empty">
                        <div className="favorites-empty-icon">📚</div>
                        <h2 className="favorites-empty-title">Пока пусто</h2>
                        <p className="favorites-empty-text">
                            Вы еще не добавили книги в избранное. Начните с изучения каталога!
                        </p>
                        <Link to="/books" className="favorites-empty-button">
                            Перейти к книгам
                        </Link>
                    </div>
                )}
            </div>
        </div>
    );
};

export default FavoritesPage;



==== FILE: .\frontend\src\pages\LandingPage.js ====
import React, { useState, useEffect, useRef } from 'react';
import { Link } from 'react-router-dom';
import '../styles/LandingPage.css';

const LandingPage = () => {
    const [activeAccordion, setActiveAccordion] = useState(null);

    const sectionTitleRef = useRef(null);
    const sectionSubtitleRef = useRef(null);
    const featureCardsRef = useRef([]);

    const toggleAccordion = (index) => {
        setActiveAccordion(activeAccordion === index ? null : index);
    };

    useEffect(() => {
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observerCallback = (entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate');
                }
            });
        };

        const observer = new IntersectionObserver(observerCallback, observerOptions);

        // Наблюдаем только за заголовками и карточками
        if (sectionTitleRef.current) observer.observe(sectionTitleRef.current);
        if (sectionSubtitleRef.current) observer.observe(sectionSubtitleRef.current);

        featureCardsRef.current.forEach(card => {
            if (card) observer.observe(card);
        });

        // НЕ наблюдаем за FAQ - они всегда видимы
        return () => observer.disconnect();
    }, []);

    const features = [
        {
            icon: '📚',
            title: 'Огромная библиотека',
            description: 'Доступ к тысячам книг различных жанров — от классики до современной литературы.',
            link: '/books'
        },
        {
            icon: '🔍',
            title: 'Умный поиск',
            description: 'Мгновенный поиск по названию, автору, жанру и тегам с интеллектуальными подсказками.',
            link: '/books'
        },
        {
            icon: '💾',
            title: 'Личная коллекция',
            description: 'Сохраняйте любимые книги и создавайте собственную цифровую библиотеку.',
            link: '/books'
        },
        {
            icon: '⭐',
            title: 'Оценки и отзывы',
            description: 'Делитесь впечатлениями и находите новые книги по рекомендациям сообщества.',
            link: '/books'
        },
        {
            icon: '📖',
            title: 'Онлайн-чтение',
            description: 'Читайте прямо в браузере с комфортным интерфейсом и настройками отображения.',
            link: '/books'
        },
        {
            icon: '📥',
            title: 'Офлайн-доступ',
            description: 'Скачивайте книги для чтения без подключения к интернету в любое время.',
            link: '/books'
        }
    ];

    const faqs = [
        {
            question: 'Нужна ли регистрация для использования библиотеки?',
            answer: 'Регистрация не обязательна для просмотра и скачивания книг. Она требуется только для добавления в избранное, оценок и написания отзывов.'
        },
        {
            question: 'Как найти нужную книгу?',
            answer: 'Используйте поиск по названию, автору или описанию. Также доступны удобные фильтры по жанрам, тегам и авторам для точного результата.'
        },
        {
            question: 'Можно ли читать книги онлайн?',
            answer: 'Да, все книги можно читать прямо в браузере без необходимости скачивания. Просто откройте книгу и начните чтение с любого устройства.'
        }
    ];

    return (
        <div className="landing-page">
            <section className="hero-section">
                <div className="hero-content">
                    <h1 className="hero-title">Онлайн-библиотека Пионеров Башкортостана</h1>
                    <p className="hero-subtitle"></p>
                    <p className="hero-description">
                        Читайте, сохраняйте и делитесь впечатлениями о любимых произведениях
                    </p>
                    <div className="hero-actions">
                        <Link to="/books" className="btn-primary">
                            <span>Перейти к книгам</span>
                            <span>→</span>
                        </Link>
                        <a href="#features" className="btn-secondary">
                            <span>Узнать больше</span>
                        </a>
                    </div>
                </div>
            </section>

            <section id="features" className="features-section">
                <h2 className="section-title" ref={sectionTitleRef}>Возможности</h2>
                <p className="section-subtitle" ref={sectionSubtitleRef}>
                    Всё необходимое для комфортного чтения и управления вашей библиотекой
                </p>
                <div className="features-grid">
                    {features.map((feature, index) => (
                        <div
                            className="feature-card"
                            key={index}
                            ref={el => featureCardsRef.current[index] = el}
                        >
                            <div className="feature-icon">{feature.icon}</div>
                            <h3>{feature.title}</h3>
                            <p>{feature.description}</p>
                            <Link to={feature.link} className="feature-link">
                                <span>Подробнее</span>
                                <span>→</span>
                            </Link>
                        </div>
                    ))}
                </div>
            </section>

            <section className="faq-section">
                <h2 className="section-title" style={{ opacity: 1, transform: 'none' }}>Частые вопросы</h2>
                <p className="section-subtitle" style={{ opacity: 1, transform: 'none' }}>
                    Ответы на самые популярные вопросы о нашей библиотеке
                </p>
                <div className="faq-list">
                    {faqs.map((faq, index) => (
                        <div
                            className={`faq-accordion ${activeAccordion === index ? 'active' : ''}`}
                            key={index}
                        >
                            <div
                                className="faq-accordion-header"
                                onClick={() => toggleAccordion(index)}
                            >
                                <h3>{faq.question}</h3>
                                <div className="faq-accordion-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                        <path d="M6 9l6 6 6-6" />
                                    </svg>
                                </div>
                            </div>
                            <div className="faq-accordion-body">
                                <p>{faq.answer}</p>
                            </div>
                        </div>
                    ))}
                </div>
            </section>
        </div>
    );
};

export default LandingPage;



==== FILE: .\frontend\src\pages\SectionsPage.js ====
import React from 'react';
import { Link, useLocation } from 'react-router-dom';
import '../styles/SectionsPage.css';

const SectionsPage = ({ children }) => {
    const location = useLocation();

    const sections = [
        { id: 'methodclub', name: 'Методический клуб', path: '/sections/methodclub' },
        { id: 'pioneers', name: 'Работа с пионерами', path: '/sections/pioneers' },
        { id: 'leaders', name: 'Школа отрядных вожатых', path: '/sections/leaders' },
        { id: 'volunteers', name: 'Волонтерский отряд', path: '/sections/volunteers' },
    ];

    const isActive = (path) => location.pathname === path;

    return (
        <div className="sections-page">
            {/* УДАЛЕНО: <div className="sections-permanent-background"></div> */}

            <div className="sections-container">
                <nav className="sections-nav">
                    <div className="sections-tabs">
                        {sections.map((section) => (
                            <Link
                                key={section.id}
                                to={section.path}
                                className={`section-tab ${isActive(section.path) ? 'active' : ''}`}
                            >
                                {section.name}
                            </Link>
                        ))}
                    </div>
                </nav>

                <div className="section-content">
                    {children}
                </div>
            </div>
        </div>
    );
};

export default SectionsPage;



==== FILE: .\frontend\src\pages\sections\MethodClubPage.js ====
import React from 'react';
import Iridescence from '../../components/Iridescence';
import '../../styles/MethodClubPage.css';

const MethodClubPage = () => {
    return (
        <div className="method-club-page">
            {/* Hero Section */}
            <div className="method-club-hero">
                <Iridescence
                    color={[0.4, 0.49, 0.92]} // Фиолетовый оттенок
                    mouseReact={false}
                    amplitude={0.1}
                    speed={0.5}
                />

                <div className="hero-content-wrapper">
                    <div className="hero-content">
                        <h1 className="hero-title">
                            Методический<br />клуб
                        </h1>
                        <p className="hero-subtitle">
                            Эфиры, подкасты, подборки советов и курсы<br />
                            от Научно-методического центра
                        </p>
                    </div>

                    <div className="hero-image">
                        <div className="hero-illustration">
                            <div className="illustration-phone">
                                <div className="phone-screen">
                                    <div className="screen-content">
                                        <div className="profile-item"></div>
                                        <div className="profile-item"></div>
                                        <div className="profile-item"></div>
                                        <div className="profile-item"></div>
                                    </div>
                                </div>
                            </div>
                            <div className="floating-element element-1">💡</div>
                            <div className="floating-element element-2">📚</div>
                            <div className="floating-element element-3">🎯</div>
                        </div>
                    </div>
                </div>
            </div>

            {/* Materials Section */}
            <div className="method-club-materials">
                <h2 className="materials-title">Материалы клуба</h2>
                <div className="materials-content">
                    <div className="materials-grid">
                        {[1, 2, 3, 4, 5, 6].map((item) => (
                            <div key={item} className="material-card">
                                <div className="card-image-placeholder"></div>
                                <div className="card-content">
                                    <div className="card-category">Категория</div>
                                    <div className="card-title-placeholder"></div>
                                    <div className="card-text-placeholder"></div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        </div>
    );
};

export default MethodClubPage;



==== FILE: .\frontend\src\pages\sections\PioneersWorkPage.js ====
import React, { useState } from 'react';
import Iridescence from '../../components/Iridescence';
import '../../styles/PioneersWorkPage.css';

const PioneersWorkPage = () => {
    const [activeFilter, setActiveFilter] = useState('all');

    const filters = [
        { id: 'all', label: 'Все' },
        { id: 'admission', label: 'Прием в пионеры' },
        { id: 'first-steps', label: 'Первые дела' },
        { id: 'traditions', label: 'Пионерские традиции' },
        { id: 'technology', label: 'Пионерская технология' },
        { id: 'directions', label: 'Направления воспитательной работы с пионерами' },
    ];

    const cards = [
        {
            id: 1,
            category: 'ПРИЕМ В ПИОНЕРЫ',
            title: 'Организация приема в Пионеры Башкортостана',
            image: 'https://via.placeholder.com/400x250',
            filter: 'admission'
        },
        {
            id: 2,
            category: 'ПРИЕМ В ПИОНЕРЫ',
            title: 'Как рассказать родителям о Пионерах Башкортостана',
            image: 'https://via.placeholder.com/400x250',
            filter: 'admission'
        },
        {
            id: 3,
            category: 'ПРИЕМ В ПИОНЕРЫ',
            title: 'Что нужно знать о современных пионерах и организации "Пионеры Башкортостана"',
            image: 'https://via.placeholder.com/400x250',
            filter: 'admission'
        },
        {
            id: 4,
            category: 'ПРИЕМ В ПИОНЕРЫ',
            title: 'Как инициировать прием школьников в Пионеры Башкортостана',
            image: 'https://via.placeholder.com/400x250',
            filter: 'admission'
        },
    ];

    const filteredCards = activeFilter === 'all'
        ? cards
        : cards.filter(card => card.filter === activeFilter);

    return (
        <div className="pioneers-work-page">
            {/* Hero Section */}
            <div className="pioneers-hero">
                <Iridescence
                    color={[0.4, 0.49, 0.92]}
                    mouseReact={false}
                    amplitude={0.1}
                    speed={0.5}
                />

                <div className="hero-content-wrapper">
                    <div className="hero-content">
                        <h1 className="hero-title">
                            Работа<br />с пионерами
                        </h1>
                        <p className="hero-subtitle">
                            Здесь представлены программы, методические<br />
                            рекомендации и практические советы по организации<br />
                            работы с детьми и молодежью
                        </p>
                    </div>

                    <div className="hero-image">
                        <div className="hero-illustration-pioneers">
                            <div className="books-stack">
                                <div className="book book-1"></div>
                                <div className="book book-2"></div>
                                <div className="book book-3"></div>
                                <div className="book book-4"></div>
                            </div>
                            <div className="pioneer-character">
                                <div className="character-body"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {/* Getting Started Section */}
            <div className="getting-started-section">
                <h2 className="section-title">
                    С чего начать?
                </h2>

                {/* Filters */}
                <div className="filters-container">
                    {filters.map((filter) => (
                        <button
                            key={filter.id}
                            className={`filter-btn ${activeFilter === filter.id ? 'active' : ''}`}
                            onClick={() => setActiveFilter(filter.id)}
                        >
                            {filter.label}
                        </button>
                    ))}
                </div>

                {/* Cards Grid */}
                <div className="pioneers-cards-grid">
                    {filteredCards.map((card, index) => (
                        <div
                            key={card.id}
                            className="pioneer-card"
                            style={{ '--card-index': index }}
                        >
                            <div className="card-image">
                                <img src={card.image} alt={card.title} />
                            </div>
                            <div className="card-body">
                                <span className="card-category">{card.category}</span>
                                <h3 className="card-title">{card.title}</h3>
                            </div>
                        </div>
                    ))}
                </div>
            </div>

            {/* Pioneer Assembly Section */}
            <div className="pioneer-assembly-section">
                <h2 className="section-title">Пионерский сбор</h2>
                <div className="assembly-content">
                    <p className="assembly-placeholder">Материалы скоро появятся</p>
                </div>
            </div>
        </div>
    );
};

export default PioneersWorkPage;



==== FILE: .\frontend\src\pages\sections\SchoolLeadersPage.js ====
import React from 'react';
import Iridescence from '../../components/Iridescence';
import '../../styles/SchoolLeadersPage.css';

const SchoolLeadersPage = () => {
    return (
        <div className="school-leaders-page">
            {/* Hero Section */}
            <div className="school-leaders-hero">
                <Iridescence
                    color={[0.4, 0.49, 0.92]}
                    mouseReact={false}
                    amplitude={0.1}
                    speed={0.5}
                />

                <div className="hero-content-wrapper">
                    <div className="hero-content">
                        <h1 className="hero-title">
                            Про отрядных<br />вожатых
                        </h1>
                        <p className="hero-subtitle">
                            Кто такой отрядный вожатый?<br />
                            Это старшеклассников готовый помочь вам<br />
                            в работе с детскими общественными объединениями.
                        </p>
                    </div>

                    <div className="hero-image">
                        <div className="hero-illustration-leaders">
                            <div className="leaders-table">
                                <div className="table-top"></div>
                                <div className="table-legs"></div>
                            </div>
                            <div className="leader-character leader-1">
                                <div className="character-icon">👤</div>
                            </div>
                            <div className="leader-character leader-2">
                                <div className="character-icon">👤</div>
                            </div>
                            <div className="floating-element element-1">📋</div>
                            <div className="floating-element element-2">✏️</div>
                            <div className="floating-element element-3">📚</div>
                        </div>
                    </div>
                </div>
            </div>

            {/* Content Section */}
            <div className="leaders-content-section">
                <h2 className="section-title">Работа с отрядными вожатыми</h2>
                <div className="content-placeholder">
                    <p className="placeholder-text">Материалы скоро появятся</p>
                </div>
            </div>
        </div>
    );
};

export default SchoolLeadersPage;



==== FILE: .\frontend\src\pages\sections\VolunteersPage.js ====
import React from 'react';
import Iridescence from '../../components/Iridescence';
import '../../styles/VolunteersPage.css';

const VolunteersPage = () => {
    return (
        <div className="volunteers-page">
            {/* Hero Section */}
            <div className="volunteers-hero">
                <Iridescence
                    color={[0.4, 0.49, 0.92]}
                    mouseReact={false}
                    amplitude={0.1}
                    speed={0.5}
                />

                <div className="hero-content-wrapper">
                    <div className="hero-content">
                        <h1 className="hero-title">
                            Волонтерский<br />отряд
                        </h1>
                        <p className="hero-subtitle">
                            Рассказываем, как выстроить работу<br />
                            с добровольческим объединением
                        </p>
                    </div>

                    <div className="hero-image">
                        <div className="hero-illustration-volunteers">
                            <div className="volunteer-character character-1">
                                <div className="puzzle-piece piece-green"></div>
                            </div>
                            <div className="volunteer-character character-2">
                                <div className="puzzle-piece piece-yellow"></div>
                            </div>
                            <div className="volunteer-character character-3">
                                <div className="puzzle-piece piece-blue"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {/* Content Section */}
            <div className="volunteers-content-section">
                <h2 className="section-title">Работа с добровольческим объединением</h2>
                <div className="content-placeholder">
                    <p className="placeholder-text">Материалы скоро появятся</p>
                </div>
            </div>
        </div>
    );
};

export default VolunteersPage;



==== FILE: .\frontend\src\services\api.js ====
import axios from 'axios';

const api = axios.create({
    baseURL: '/api',
    headers: {
        'Content-Type': 'application/json',
    },
});

api.interceptors.request.use(
    (config) => {
        const token = localStorage.getItem('token');
        if (token) {
            config.headers.Authorization = `Bearer ${token}`;
        }
        return config;
    },
    (error) => Promise.reject(error)
);

api.interceptors.response.use(
    response => response,
    error => {
        if (error.response?.status === 401) {
            // Только очищаем token, НЕ перенаправляем
            localStorage.removeItem('token');
            // Редирект обработает AuthContext или сам компонент
        }
        return Promise.reject(error);
    }
);


export const booksAPI = {
    getAll: (params) => api.get('/books', { params }),
    getById: (id) => api.get(`/books/${id}`),
    download: (id) => api.get(`/books/${id}/download`, { responseType: 'blob' }),
    view: (id) => `/api/books/${id}/view`,

    // ИСПРАВЛЕНО: Удаляем Content-Type, чтобы axios сам установил boundary
    create: (formData) => api.post('/books', formData, {
        headers: {
            'Content-Type': undefined  // Или просто не указывать вообще
        }
    }),

    update: (id, data) => api.put(`/books/${id}`, data),
    delete: (id) => api.delete(`/books/${id}`),
    sync: () => api.post('/books/sync'),
};

export const favoritesAPI = {
    getAll: () => api.get('/favorites'),
    add: (bookId) => api.post(`/favorites/${bookId}`),
    remove: (bookId) => api.delete(`/favorites/${bookId}`),
};

export const readStatusAPI = {
    markAsRead: (bookId) => api.post(`/read/${bookId}`),
    markAsUnread: (bookId) => api.delete(`/read/${bookId}`),
};

export const reviewsAPI = {
    getByBook: (bookId) => api.get(`/reviews/${bookId}`),
    create: (data) => api.post('/reviews', data),
};

export const ratingsAPI = {
    create: (data) => api.post('/ratings', data),
};

export const filtersAPI = {
    getTags: () => api.get('/filters/tags'),
    getGenres: () => api.get('/filters/genres'),
    getAuthors: () => api.get('/filters/authors'),
};

export default api;



==== FILE: .\frontend\src\styles\AdminPage.css ====
/* ============================================
   ADMIN PAGE - APPLE PRO STYLE
   Modern & Clean Design
============================================ */

:root {
    --admin-primary: #667eea;
    --admin-secondary: #764ba2;
    --admin-success: #00e965;
    --admin-error: #ff4444;
    --admin-text: #1d1d1f;
    --admin-text-secondary: #6e6e73;
    --admin-bg: #ffffff;
    --admin-surface: #f5f5f7;
    --admin-border: rgba(0, 0, 0, 0.1);
    --admin-hover: rgba(0, 0, 0, 0.05);
    --admin-glass: rgba(255, 255, 255, 0.8);
    --admin-blur: saturate(180%) blur(20px);
    --admin-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
    --admin-shadow-md: 0 4px 16px rgba(0, 0, 0, 0.12);
    --admin-shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.16);
    --admin-transition: cubic-bezier(0.28, 0.11, 0.32, 1);
    --admin-font: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", system-ui, sans-serif;
}

[data-theme='dark'] {
    --admin-text: #f5f5f7;
    --admin-text-secondary: #98989d;
    --admin-bg: #000000;
    --admin-surface: #1c1c1e;
    --admin-border: rgba(255, 255, 255, 0.15);
    --admin-hover: rgba(255, 255, 255, 0.08);
    --admin-glass: rgba(28, 28, 30, 0.8);
    --admin-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
    --admin-shadow-md: 0 4px 16px rgba(0, 0, 0, 0.5);
    --admin-shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.6);
}

@media (prefers-color-scheme: dark) {
    :root:not([data-theme='light']) {
        --admin-text: #f5f5f7;
        --admin-text-secondary: #98989d;
        --admin-bg: #000000;
        --admin-surface: #1c1c1e;
        --admin-border: rgba(255, 255, 255, 0.15);
        --admin-hover: rgba(255, 255, 255, 0.08);
        --admin-glass: rgba(28, 28, 30, 0.8);
        --admin-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
        --admin-shadow-md: 0 4px 16px rgba(0, 0, 0, 0.5);
        --admin-shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.6);
    }
}

/* Animations */
@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* Page Container */
.admin-page {
    width: 100%;
    min-height: 100vh;
    background-color: var(--admin-bg);
    padding: 60px 24px;
    font-family: var(--admin-font);
    animation: fadeIn 0.5s var(--admin-transition);
}

.admin-container {
    max-width: 900px;
    margin: 0 auto;
}

/* Header */
.admin-header {
    text-align: center;
    margin-bottom: 48px;
    opacity: 0;
    transition: all 0.6s var(--admin-transition);
}

.admin-header.visible {
    animation: slideUp 0.6s var(--admin-transition) forwards;
}

.admin-title {
    font-size: clamp(2.5rem, 5vw, 3.5rem);
    font-weight: 800;
    color: var(--admin-text);
    margin-bottom: 12px;
    letter-spacing: -0.03em;
    line-height: 1.1;
}

.admin-subtitle {
    font-size: 1.125rem;
    color: var(--admin-text-secondary);
    font-weight: 500;
}

/* Message */
.admin-message {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px 24px;
    border-radius: 12px;
    margin-bottom: 32px;
    font-weight: 500;
    animation: slideUp 0.4s var(--admin-transition);
    border: 1px solid;
}

.admin-message-success {
    background: rgba(0, 233, 101, 0.1);
    border-color: var(--admin-success);
    color: var(--admin-success);
}

.admin-message-error {
    background: rgba(255, 68, 68, 0.1);
    border-color: var(--admin-error);
    color: var(--admin-error);
}

.message-icon {
    font-size: 1.25rem;
    font-weight: 700;
}

.message-text {
    flex: 1;
}

/* Card */
.admin-card {
    background: var(--admin-glass);
    backdrop-filter: var(--admin-blur);
    -webkit-backdrop-filter: var(--admin-blur);
    border: 1px solid var(--admin-border);
    border-radius: 20px;
    padding: 48px;
    margin-bottom: 32px;
    box-shadow: var(--admin-shadow-md);
    opacity: 0;
    transition: all 0.6s var(--admin-transition);
}

.admin-card.visible {
    animation: slideUp 0.6s var(--admin-transition) forwards;
}

.admin-card:nth-child(3).visible {
    animation-delay: 0.1s;
}

.admin-card:nth-child(4).visible {
    animation-delay: 0.2s;
}

.admin-card:hover {
    box-shadow: var(--admin-shadow-lg);
    border-color: rgba(102, 126, 234, 0.3);
}

.card-header {
    margin-bottom: 32px;
}

.card-title {
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--admin-text);
    margin-bottom: 8px;
    letter-spacing: -0.02em;
}

.card-description {
    font-size: 1rem;
    color: var(--admin-text-secondary);
    line-height: 1.5;
}

/* Form */
.admin-form {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.form-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 24px;
}

.form-field {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.form-label {
    font-size: 14px;
    font-weight: 600;
    color: var(--admin-text);
    letter-spacing: 0.01em;
}

.required {
    color: var(--admin-error);
}

.form-input,
.form-textarea {
    width: 100%;
    padding: 14px 18px;
    font-size: 1rem;
    font-family: var(--admin-font);
    color: var(--admin-text);
    background: var(--admin-bg);
    border: 1px solid var(--admin-border);
    border-radius: 12px;
    outline: none;
    transition: all 0.3s var(--admin-transition);
}

.form-input:hover,
.form-textarea:hover {
    border-color: rgba(102, 126, 234, 0.4);
    box-shadow: var(--admin-shadow-sm);
}

.form-input:focus,
.form-textarea:focus {
    border-color: var(--admin-primary);
    box-shadow: var(--admin-shadow-md);
}

.form-input::placeholder,
.form-textarea::placeholder {
    color: var(--admin-text-secondary);
}

.form-textarea {
    resize: vertical;
    min-height: 120px;
    line-height: 1.6;
}

/* File Input */
.file-input-wrapper {
    position: relative;
}

.file-input {
    position: absolute;
    width: 0;
    height: 0;
    opacity: 0;
    pointer-events: none;
}

.file-input-label {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px 18px;
    background: var(--admin-bg);
    border: 2px dashed var(--admin-border);
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s var(--admin-transition);
}

.file-input-label:hover {
    border-color: var(--admin-primary);
    background: var(--admin-surface);
}

.file-input-icon {
    font-size: 1.5rem;
}

.file-input-text {
    flex: 1;
    font-size: 1rem;
    color: var(--admin-text);
}

.file-input-button {
    padding: 8px 20px;
    background: var(--admin-surface);
    border-radius: 8px;
    font-weight: 600;
    font-size: 14px;
    color: var(--admin-text);
    transition: all 0.2s var(--admin-transition);
}

.file-input-label:hover .file-input-button {
    background: var(--admin-hover);
    transform: translateY(-1px);
}

/* Buttons - ИДЕНТИЧНЫЕ СТИЛИ */
.btn-primary,
.btn-secondary {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 16px 32px;
    font-size: 1rem;
    font-weight: 600;
    font-family: var(--admin-font);
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s var(--admin-transition);
    outline: none;
    position: relative;
    overflow: hidden;
    box-shadow: var(--admin-shadow-sm);
}

/* Primary Button */
.btn-primary {
    background: linear-gradient(135deg, var(--admin-primary), var(--admin-secondary));
    color: white;
}

.btn-primary:hover:not(:disabled) {
    box-shadow: var(--admin-shadow-md);
    transform: translateY(-2px);
}

.btn-primary:active:not(:disabled) {
    transform: translateY(0);
}

.btn-primary:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
}

/* Primary Button - Светлая тема */
:root .btn-primary:hover:not(:disabled) {
    color: var(--admin-text);
}

:root .btn-primary:hover:not(:disabled) span,
:root .btn-primary:hover:not(:disabled) .btn-arrow,
:root .btn-primary:hover:not(:disabled) .btn-spinner {
    color: var(--admin-text);
}

/* Primary Button - Темная тема */
[data-theme='dark'] .btn-primary:hover:not(:disabled) {
    color: white;
}

[data-theme='dark'] .btn-primary:hover:not(:disabled) span,
[data-theme='dark'] .btn-primary:hover:not(:disabled) .btn-arrow {
    color: white;
}

@media (prefers-color-scheme: dark) {
    :root:not([data-theme='light']) .btn-primary:hover:not(:disabled) {
        color: white;
    }

    :root:not([data-theme='light']) .btn-primary:hover:not(:disabled) span,
    :root:not([data-theme='light']) .btn-primary:hover:not(:disabled) .btn-arrow {
        color: white;
    }
}

/* Secondary Button */
.btn-secondary {
    background: var(--admin-surface);
    color: var(--admin-text);
    border: 1px solid var(--admin-border);
}

.btn-secondary:hover:not(:disabled) {
    background: var(--admin-hover);
    box-shadow: var(--admin-shadow-md);
    transform: translateY(-2px);
    border-color: rgba(102, 126, 234, 0.3);
}

.btn-secondary:active:not(:disabled) {
    transform: translateY(0);
}

.btn-secondary:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
}

/* Spinner & Arrow */
.btn-spinner {
    width: 16px;
    height: 16px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-top-color: white;
    border-radius: 50%;
    animation: spin 0.6s linear infinite;
}

.btn-arrow {
    font-size: 1.25rem;
    transition: transform 0.3s var(--admin-transition);
}

.btn-primary:hover:not(:disabled) .btn-arrow,
.btn-secondary:hover:not(:disabled) .btn-arrow {
    transform: translateX(4px);
}

/* Sync Content */
.sync-content {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.sync-info {
    display: flex;
    align-items: flex-start;
    gap: 16px;
    padding: 20px;
    background: var(--admin-surface);
    border-radius: 12px;
}

.sync-icon {
    font-size: 2rem;
    flex-shrink: 0;
}

.sync-text {
    flex: 1;
    color: var(--admin-text-secondary);
    line-height: 1.6;
}

/* Responsive */
@media (max-width: 768px) {
    .admin-page {
        padding: 40px 16px;
    }

    .admin-card {
        padding: 32px 24px;
    }

    .form-grid {
        grid-template-columns: 1fr;
    }

    .admin-title {
        font-size: 2rem;
    }

    .card-title {
        font-size: 1.5rem;
    }
}

@media (max-width: 480px) {
    .admin-card {
        padding: 24px 20px;
    }

    .btn-primary,
    .btn-secondary {
        width: 100%;
    }
}

@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation: none !important;
        transition-duration: 0.01ms !important;
    }
}


==== FILE: .\frontend\src\styles\AuthPage.css ====
/* ============================================
   AUTH PAGE - APPLE PRO STYLE
   Modern & Minimal Design
============================================ */

:root {
    --auth-primary: #667eea;
    --auth-secondary: #764ba2;
    --auth-success: #00e965;
    --auth-error: #ff4444;
    --auth-text: #1d1d1f;
    --auth-text-secondary: #6e6e73;
    --auth-bg: #ffffff;
    --auth-surface: #f5f5f7;
    --auth-border: rgba(0, 0, 0, 0.1);
    --auth-hover: rgba(0, 0, 0, 0.05);
    --auth-glass: rgba(255, 255, 255, 0.8);
    --auth-blur: saturate(180%) blur(20px);
    --auth-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
    --auth-shadow-md: 0 4px 16px rgba(0, 0, 0, 0.12);
    --auth-shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.16);
    --auth-transition: cubic-bezier(0.28, 0.11, 0.32, 1);
    --auth-font: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", system-ui, sans-serif;
}

[data-theme='dark'] {
    --auth-text: #f5f5f7;
    --auth-text-secondary: #98989d;
    --auth-bg: #000000;
    --auth-surface: #1c1c1e;
    --auth-border: rgba(255, 255, 255, 0.15);
    --auth-hover: rgba(255, 255, 255, 0.08);
    --auth-glass: rgba(28, 28, 30, 0.8);
    --auth-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
    --auth-shadow-md: 0 4px 16px rgba(0, 0, 0, 0.5);
    --auth-shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.6);
}

@media (prefers-color-scheme: dark) {
    :root:not([data-theme='light']) {
        --auth-text: #f5f5f7;
        --auth-text-secondary: #98989d;
        --auth-bg: #000000;
        --auth-surface: #1c1c1e;
        --auth-border: rgba(255, 255, 255, 0.15);
        --auth-hover: rgba(255, 255, 255, 0.08);
        --auth-glass: rgba(28, 28, 30, 0.8);
        --auth-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
        --auth-shadow-md: 0 4px 16px rgba(0, 0, 0, 0.5);
        --auth-shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.6);
    }
}

/* Animations */
@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* Page Container */
.auth-page {
    width: 100%;
    min-height: calc(100vh - 70px);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 40px 20px;
    background-color: var(--auth-bg);
    font-family: var(--auth-font);
    animation: fadeIn 0.5s var(--auth-transition);
}

/* Auth Container */
.auth-container {
    width: 100%;
    max-width: 480px;
    background: var(--auth-glass);
    backdrop-filter: var(--auth-blur);
    -webkit-backdrop-filter: var(--auth-blur);
    border: 1px solid var(--auth-border);
    border-radius: 20px;
    padding: 48px;
    box-shadow: var(--auth-shadow-md);
    animation: slideUp 0.6s var(--auth-transition);
    transition: all 0.6s var(--auth-transition);
}

.auth-container:hover {
    box-shadow: var(--auth-shadow-lg);
    border-color: rgba(102, 126, 234, 0.2);
}

/* Header */
.auth-header {
    text-align: center;
    margin-bottom: 40px;
}

.auth-header h1 {
    font-size: clamp(2rem, 4vw, 2.5rem);
    font-weight: 800;
    color: var(--auth-text);
    margin: 0;
    letter-spacing: -0.03em;
    line-height: 1.1;
}

/* Form */
.auth-form {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.form-group label {
    font-size: 14px;
    font-weight: 600;
    color: var(--auth-text);
    letter-spacing: 0.01em;
}

.form-group input {
    width: 100%;
    padding: 14px 18px;
    font-size: 1rem;
    font-family: var(--auth-font);
    color: var(--auth-text);
    background: var(--auth-bg);
    border: 1px solid var(--auth-border);
    border-radius: 12px;
    outline: none;
    transition: all 0.3s var(--auth-transition);
}

.form-group input:hover {
    border-color: rgba(102, 126, 234, 0.4);
    box-shadow: var(--auth-shadow-sm);
}

.form-group input:focus {
    border-color: var(--auth-primary);
    box-shadow: var(--auth-shadow-md);
}

.form-group input::placeholder {
    color: var(--auth-text-secondary);
}

/* Form Hint */
.form-hint {
    font-size: 13px;
    color: var(--auth-text-secondary);
    line-height: 1.5;
}

/* Error Message */
.error-message {
    padding: 14px 18px;
    background: rgba(255, 68, 68, 0.1);
    border: 1px solid rgba(255, 68, 68, 0.3);
    border-radius: 12px;
    color: var(--auth-error);
    font-size: 14px;
    font-weight: 500;
    line-height: 1.5;
    animation: slideUp 0.3s var(--auth-transition);
}

/* Success Message */
.success-message {
    padding: 14px 18px;
    background: rgba(0, 233, 101, 0.1);
    border: 1px solid rgba(0, 233, 101, 0.3);
    border-radius: 12px;
    color: var(--auth-success);
    font-size: 14px;
    font-weight: 500;
    line-height: 1.5;
    animation: slideUp 0.3s var(--auth-transition);
}

/* Submit Button */
.btn-submit {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 16px 32px;
    font-size: 1rem;
    font-weight: 600;
    font-family: var(--auth-font);
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s var(--auth-transition);
    outline: none;
    position: relative;
    overflow: hidden;
    background: linear-gradient(135deg, var(--auth-primary), var(--auth-secondary));
    color: white;
    box-shadow: var(--auth-shadow-sm);
    margin-top: 8px;
}

.btn-submit:hover:not(:disabled) {
    box-shadow: var(--auth-shadow-md);
    transform: translateY(-2px);
}

.btn-submit:active:not(:disabled) {
    transform: translateY(0);
}

.btn-submit:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
}

/* Loading Spinner */
.btn-spinner {
    width: 16px;
    height: 16px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-top-color: white;
    border-radius: 50%;
    animation: spin 0.6s linear infinite;
}

/* Auth Switch */
.auth-switch {
    text-align: center;
    margin-top: 32px;
    padding-top: 24px;
    border-top: 1px solid var(--auth-border);
}

.auth-switch p {
    font-size: 15px;
    color: var(--auth-text-secondary);
    margin-bottom: 12px;
}

.btn-link {
    background: none;
    border: none;
    color: var(--auth-primary);
    font-size: 15px;
    font-weight: 600;
    font-family: var(--auth-font);
    cursor: pointer;
    padding: 8px 16px;
    border-radius: 8px;
    transition: all 0.3s var(--auth-transition);
    position: relative;
}

.btn-link:hover {
    color: var(--auth-secondary);
    background: var(--auth-hover);
}

/* Responsive */
@media (max-width: 600px) {
    .auth-page {
        padding: 20px 16px;
    }

    .auth-container {
        padding: 40px 28px;
    }

    .auth-header h1 {
        font-size: 1.75rem;
    }
}

@media (max-width: 400px) {
    .auth-container {
        padding: 32px 24px;
    }

    .auth-header h1 {
        font-size: 1.5rem;
    }

    .form-group label {
        font-size: 13px;
    }

    .form-group input {
        padding: 12px 16px;
        font-size: 15px;
    }

    .btn-submit {
        padding: 14px 28px;
    }
}

@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation: none !important;
        transition-duration: 0.01ms !important;
    }
}


==== FILE: .\frontend\src\styles\BookCard.css ====
/* ============================================
   APPLE PRO BOOK CARD - PERFECT CONTRAST
   Clean & Minimal Design
============================================ */

:root {
    /* Light Theme - По умолчанию */
    --card-gradient-from: #667eea;
    --card-gradient-to: #764ba2;
    --card-text: #1d1d1f;
    --card-text-secondary: #6e6e73;
    --card-bg: #ffffff;
    --card-surface: #f5f5f7;
    --card-border: rgba(0, 0, 0, 0.1);
    --card-hover: rgba(0, 0, 0, 0.05);

    /* Shadows */
    --card-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
    --card-shadow-hover: 0 8px 32px rgba(0, 0, 0, 0.12);

    /* Spacing */
    --card-padding: 20px;
    --card-gap: 12px;

    /* Typography */
    --font-system: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", system-ui, sans-serif;
}

/* Dark Theme */
[data-theme='dark'] {
    --card-text: #f5f5f7;
    --card-text-secondary: #98989d;
    --card-bg: #1c1c1e;
    --card-surface: #2c2c2e;
    --card-border: rgba(255, 255, 255, 0.15);
    --card-hover: rgba(255, 255, 255, 0.08);
    --card-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
    --card-shadow-hover: 0 8px 32px rgba(0, 0, 0, 0.6);
}

@media (prefers-color-scheme: dark) {
    :root:not([data-theme='light']) {
        --card-text: #f5f5f7;
        --card-text-secondary: #98989d;
        --card-bg: #1c1c1e;
        --card-surface: #2c2c2e;
        --card-border: rgba(255, 255, 255, 0.15);
        --card-hover: rgba(255, 255, 255, 0.08);
        --card-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
        --card-shadow-hover: 0 8px 32px rgba(0, 0, 0, 0.6);
    }
}

/* Card Container */
.book-card {
    display: flex;
    flex-direction: column;
    background: var(--card-bg);
    border-radius: 16px;
    border: 1px solid var(--card-border);
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.28, 0.11, 0.32, 1);
    box-shadow: var(--card-shadow);
    text-decoration: none;
    color: inherit;
    height: 100%;
    cursor: pointer;
}

.book-card:hover {
    transform: translateY(-6px);
    box-shadow: var(--card-shadow-hover);
    border-color: rgba(102, 126, 234, 0.3);
}

.book-card:active {
    transform: translateY(-3px);
}

/* Card Cover Image */
.book-cover {
    width: 100%;
    aspect-ratio: 16 / 9;
    background: linear-gradient(135deg, var(--card-gradient-from) 0%, var(--card-gradient-to) 100%);
    position: relative;
    overflow: hidden;
}

.book-cover-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.4s cubic-bezier(0.28, 0.11, 0.32, 1);
}

.book-card:hover .book-cover-img {
    transform: scale(1.05);
}

/* Fallback Icon when no image */
.book-cover-icon {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 48px;
    color: rgba(255, 255, 255, 0.8);
}

/* Card Body */
.book-body {
    padding: var(--card-padding);
    display: flex;
    flex-direction: column;
    gap: var(--card-gap);
    flex: 1;
}

/* Title */
.book-title {
    font-family: var(--font-system);
    font-size: 18px;
    font-weight: 600;
    line-height: 1.3;
    letter-spacing: -0.01em;
    color: var(--card-text);
    margin: 0;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* Author */
.book-author {
    font-family: var(--font-system);
    font-size: 14px;
    font-weight: 400;
    line-height: 1.4;
    color: var(--card-text-secondary);
}

/* Tags Container */
.book-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 4px;
}

/* Tag Styles */
.book-tag {
    display: inline-flex;
    align-items: center;
    height: 24px;
    padding: 0 10px;
    font-family: var(--font-system);
    font-size: 12px;
    font-weight: 500;
    color: white;
    border-radius: 12px;
    white-space: nowrap;
}

.book-tag.genre {
    background: linear-gradient(135deg, #0071e3 0%, #005bb5 100%);
}

.book-tag.category {
    background: linear-gradient(135deg, #34c759 0%, #248a3d 100%);
}

/* Rating */
.book-rating {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-top: auto;
    padding-top: 12px;
    border-top: 1px solid var(--card-border);
}

.rating-stars {
    display: flex;
    gap: 2px;
    color: #ffcc00;
    font-size: 14px;
}

.rating-value {
    font-family: var(--font-system);
    font-size: 14px;
    font-weight: 600;
    color: var(--card-text);
}

.rating-count {
    font-family: var(--font-system);
    font-size: 12px;
    font-weight: 400;
    color: var(--card-text-secondary);
}

/* Footer */
.book-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 8px;
}

/* Year & Pages */
.book-info {
    display: flex;
    gap: 12px;
    align-items: center;
}

.book-year,
.book-pages {
    font-family: var(--font-system);
    font-size: 12px;
    font-weight: 500;
    color: var(--card-text-secondary);
}

/* Description */
.book-description {
    font-family: var(--font-system);
    font-size: 14px;
    font-weight: 400;
    line-height: 1.5;
    color: var(--card-text-secondary);
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* Responsive */
@media (max-width: 480px) {
    .book-body {
        padding: 16px;
    }

    .book-title {
        font-size: 16px;
    }

    .book-cover {
        aspect-ratio: 4 / 3;
    }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
    * {
        animation: none !important;
        transition-duration: 0.01ms !important;
    }
}

.book-card:focus-visible {
    outline: 2px solid var(--card-gradient-from);
    outline-offset: 2px;
}


==== FILE: .\frontend\src\styles\BookDetailPage.css ====
/* ============================================
   APPLE PRO BOOK DETAIL PAGE - PREMIUM
   Ultra Smooth Animations & Effects
============================================ */

:root {
    --bd-primary: #667eea;
    --bd-secondary: #764ba2;
    --bd-text: #1d1d1f;
    --bd-text-secondary: #6e6e73;
    --bd-bg: #ffffff;
    --bd-surface: #f5f5f7;
    --bd-border: rgba(0, 0, 0, 0.1);
    --bd-hover: rgba(0, 0, 0, 0.05);
    --bd-glass-bg: rgba(255, 255, 255, 0.8);
    --bd-glass-blur: saturate(180%) blur(20px);
    --bd-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
    --bd-shadow-md: 0 4px 16px rgba(0, 0, 0, 0.12);
    --bd-shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.16);
    --bd-font: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", system-ui, sans-serif;
    --bd-transition: cubic-bezier(0.28, 0.11, 0.32, 1);
    --bd-speed-fast: 0.2s;
    --bd-speed: 0.4s;
    --bd-speed-slow: 0.6s;
}

[data-theme='dark'] {
    --bd-text: #f5f5f7;
    --bd-text-secondary: #98989d;
    --bd-bg: #000000;
    --bd-surface: #1c1c1e;
    --bd-border: rgba(255, 255, 255, 0.15);
    --bd-hover: rgba(255, 255, 255, 0.08);
    --bd-glass-bg: rgba(28, 28, 30, 0.8);
    --bd-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
    --bd-shadow-md: 0 4px 16px rgba(0, 0, 0, 0.5);
    --bd-shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.6);
}

@media (prefers-color-scheme: dark) {
    :root:not([data-theme='light']) {
        --bd-text: #f5f5f7;
        --bd-text-secondary: #98989d;
        --bd-bg: #000000;
        --bd-surface: #1c1c1e;
        --bd-border: rgba(255, 255, 255, 0.15);
        --bd-hover: rgba(255, 255, 255, 0.08);
        --bd-glass-bg: rgba(28, 28, 30, 0.8);
        --bd-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
        --bd-shadow-md: 0 4px 16px rgba(0, 0, 0, 0.5);
        --bd-shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.6);
    }
}

/* Animations */
@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideInLeft {
    from {
        opacity: 0;
        transform: translateX(-30px);
    }

    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes slideInRight {
    from {
        opacity: 0;
        transform: translateX(30px);
    }

    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes scaleIn {
    from {
        opacity: 0;
        transform: scale(0.95);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes shimmer {
    0% {
        background-position: -1000px 0;
    }

    100% {
        background-position: 1000px 0;
    }
}

.book-detail-page {
    width: 100%;
    min-height: 100vh;
    background-color: var(--bd-bg);
    padding: 40px 20px;
    font-family: var(--bd-font);
    animation: fadeIn var(--bd-speed) var(--bd-transition);
}

.book-detail-container {
    max-width: 1200px;
    margin: 0 auto;
}

.book-main-info {
    background: var(--bd-glass-bg);
    backdrop-filter: var(--bd-glass-blur);
    -webkit-backdrop-filter: var(--bd-glass-blur);
    border: 1px solid var(--bd-border);
    border-radius: 16px;
    padding: 48px;
    margin-bottom: 32px;
    box-shadow: var(--bd-shadow-md);
    animation: slideUp var(--bd-speed) var(--bd-transition);
    transition: all var(--bd-speed) var(--bd-transition);
}

.book-main-info:hover {
    box-shadow: var(--bd-shadow-lg);
    border-color: rgba(102, 126, 234, 0.2);
}

.book-detail-header {
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: 48px;
    margin-bottom: 40px;
}

.book-detail-cover {
    width: 100%;
    aspect-ratio: 2/3;
    border-radius: 12px;
    overflow: hidden;
    background-color: var(--bd-surface);
    box-shadow: var(--bd-shadow-lg);
    transition: all var(--bd-speed) var(--bd-transition);
    animation: slideInLeft var(--bd-speed-slow) var(--bd-transition);
    position: relative;
}

.book-detail-cover::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 0) 0%,
            rgba(255, 255, 255, 0.1) 50%,
            rgba(255, 255, 255, 0) 100%);
    opacity: 0;
    transition: opacity var(--bd-speed) var(--bd-transition);
    pointer-events: none;
}

.book-detail-cover:hover::after {
    opacity: 1;
    animation: shimmer 2s ease-in-out infinite;
}

.book-detail-cover img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform var(--bd-speed-slow) var(--bd-transition);
}

.book-detail-cover:hover img {
    transform: scale(1.05);
}

.book-detail-cover-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, var(--bd-primary) 0%, var(--bd-secondary) 100%);
    color: white;
    font-size: 4rem;
    font-weight: 700;
}

.book-detail-info {
    display: flex;
    flex-direction: column;
    animation: slideInRight var(--bd-speed-slow) var(--bd-transition);
}

.book-detail-title {
    font-size: clamp(2rem, 4vw, 3rem);
    font-weight: 700;
    color: var(--bd-text);
    margin-bottom: 16px;
    line-height: 1.2;
    letter-spacing: -0.02em;
    animation: slideUp var(--bd-speed) var(--bd-transition) 0.1s both;
}

.book-detail-author {
    font-size: 1.5rem;
    color: var(--bd-text-secondary);
    margin-bottom: 24px;
    font-weight: 500;
    animation: slideUp var(--bd-speed) var(--bd-transition) 0.2s both;
    transition: color var(--bd-speed-fast) var(--bd-transition);
}

.book-detail-author:hover {
    color: var(--bd-primary);
}

.book-detail-author-prefix {
    color: var(--bd-text-secondary);
    opacity: 0.7;
    font-weight: 400;
    font-size: 1rem;
}

.book-detail-author-link {
    color: inherit;
    text-decoration: none;
    transition: color var(--bd-speed-fast) var(--bd-transition);
    position: relative;
}

.book-detail-author-link::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 2px;
    background: var(--bd-primary);
    transition: width var(--bd-speed) var(--bd-transition);
}

.book-detail-author-link:hover::after {
    width: 100%;
}

.book-detail-tags {
    display: flex;
    gap: 12px;
    margin-bottom: 32px;
    flex-wrap: wrap;
    animation: slideUp var(--bd-speed) var(--bd-transition) 0.3s both;
}

.detail-tag {
    padding: 8px 16px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    color: white;
    background: linear-gradient(135deg, var(--bd-primary) 0%, var(--bd-secondary) 100%);
    display: inline-flex;
    align-items: center;
    gap: 6px;
    transition: all var(--bd-speed) var(--bd-transition);
    cursor: pointer;
    box-shadow: var(--bd-shadow-sm);
    animation: scaleIn var(--bd-speed) var(--bd-transition) both;
}

.detail-tag:nth-child(1) {
    animation-delay: 0.1s;
}

.detail-tag:nth-child(2) {
    animation-delay: 0.15s;
}

.detail-tag:nth-child(3) {
    animation-delay: 0.2s;
}

.detail-tag:nth-child(4) {
    animation-delay: 0.25s;
}

.detail-tag:nth-child(5) {
    animation-delay: 0.3s;
}

.detail-tag:hover {
    transform: translateY(-2px);
    box-shadow: var(--bd-shadow-md);
}

.detail-tag.tag-genre {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.detail-tag.tag-category {
    background: linear-gradient(135deg, #667eea 0%, #5b73e8 100%);
}

.detail-tag.tag-status {
    background: linear-gradient(135deg, #5b73e8 0%, #667eea 100%);
}

.book-meta-info {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 24px;
    padding: 24px;
    background-color: var(--bd-surface);
    border-radius: 12px;
    margin-bottom: 32px;
    border: 1px solid var(--bd-border);
    animation: slideUp var(--bd-speed) var(--bd-transition) 0.4s both;
    transition: all var(--bd-speed) var(--bd-transition);
}

.book-meta-info:hover {
    box-shadow: var(--bd-shadow-sm);
    border-color: rgba(102, 126, 234, 0.2);
}

.book-meta-item {
    display: flex;
    flex-direction: column;
    gap: 8px;
    animation: fadeIn var(--bd-speed) var(--bd-transition) both;
}

.book-meta-item:nth-child(1) {
    animation-delay: 0.1s;
}

.book-meta-item:nth-child(2) {
    animation-delay: 0.15s;
}

.book-meta-item:nth-child(3) {
    animation-delay: 0.2s;
}

.book-meta-item:nth-child(4) {
    animation-delay: 0.25s;
}

.book-meta-label {
    font-size: 12px;
    color: var(--bd-text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-weight: 600;
}

.book-meta-value {
    font-size: 1.125rem;
    color: var(--bd-text);
    font-weight: 700;
    transition: color var(--bd-speed-fast) var(--bd-transition);
}

.book-meta-value-gradient {
    background: linear-gradient(135deg, var(--bd-primary) 0%, var(--bd-secondary) 100%);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.book-description {
    margin-bottom: 32px;
    animation: slideUp var(--bd-speed) var(--bd-transition) 0.5s both;
}

.book-description h3 {
    font-size: 1.5rem;
    margin-bottom: 16px;
    color: var(--bd-text);
    font-weight: 700;
}

.book-description p {
    color: var(--bd-text);
    opacity: 0.85;
    line-height: 1.7;
    font-size: 1rem;
    margin-bottom: 16px;
    transition: opacity var(--bd-speed-fast) var(--bd-transition);
}

.book-description p:hover {
    opacity: 1;
}

.book-rating-section {
    margin-bottom: 32px;
    padding: 24px;
    background-color: var(--bd-surface);
    border-radius: 12px;
    border: 1px solid var(--bd-border);
    animation: slideUp var(--bd-speed) var(--bd-transition) 0.6s both;
    transition: all var(--bd-speed) var(--bd-transition);
}

.book-rating-section:hover {
    box-shadow: var(--bd-shadow-sm);
    border-color: rgba(102, 126, 234, 0.2);
}

.average-rating {
    margin-bottom: 24px;
    display: flex;
    align-items: center;
    gap: 16px;
    flex-wrap: wrap;
}

.rating-label {
    font-weight: 600;
    color: var(--bd-text);
    font-size: 1rem;
}

.rating-value {
    font-weight: 700;
    font-size: 1.5rem;
    background: linear-gradient(135deg, var(--bd-primary) 0%, var(--bd-secondary) 100%);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.user-rating {
    margin-bottom: 24px;
}

.stars {
    display: inline-flex;
    gap: 10px;
    margin-top: 8px;
}

.star {
    background: none;
    font-size: 1.8rem;
    color: var(--bd-border);
    transition: color var(--bd-speed-fast) var(--bd-transition);
    padding: 0;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    border: none;
    outline: none;
}

.star:hover {
    color: rgba(102, 126, 234, 0.6);
}

.star.active {
    color: var(--bd-primary);
}

.star.half {
    position: relative;
    color: var(--bd-border);
}

.star.half::before {
    content: '★';
    position: absolute;
    left: 0;
    top: 0;
    width: 50%;
    overflow: hidden;
    color: var(--bd-primary);
}

.book-actions {
    display: flex;
    gap: 16px;
    flex-wrap: wrap;
    margin-top: 32px;
    animation: slideUp var(--bd-speed) var(--bd-transition) 0.7s both;
}

.btn-action {
    padding: 14px 28px;
    border-radius: 12px;
    font-weight: 600;
    font-size: 1rem;
    font-family: var(--bd-font);
    transition: all var(--bd-speed) var(--bd-transition);
    border: 1px solid var(--bd-border);
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    white-space: nowrap;
    outline: none;
    position: relative;
    overflow: hidden;
}

.btn-action::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
    opacity: 0;
    transition: opacity var(--bd-speed) var(--bd-transition);
}

.btn-action:hover::before {
    opacity: 1;
}

.btn-read,
.btn-download {
    background: linear-gradient(135deg, var(--bd-primary) 0%, var(--bd-secondary) 100%);
    color: white;
    border-color: transparent;
    box-shadow: var(--bd-shadow-sm);
}

.btn-read:hover,
.btn-download:hover {
    box-shadow: var(--bd-shadow-md);
    transform: translateY(-2px);
}

.btn-action:not(.btn-read):not(.btn-download) {
    background-color: var(--bd-surface);
    color: var(--bd-text);
    box-shadow: var(--bd-shadow-sm);
}

.btn-action:not(.btn-read):not(.btn-download):hover {
    box-shadow: var(--bd-shadow-md);
    border-color: rgba(102, 126, 234, 0.3);
    transform: translateY(-2px);
}

.btn-action.active {
    background: linear-gradient(135deg, var(--bd-primary) 0%, var(--bd-secondary) 100%);
    color: white !important;
    border-color: transparent;
}

.btn-action.active *,
.btn-action.active:hover,
.btn-action.active:hover *,
.btn-action.active:focus,
.btn-action.active:focus * {
    color: white !important;
}

.pdf-viewer {
    margin-bottom: 32px;
    border-radius: 12px;
    overflow: hidden;
    border: 1px solid var(--bd-border);
    background-color: var(--bd-surface);
    box-shadow: var(--bd-shadow-md);
    animation: scaleIn var(--bd-speed) var(--bd-transition) 0.4s both;
    transition: all var(--bd-speed) var(--bd-transition);
}

.pdf-viewer:hover {
    box-shadow: var(--bd-shadow-lg);
}

.pdf-viewer-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 24px;
    background-color: var(--bd-surface);
    border-bottom: 1px solid var(--bd-border);
}

.pdf-viewer-title {
    font-size: 1rem;
    font-weight: 700;
    color: var(--bd-text);
}

.pdf-viewer-controls {
    display: flex;
    gap: 12px;
}

.pdf-viewer-btn {
    padding: 8px 16px;
    background-color: var(--bd-bg);
    color: var(--bd-text);
    border: 1px solid var(--bd-border);
    border-radius: 8px;
    font-weight: 600;
    font-size: 14px;
    cursor: pointer;
    transition: all var(--bd-speed) var(--bd-transition);
}

.pdf-viewer-btn:hover {
    box-shadow: var(--bd-shadow-sm);
    border-color: rgba(102, 126, 234, 0.3);
    transform: translateY(-2px);
}

.pdf-viewer iframe {
    display: block;
    width: 100%;
    height: 600px;
    border: none;
}

.reviews-section {
    background: var(--bd-glass-bg);
    backdrop-filter: var(--bd-glass-blur);
    -webkit-backdrop-filter: var(--bd-glass-blur);
    padding: 48px;
    border-radius: 16px;
    border: 1px solid var(--bd-border);
    box-shadow: var(--bd-shadow-md);
    animation: slideUp var(--bd-speed-slow) var(--bd-transition) 0.5s both;
    transition: all var(--bd-speed) var(--bd-transition);
}

.reviews-section:hover {
    box-shadow: var(--bd-shadow-lg);
    border-color: rgba(102, 126, 234, 0.2);
}

.reviews-section h2 {
    font-size: 2rem;
    margin-bottom: 32px;
    color: var(--bd-text);
    font-weight: 700;
    animation: fadeIn var(--bd-speed) var(--bd-transition) 0.2s both;
}

.review-form {
    margin-bottom: 40px;
    padding: 32px;
    background-color: var(--bd-surface);
    border-radius: 12px;
    border: 1px solid var(--bd-border);
    animation: slideUp var(--bd-speed) var(--bd-transition) 0.3s both;
    transition: all var(--bd-speed) var(--bd-transition);
}

.review-form:hover {
    box-shadow: var(--bd-shadow-sm);
    border-color: rgba(102, 126, 234, 0.2);
}

.review-form-title {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--bd-text);
    margin-bottom: 20px;
}

.review-rating-input {
    margin-bottom: 24px;
}

.review-rating-label {
    display: block;
    font-weight: 600;
    color: var(--bd-text);
    margin-bottom: 12px;
    font-size: 14px;
}

.review-textarea {
    width: 100%;
    min-height: 120px;
    padding: 16px;
    border: 1px solid var(--bd-border);
    border-radius: 12px;
    font-size: 1rem;
    background-color: var(--bd-bg);
    color: var(--bd-text);
    resize: none !important;
    margin-bottom: 20px;
    font-family: var(--bd-font);
    line-height: 1.6;
    outline: none !important;
    box-shadow: none;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

.review-textarea:hover {
    border-color: rgba(102, 126, 234, 0.4);
}

.review-textarea:focus {
    border-color: var(--bd-primary) !important;
    box-shadow: inset 0 0 0 1px var(--bd-primary), 0 0 0 3px rgba(102, 126, 234, 0.1) !important;
    outline: none !important;
}

.review-textarea:focus-visible {
    outline: none !important;
}

.review-textarea::placeholder {
    color: var(--bd-text-secondary);
}

.btn-submit {
    padding: 14px 32px;
    border-radius: 12px;
    font-weight: 600;
    font-size: 1rem;
    font-family: var(--bd-font);
    background: linear-gradient(135deg, var(--bd-primary) 0%, var(--bd-secondary) 100%);
    color: white;
    border: none;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    outline: none;
    position: relative;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(102, 126, 234, 0.25);
    transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1),
        box-shadow 0.4s cubic-bezier(0.34, 1.56, 0.64, 1),
        filter 0.3s ease;
    will-change: transform, box-shadow;
}

.btn-submit::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at center, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
    opacity: 0;
    transition: opacity 0.5s ease;
    pointer-events: none;
}

.btn-submit:hover {
    transform: translateY(-4px) scale(1.03);
    box-shadow: 0 12px 28px rgba(102, 126, 234, 0.45),
        0 6px 12px rgba(102, 126, 234, 0.25);
    filter: brightness(1.05);
}

.btn-submit:hover::before {
    opacity: 1;
}

.btn-submit:active {
    transform: translateY(-2px) scale(1.01);
    box-shadow: 0 6px 16px rgba(102, 126, 234, 0.35);
    transition: transform 0.15s cubic-bezier(0.4, 0, 0.2, 1),
        box-shadow 0.15s cubic-bezier(0.4, 0, 0.2, 1);
}

.btn-submit:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
    box-shadow: 0 2px 8px rgba(102, 126, 234, 0.15);
    filter: none;
}

.btn-submit:disabled:hover {
    transform: none;
    box-shadow: 0 2px 8px rgba(102, 126, 234, 0.15);
    filter: none;
}

.reviews-list {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.reviews-list-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    animation: fadeIn var(--bd-speed) var(--bd-transition) 0.4s both;
}

.reviews-count {
    font-size: 1rem;
    color: var(--bd-text-secondary);
    font-weight: 600;
}

.no-reviews {
    text-align: center;
    color: var(--bd-text-secondary);
    padding: 48px 0;
    font-size: 1.125rem;
    animation: fadeIn var(--bd-speed) var(--bd-transition) 0.5s both;
}

.review-item {
    padding: 24px;
    background-color: var(--bd-surface);
    border-radius: 12px;
    border: 1px solid var(--bd-border);
    transition: all var(--bd-speed) var(--bd-transition);
    animation: slideUp var(--bd-speed) var(--bd-transition) both;
}

.review-item:nth-child(1) {
    animation-delay: 0.1s;
}

.review-item:nth-child(2) {
    animation-delay: 0.15s;
}

.review-item:nth-child(3) {
    animation-delay: 0.2s;
}

.review-item:nth-child(4) {
    animation-delay: 0.25s;
}

.review-item:nth-child(5) {
    animation-delay: 0.3s;
}

.review-item:hover {
    box-shadow: var(--bd-shadow-md);
    border-color: rgba(102, 126, 234, 0.3);
    transform: translateY(-2px);
}

.review-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 16px;
    gap: 16px;
}

.review-author-info {
    display: flex;
    align-items: center;
    gap: 12px;
}

.review-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--bd-primary) 0%, var(--bd-secondary) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 700;
    overflow: hidden;
    transition: transform var(--bd-speed) var(--bd-transition);
}

.review-avatar:hover {
    transform: scale(1.1);
}

.review-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.review-author-details {
    display: flex;
    flex-direction: column;
}

.review-author {
    font-weight: 600;
    color: var(--bd-text);
    font-size: 1rem;
}

.review-date {
    color: var(--bd-text-secondary);
    font-size: 12px;
}

.review-rating {
    display: flex;
    gap: 4px;
}

.review-rating .star {
    width: 18px;
    height: 18px;
    font-size: 1rem;
    pointer-events: none;
    cursor: default;
}

.review-text {
    color: var(--bd-text);
    opacity: 0.85;
    line-height: 1.7;
    font-size: 1rem;
    transition: opacity var(--bd-speed-fast) var(--bd-transition);
}

.review-item:hover .review-text {
    opacity: 1;
}

.review-actions {
    display: flex;
    gap: 16px;
    align-items: center;
    padding-top: 16px;
    margin-top: 16px;
    border-top: 1px solid var(--bd-border);
}

.review-action-btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background-color: transparent;
    color: var(--bd-text-secondary);
    border: none;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--bd-speed-fast) var(--bd-transition);
}

.review-action-btn:hover {
    color: var(--bd-text);
    background-color: var(--bd-hover);
}

.review-action-btn.active {
    color: var(--bd-primary);
}

.load-more {
    text-align: center;
    margin-top: 32px;
    animation: fadeIn var(--bd-speed) var(--bd-transition) 0.6s both;
}

.btn-load-more {
    padding: 12px 32px;
    background-color: var(--bd-surface);
    color: var(--bd-text);
    border: 1px solid var(--bd-border);
    border-radius: 12px;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    transition: all var(--bd-speed) var(--bd-transition);
    font-family: var(--bd-font);
}

.btn-load-more:hover {
    box-shadow: var(--bd-shadow-md);
    border-color: rgba(102, 126, 234, 0.3);
    transform: translateY(-2px);
}

@media (max-width: 768px) {
    .book-main-info {
        padding: 32px 24px;
    }

    .book-detail-header {
        grid-template-columns: 1fr;
        gap: 32px;
    }

    .book-detail-cover {
        max-width: 280px;
        margin: 0 auto;
    }

    .book-meta-info {
        grid-template-columns: repeat(2, 1fr);
    }

    .book-actions {
        flex-direction: column;
    }

    .btn-action {
        width: 100%;
    }

    .reviews-section {
        padding: 32px 24px;
    }
}

@media (max-width: 480px) {
    .book-detail-page {
        padding: 20px 16px;
    }

    .book-main-info {
        padding: 24px 20px;
    }

    .book-meta-info {
        grid-template-columns: 1fr;
    }

    .reviews-section {
        padding: 24px 20px;
    }

    .review-form {
        padding: 24px 20px;
    }
}

@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation: none !important;
        transition-duration: 0.01ms !important;
    }
}

.btn-action:focus-visible,
.btn-submit:focus-visible,
.star:focus-visible {
    outline: 2px solid var(--bd-primary);
    outline-offset: 2px;
}

.btn-submit {
    padding: 14px 32px;
    border-radius: 12px;
    font-weight: 600;
    font-size: 1rem;
    font-family: var(--bd-font);
    background: linear-gradient(135deg, var(--bd-primary) 0%, var(--bd-secondary) 100%);
    color: white;
    border: none;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    outline: none;
    position: relative;
    overflow: hidden;
    box-shadow: var(--bd-shadow-sm);
    transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1),
        box-shadow 0.4s cubic-bezier(0.34, 1.56, 0.64, 1),
        filter 0.3s ease;
}

.btn-submit::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, transparent 100%);
    opacity: 0;
    transition: opacity var(--bd-speed) var(--bd-transition);
}

.btn-submit:hover {
    box-shadow: var(--bd-shadow-md);
    transform: translateY(-2px);
}

.btn-submit:hover::before {
    opacity: 1;
}

.btn-submit:active {
    transform: translateY(0);
    box-shadow: var(--bd-shadow-sm);
}

.btn-submit:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
    box-shadow: var(--bd-shadow-sm);
}

.btn-submit:disabled:hover {
    transform: none;
    box-shadow: var(--bd-shadow-sm);
}


==== FILE: .\frontend\src\styles\BooksPage.css ====
/* ============================================
   APPLE PRO BOOKS PAGE - GRADIENT HEADERS
   Perfect Contrast for Light & Dark
============================================ */

:root {
    /* Light Theme - По умолчанию */
    --books-primary: #667eea;
    --books-secondary: #764ba2;
    --books-text: #1d1d1f;
    --books-text-secondary: #6e6e73;
    --books-bg: #ffffff;
    --books-surface: #f5f5f7;
    --books-border: rgba(0, 0, 0, 0.1);
    --books-hover: rgba(0, 0, 0, 0.05);

    /* Gradient для заголовков - ТЕМНЫЙ на светлом фоне */
    --books-gradient-text: linear-gradient(135deg, #1d1d1f 0%, #667eea 50%, #764ba2 100%);

    /* Glassmorphism */
    --glass-bg: rgba(255, 255, 255, 0.8);
    --glass-blur: saturate(180%) blur(20px);

    /* Shadows */
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
    --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.12);
    --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.16);

    /* Typography */
    --font-apple: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", system-ui, sans-serif;

    /* Spacing */
    --spacing-xs: 8px;
    --spacing-sm: 12px;
    --spacing-md: 20px;
    --spacing-lg: 32px;
    --spacing-xl: 48px;
    --spacing-2xl: 80px;

    /* Radius */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;

    /* Transitions */
    --transition: cubic-bezier(0.28, 0.11, 0.32, 1);
    --speed: 0.4s;
}

/* Dark Theme */
[data-theme='dark'] {
    --books-text: #f5f5f7;
    --books-text-secondary: #98989d;
    --books-bg: #000000;
    --books-surface: #1c1c1e;
    --books-border: rgba(255, 255, 255, 0.15);
    --books-hover: rgba(255, 255, 255, 0.08);

    /* Gradient для заголовков - СВЕТЛЫЙ на темном фоне */
    --books-gradient-text: linear-gradient(135deg, #ffffff 0%, #667eea 50%, #764ba2 100%);

    --glass-bg: rgba(28, 28, 30, 0.8);
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
    --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.5);
    --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.6);
}

@media (prefers-color-scheme: dark) {
    :root:not([data-theme='light']) {
        --books-text: #f5f5f7;
        --books-text-secondary: #98989d;
        --books-bg: #000000;
        --books-surface: #1c1c1e;
        --books-border: rgba(255, 255, 255, 0.15);
        --books-hover: rgba(255, 255, 255, 0.08);
        --books-gradient-text: linear-gradient(135deg, #ffffff 0%, #667eea 50%, #764ba2 100%);
        --glass-bg: rgba(28, 28, 30, 0.8);
        --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
        --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.5);
        --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.6);
    }
}

/* Page Container */
.books-page {
    width: 100%;
    min-height: 100vh;
    background: var(--books-bg);
    transition: background var(--speed) ease;
    position: relative;
}

/* Subtle Background Gradient */
.books-page::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 500px;
    background: radial-gradient(circle at 50% 0%, rgba(102, 126, 234, 0.03), transparent 70%);
    pointer-events: none;
    z-index: 0;
}

.books-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: var(--spacing-2xl) var(--spacing-md);
    position: relative;
    z-index: 1;
}

/* Page Header */
.page-header {
    text-align: center;
    margin-bottom: var(--spacing-2xl);
    opacity: 0;
    animation: fadeInUp 0.8s 0.1s var(--transition) forwards;
}

.page-header h1 {
    font-family: var(--font-apple);
    font-size: clamp(40px, 6vw, 72px);
    font-weight: 700;
    line-height: 1.05;
    letter-spacing: -0.02em;
    margin: 0 0 var(--spacing-md);

    /* КРАСИВЫЙ ГРАДИЕНТ */
    background: var(--books-gradient-text);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-size: 200% auto;
}

.page-subtitle {
    font-size: clamp(18px, 2.5vw, 24px);
    line-height: 1.5;
    font-weight: 400;
    letter-spacing: 0.005em;
    color: var(--books-text-secondary);
    max-width: 600px;
    margin: 0 auto;
}

/* Search Section */
.books-controls {
    margin-bottom: var(--spacing-xl);
    opacity: 0;
    animation: fadeInUp 0.8s 0.2s var(--transition) forwards;
}

.search-wrapper {
    max-width: 720px;
    margin: 0 auto var(--spacing-lg);
    position: relative;
}

.search-input {
    width: 100%;
    height: 56px;
    padding: 0 56px 0 24px;
    font-size: 17px;
    font-weight: 400;
    font-family: var(--font-apple);
    color: var(--books-text);
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border: 1px solid var(--books-border);
    border-radius: var(--radius-md);
    outline: none;
    transition: all var(--speed) var(--transition);
    box-shadow: var(--shadow-sm);
}

.search-input::placeholder {
    color: var(--books-text-secondary);
}

.search-input:hover {
    border-color: rgba(102, 126, 234, 0.3);
    box-shadow: var(--shadow-md);
}

.search-input:focus {
    border-color: var(--books-primary);
    box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
}

.search-icon {
    position: absolute;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--books-text-secondary);
    pointer-events: none;
    font-size: 20px;
    transition: color var(--speed) var(--transition);
}

.search-input:focus~.search-icon {
    color: var(--books-primary);
}

/* Filters Bar */
.filters-bar {
    display: flex;
    justify-content: center;
    gap: var(--spacing-sm);
    flex-wrap: wrap;
    opacity: 0;
    animation: fadeInUp 0.8s 0.3s var(--transition) forwards;
}

/* Filter Buttons */
.filter-button,
.sort-select,
.view-button {
    height: 44px;
    padding: 0 24px;
    font-size: 15px;
    font-weight: 500;
    font-family: var(--font-apple);
    color: var(--books-text);
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border: 1px solid var(--books-border);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--speed) var(--transition);
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-xs);
    box-shadow: var(--shadow-sm);
}

.filter-button:hover,
.sort-select:hover,
.view-button:hover {
    border-color: rgba(102, 126, 234, 0.4);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.filter-button.active,
.view-button.active {
    background: linear-gradient(135deg, var(--books-primary) 0%, var(--books-secondary) 100%);
    border-color: transparent;
    color: white;
    box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
}

.view-button {
    width: 44px;
    padding: 0;
    justify-content: center;
}

/* Books Grid */
.books-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: var(--spacing-lg);
    margin-top: var(--spacing-xl);
}

.books-grid.list-view {
    grid-template-columns: 1fr;
}

/* Book Card Wrapper */
.book-card-wrapper {
    opacity: 0;
    transform: translateY(40px);
    transition: all 0.6s var(--transition);
}

.book-card-wrapper.animate {
    opacity: 1;
    transform: translateY(0);
}

/* Empty State */
.books-empty {
    text-align: center;
    padding: var(--spacing-2xl) var(--spacing-md);
    opacity: 0;
    animation: fadeInUp 0.8s var(--transition) forwards;
}

.books-empty-icon {
    font-size: 80px;
    margin-bottom: var(--spacing-lg);
    opacity: 0.6;
}

.books-empty-title {
    font-family: var(--font-apple);
    font-size: 32px;
    font-weight: 600;
    line-height: 1.2;
    letter-spacing: -0.01em;
    color: var(--books-text);
    margin: 0 0 var(--spacing-md);
}

.books-empty-text {
    font-size: 18px;
    line-height: 1.5;
    color: var(--books-text-secondary);
    margin: 0 0 var(--spacing-xl);
    max-width: 400px;
    margin-left: auto;
    margin-right: auto;
}

.books-empty-button {
    height: 52px;
    padding: 0 36px;
    font-size: 17px;
    font-weight: 600;
    font-family: var(--font-apple);
    color: white;
    background: linear-gradient(135deg, var(--books-primary) 0%, var(--books-secondary) 100%);
    border: none;
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--speed) var(--transition);
    box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
    position: relative;
    overflow: hidden;
}

.books-empty-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.6s var(--transition);
}

.books-empty-button:hover::before {
    left: 100%;
}

.books-empty-button:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 6px 24px rgba(102, 126, 234, 0.4);
}

/* Loading State */
.books-loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-2xl) var(--spacing-md);
    min-height: 400px;
}

.loading-spinner {
    width: 52px;
    height: 52px;
    border: 3px solid var(--books-border);
    border-top-color: var(--books-primary);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    margin-bottom: var(--spacing-lg);
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

.loading-text {
    font-size: 17px;
    line-height: 1.5;
    color: var(--books-text-secondary);
    font-family: var(--font-apple);
}

/* Animations */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Responsive */
@media (max-width: 1024px) {
    .books-container {
        padding: var(--spacing-xl) var(--spacing-md);
    }

    .books-grid {
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
        gap: var(--spacing-md);
    }
}

@media (max-width: 768px) {
    .page-header h1 {
        font-size: clamp(32px, 8vw, 48px);
    }

    .books-grid {
        grid-template-columns: 1fr;
    }

    .filters-bar {
        flex-direction: column;
    }

    .filter-button,
    .sort-select,
    .view-button {
        width: 100%;
    }
}

@media (max-width: 480px) {
    .books-container {
        padding: var(--spacing-lg) var(--spacing-sm);
    }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* Focus States */
.search-input:focus-visible,
.filter-button:focus-visible,
.sort-select:focus-visible,
.view-button:focus-visible,
.books-empty-button:focus-visible {
    outline: 2px solid var(--books-primary);
    outline-offset: 3px;
}


==== FILE: .\frontend\src\styles\FavoritesPage.css ====
/* ============================================
   APPLE PRO FAVORITES PAGE - GRADIENT HEADERS
   Perfect Contrast for Light & Dark
============================================ */

:root {
    /* Light Theme - По умолчанию */
    --fav-primary: #667eea;
    --fav-secondary: #764ba2;
    --fav-text: #1d1d1f;
    --fav-text-secondary: #6e6e73;
    --fav-bg: #ffffff;
    --fav-surface: #f5f5f7;
    --fav-border: rgba(0, 0, 0, 0.1);
    --fav-hover: rgba(0, 0, 0, 0.05);

    /* Gradient для заголовков - ТЕМНЫЙ на светлом фоне */
    --fav-gradient-text: linear-gradient(135deg, #1d1d1f 0%, #667eea 50%, #764ba2 100%);

    /* Glassmorphism */
    --fav-glass-bg: rgba(255, 255, 255, 0.8);
    --fav-glass-blur: saturate(180%) blur(20px);

    /* Shadows */
    --fav-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
    --fav-shadow-md: 0 4px 16px rgba(0, 0, 0, 0.12);
    --fav-shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.16);

    /* Typography */
    --fav-font: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", system-ui, sans-serif;

    /* Spacing */
    --fav-spacing-sm: 12px;
    --fav-spacing-md: 20px;
    --fav-spacing-lg: 32px;
    --fav-spacing-xl: 48px;
    --fav-spacing-2xl: 80px;

    /* Radius */
    --fav-radius: 12px;
    --fav-radius-lg: 16px;

    /* Transitions */
    --fav-transition: cubic-bezier(0.28, 0.11, 0.32, 1);
    --fav-speed: 0.4s;
}

/* Dark Theme */
[data-theme='dark'] {
    --fav-text: #f5f5f7;
    --fav-text-secondary: #98989d;
    --fav-bg: #000000;
    --fav-surface: #1c1c1e;
    --fav-border: rgba(255, 255, 255, 0.15);
    --fav-hover: rgba(255, 255, 255, 0.08);

    /* Gradient для заголовков - СВЕТЛЫЙ на темном фоне */
    --fav-gradient-text: linear-gradient(135deg, #ffffff 0%, #667eea 50%, #764ba2 100%);

    --fav-glass-bg: rgba(28, 28, 30, 0.8);
    --fav-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
    --fav-shadow-md: 0 4px 16px rgba(0, 0, 0, 0.5);
    --fav-shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.6);
}

@media (prefers-color-scheme: dark) {
    :root:not([data-theme='light']) {
        --fav-text: #f5f5f7;
        --fav-text-secondary: #98989d;
        --fav-bg: #000000;
        --fav-surface: #1c1c1e;
        --fav-border: rgba(255, 255, 255, 0.15);
        --fav-hover: rgba(255, 255, 255, 0.08);
        --fav-gradient-text: linear-gradient(135deg, #ffffff 0%, #667eea 50%, #764ba2 100%);
        --fav-glass-bg: rgba(28, 28, 30, 0.8);
        --fav-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
        --fav-shadow-md: 0 4px 16px rgba(0, 0, 0, 0.5);
        --fav-shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.6);
    }
}

/* Page Container */
.favorites-page {
    width: 100%;
    min-height: 100vh;
    background: var(--fav-bg);
    transition: background var(--fav-speed) ease;
    position: relative;
}

/* Subtle Background Gradient */
.favorites-page::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 500px;
    background: radial-gradient(circle at 50% 0%, rgba(102, 126, 234, 0.03), transparent 70%);
    pointer-events: none;
    z-index: 0;
}

.favorites-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: var(--fav-spacing-2xl) var(--fav-spacing-md);
    position: relative;
    z-index: 1;
}

/* Page Header */
.page-header {
    text-align: center;
    margin-bottom: var(--fav-spacing-2xl);
    opacity: 0;
    animation: fadeInUp 0.8s 0.1s var(--fav-transition) forwards;
}

.page-header h1 {
    font-family: var(--fav-font);
    font-size: clamp(40px, 6vw, 72px);
    font-weight: 700;
    line-height: 1.05;
    letter-spacing: -0.02em;
    margin: 0 0 var(--fav-spacing-md);

    /* КРАСИВЫЙ ГРАДИЕНТ */
    background: var(--fav-gradient-text);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-size: 200% auto;
}

.page-subtitle {
    font-size: clamp(18px, 2.5vw, 24px);
    line-height: 1.5;
    font-weight: 400;
    letter-spacing: 0.005em;
    color: var(--fav-text-secondary);
    max-width: 600px;
    margin: 0 auto;
}

/* Books Grid */
.favorites-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: var(--fav-spacing-lg);
    opacity: 0;
    animation: fadeInUp 0.8s 0.2s var(--fav-transition) forwards;
}

/* Empty State */
.favorites-empty {
    text-align: center;
    padding: var(--fav-spacing-2xl) var(--fav-spacing-md);
    opacity: 0;
    animation: fadeInUp 0.8s var(--fav-transition) forwards;
}

.favorites-empty-icon {
    font-size: 80px;
    margin-bottom: var(--fav-spacing-lg);
    opacity: 0.6;
    filter: grayscale(0.3);
}

.favorites-empty-title {
    font-family: var(--fav-font);
    font-size: 32px;
    font-weight: 600;
    line-height: 1.2;
    letter-spacing: -0.01em;
    color: var(--fav-text);
    margin: 0 0 var(--fav-spacing-md);
}

.favorites-empty-text {
    font-size: 18px;
    line-height: 1.5;
    color: var(--fav-text-secondary);
    margin: 0 0 var(--fav-spacing-2xl);
    max-width: 400px;
    margin-left: auto;
    margin-right: auto;
}

.favorites-empty-button {
    height: 52px;
    padding: 0 36px;
    font-size: 17px;
    font-weight: 600;
    font-family: var(--fav-font);
    color: white;
    background: linear-gradient(135deg, var(--fav-primary) 0%, var(--fav-secondary) 100%);
    border: none;
    border-radius: var(--fav-radius);
    cursor: pointer;
    transition: all var(--fav-speed) var(--fav-transition);
    box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
    position: relative;
    overflow: hidden;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.favorites-empty-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.6s var(--fav-transition);
}

.favorites-empty-button:hover::before {
    left: 100%;
}

.favorites-empty-button:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 6px 24px rgba(102, 126, 234, 0.4);
}

.favorites-empty-button:active {
    transform: translateY(0) scale(0.98);
}

/* Loading State */
.favorites-loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--fav-spacing-2xl) var(--fav-spacing-md);
    min-height: 400px;
}

.loading-spinner {
    width: 52px;
    height: 52px;
    border: 3px solid var(--fav-border);
    border-top-color: var(--fav-primary);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    margin-bottom: var(--fav-spacing-lg);
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

.loading-text {
    font-size: 17px;
    line-height: 1.5;
    color: var(--fav-text-secondary);
    font-family: var(--fav-font);
}

/* Animations */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Responsive */
@media (max-width: 1024px) {
    .favorites-container {
        padding: var(--fav-spacing-xl) var(--fav-spacing-md);
    }

    .favorites-grid {
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
        gap: var(--fav-spacing-md);
    }
}

@media (max-width: 768px) {
    .page-header h1 {
        font-size: clamp(32px, 8vw, 48px);
    }

    .favorites-grid {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 480px) {
    .favorites-container {
        padding: var(--fav-spacing-lg) var(--fav-spacing-sm);
    }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}


==== FILE: .\frontend\src\styles\Iridescence.css ====
.iridescence-container {
    width: 100%;
    height: 100%;
    position: absolute;
    inset: 0;
    z-index: 0;
    /* Постоянный градиент - отображается СРАЗУ */
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.iridescence-container canvas {
    width: 100%;
    height: 100%;
    display: block;
    /* Canvas рендерится ПОВЕРХ градиента */
    position: absolute;
    top: 0;
    left: 0;
}


==== FILE: .\frontend\src\styles\LandingPage.css ====
/* ============================================
   APPLE PRO STYLE - PERFECT EDITION 2025
   Clean & Consistent Design
============================================ */

:root {
    /* Apple Color System */
    --apple-blue: #0071e3;
    --apple-blue-hover: #0077ed;
    --apple-blue-dark: #005bb5;
    --apple-gray-900: #1d1d1f;
    --apple-gray-100: #f5f5f7;
    --apple-gray-50: #fafafa;
    --apple-text-primary: #1d1d1f;
    --apple-text-secondary: #86868b;
    --apple-white: #ffffff;
    --apple-black: #000000;

    /* Clean Gradient */
    --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    --gradient-accent: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);

    /* Glassmorphism - Light Mode */
    --glass-bg: rgba(255, 255, 255, 0.75);
    --glass-border: rgba(255, 255, 255, 0.18);
    --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
    --glass-blur: saturate(180%) blur(20px);

    /* Shadows */
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
    --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.12);
    --shadow-lg: 0 12px 48px rgba(0, 0, 0, 0.18);
    --shadow-xl: 0 20px 64px rgba(0, 0, 0, 0.24);

    /* Typography */
    --font-display: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    --font-text: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;

    /* Spacing System */
    --spacing-xs: 8px;
    --spacing-sm: 16px;
    --spacing-md: 24px;
    --spacing-lg: 40px;
    --spacing-xl: 60px;
    --spacing-2xl: 80px;
    --spacing-3xl: 120px;

    /* Transitions */
    --transition-smooth: cubic-bezier(0.28, 0.11, 0.32, 1);

    /* Border Radius */
    --radius-button: 12px;
    --radius-lg: 16px;
    --radius-xl: 24px;
}

/* Dark Mode */
[data-theme='dark'],
@media (prefers-color-scheme: dark) {
    :root:not([data-theme='light']) {
        --apple-gray-100: #000000;
        --apple-gray-50: #0a0a0a;
        --apple-text-primary: #f5f5f7;
        --apple-text-secondary: #a1a1a6;
        --glass-bg: rgba(29, 29, 31, 0.75);
        --glass-border: rgba(255, 255, 255, 0.12);
        --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.4);
        --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
        --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.5);
        --shadow-lg: 0 12px 48px rgba(0, 0, 0, 0.6);
        --shadow-xl: 0 20px 64px rgba(0, 0, 0, 0.7);
    }
}

[data-theme='dark'] {
    --apple-gray-100: #000000;
    --apple-gray-50: #0a0a0a;
    --apple-text-primary: #f5f5f7;
    --apple-text-secondary: #a1a1a6;
    --glass-bg: rgba(29, 29, 31, 0.75);
    --glass-border: rgba(255, 255, 255, 0.12);
    --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.4);
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
    --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.5);
    --shadow-lg: 0 12px 48px rgba(0, 0, 0, 0.6);
    --shadow-xl: 0 20px 64px rgba(0, 0, 0, 0.7);
}

/* Reset & Base */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: var(--font-text);
    background: var(--apple-gray-100);
    color: var(--apple-text-primary);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-x: hidden;
    transition: background-color 0.3s ease, color 0.3s ease;
}

html {
    scroll-behavior: smooth;
}

.landing-page {
    width: 100%;
    min-height: 100vh;
    background: var(--apple-gray-100);
    transition: background-color 0.3s ease;
}

/* Hero Section */
.hero-section {
    position: relative;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--gradient-primary);
    overflow: hidden;
}

.hero-section::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 20%;
    background: linear-gradient(to top, rgba(0, 0, 0, 0.1), transparent);
    pointer-events: none;
}

.hero-content {
    position: relative;
    z-index: 2;
    text-align: center;
    padding: 0 var(--spacing-md);
    max-width: 980px;
    margin: 0 auto;
}

.hero-title {
    font-family: var(--font-display);
    font-size: clamp(48px, 8vw, 96px);
    font-weight: 700;
    line-height: 1.05;
    letter-spacing: -0.015em;
    color: var(--apple-white);
    margin-bottom: var(--spacing-sm);
    opacity: 0;
    animation: fadeInUp 1s 0.2s var(--transition-smooth) forwards;
    text-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);
}

.hero-subtitle {
    font-size: clamp(21px, 3vw, 28px);
    font-weight: 400;
    line-height: 1.4;
    letter-spacing: 0.007em;
    color: rgba(255, 255, 255, 0.95);
    margin-bottom: var(--spacing-lg);
    opacity: 0;
    animation: fadeInUp 1s 0.4s var(--transition-smooth) forwards;
    text-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);
}

.hero-description {
    font-size: 19px;
    line-height: 1.5;
    color: rgba(255, 255, 255, 0.85);
    margin-bottom: var(--spacing-xl);
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    opacity: 0;
    animation: fadeInUp 1s 0.6s var(--transition-smooth) forwards;
}

/* Кнопки - АБСОЛЮТНО ОДИНАКОВЫЕ */
.hero-actions {
    display: flex;
    gap: var(--spacing-sm);
    justify-content: center;
    flex-wrap: wrap;
    opacity: 0;
    animation: fadeInUp 1s 0.8s var(--transition-smooth) forwards;
}

/* ОДИН ОБЩИЙ КЛАСС для обеих кнопок */
.btn-primary,
.btn-secondary {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 16px 32px;
    font-size: 17px;
    font-weight: 600;
    font-family: inherit;
    text-decoration: none;
    color: rgba(255, 255, 255, 1);
    background: rgba(255, 255, 255, 0.15);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: var(--radius-button);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    cursor: pointer;
    position: relative;
    overflow: hidden;
    transition: all 0.4s var(--transition-smooth);
}

/* Shine эффект - одинаковый */
.btn-primary::before,
.btn-secondary::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.6s var(--transition-smooth);
    pointer-events: none;
    z-index: 0;
}

/* Hover - одинаковый */
.btn-primary:hover::before,
.btn-secondary:hover::before {
    left: 100%;
}

.btn-primary:hover,
.btn-secondary:hover {
    background: rgba(255, 255, 255, 0.25);
    border-color: rgba(255, 255, 255, 0.5);
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.2);
}

/* Active - одинаковый */
.btn-primary:active,
.btn-secondary:active {
    transform: translateY(0) scale(0.98);
}

/* Текст */
.btn-primary>span,
.btn-secondary>span {
    position: relative;
    z-index: 1;
}

/* Features Section */
.features-section {
    padding: var(--spacing-3xl) var(--spacing-md);
    max-width: 1400px;
    margin: 0 auto;
    position: relative;
}

.features-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    max-width: 1000px;
    height: 400px;
    background: radial-gradient(circle, rgba(102, 126, 234, 0.06) 0%, transparent 70%);
    pointer-events: none;
    z-index: 0;
}

.section-title {
    font-family: var(--font-display);
    font-size: clamp(40px, 5vw, 64px);
    font-weight: 700;
    line-height: 1.1;
    letter-spacing: -0.015em;
    text-align: center;
    margin-bottom: var(--spacing-sm);
    color: var(--apple-text-primary);
    position: relative;
    z-index: 1;
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.8s var(--transition-smooth), transform 0.8s var(--transition-smooth), color 0.3s ease;
}

.section-title.animate {
    opacity: 1;
    transform: translateY(0);
}

.section-subtitle {
    font-size: 21px;
    line-height: 1.5;
    text-align: center;
    color: var(--apple-text-secondary);
    margin-bottom: var(--spacing-2xl);
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
    position: relative;
    z-index: 1;
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.8s 0.2s var(--transition-smooth), transform 0.8s 0.2s var(--transition-smooth), color 0.3s ease;
}

.section-subtitle.animate {
    opacity: 1;
    transform: translateY(0);
}

.features-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--spacing-md);
    position: relative;
    z-index: 1;
}

.feature-card {
    position: relative;
    padding: var(--spacing-lg);
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-xl);
    box-shadow: var(--glass-shadow);
    transition: all 0.5s var(--transition-smooth), background 0.3s ease, border-color 0.3s ease;
    overflow: hidden;
    cursor: pointer;
    opacity: 0;
    transform: translateY(40px) scale(0.95);
}

.feature-card.animate {
    opacity: 1;
    transform: translateY(0) scale(1);
}

.feature-card:nth-child(1).animate {
    transition-delay: 0.1s;
}

.feature-card:nth-child(2).animate {
    transition-delay: 0.2s;
}

.feature-card:nth-child(3).animate {
    transition-delay: 0.3s;
}

.feature-card:nth-child(4).animate {
    transition-delay: 0.4s;
}

.feature-card:nth-child(5).animate {
    transition-delay: 0.5s;
}

.feature-card:nth-child(6).animate {
    transition-delay: 0.6s;
}

.feature-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--gradient-primary);
    opacity: 0;
    transition: opacity 0.4s var(--transition-smooth);
}

.feature-card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: var(--shadow-xl);
    border-color: rgba(102, 126, 234, 0.3);
}

.feature-card:hover::before {
    opacity: 1;
}

.feature-icon {
    width: 72px;
    height: 72px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 36px;
    background: var(--gradient-primary);
    border-radius: var(--radius-lg);
    margin-bottom: var(--spacing-md);
    box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);
    transition: transform 0.5s var(--transition-smooth);
}

.feature-card:hover .feature-icon {
    transform: scale(1.1) rotate(5deg);
}

.feature-card h3 {
    font-size: 24px;
    font-weight: 600;
    margin-bottom: var(--spacing-sm);
    color: var(--apple-text-primary);
    line-height: 1.3;
    transition: color 0.3s var(--transition-smooth);
}

.feature-card:hover h3 {
    color: #667eea;
}

.feature-card p {
    font-size: 17px;
    line-height: 1.6;
    color: var(--apple-text-secondary);
    transition: color 0.3s var(--transition-smooth);
}

.feature-link {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    margin-top: var(--spacing-md);
    color: var(--apple-blue);
    font-size: 17px;
    font-weight: 600;
    text-decoration: none;
    transition: gap 0.3s var(--transition-smooth);
}

.feature-link:hover {
    gap: 10px;
}

/* FAQ Section */
.faq-section {
    padding: var(--spacing-2xl) var(--spacing-md);
    max-width: 980px;
    margin: 0 auto;
}

.faq-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

/* ИСПРАВЛЕНО: FAQ больше не исчезают */
.faq-accordion {
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    /* ВАЖНО: НЕТ opacity и transform - элемент всегда видим */
    transition: box-shadow 0.3s var(--transition-smooth),
        background 0.3s ease,
        border-color 0.3s ease;
}

.faq-accordion:hover {
    box-shadow: var(--shadow-md);
    border-color: rgba(102, 126, 234, 0.2);
}

.faq-accordion-header {
    padding: var(--spacing-md);
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    user-select: none;
    background: transparent;
    transition: background 0.3s ease;
}

.faq-accordion-header:hover {
    background: rgba(102, 126, 234, 0.05);
}

.faq-accordion-header h3 {
    font-size: 19px;
    font-weight: 600;
    color: var(--apple-text-primary);
    transition: color 0.3s var(--transition-smooth);
}

.faq-accordion:hover .faq-accordion-header h3 {
    color: #667eea;
}

.faq-accordion-icon {
    width: 24px;
    height: 24px;
    transition: transform 0.5s var(--transition-smooth), color 0.3s var(--transition-smooth);
    color: var(--apple-text-secondary);
    flex-shrink: 0;
}

.faq-accordion.active .faq-accordion-icon {
    transform: rotate(180deg);
    color: #667eea;
}

/* ИСПРАВЛЕНО: простая анимация без конфликтов */
.faq-accordion-body {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.5s var(--transition-smooth);
}

.faq-accordion.active .faq-accordion-body {
    max-height: 500px;
}

.faq-accordion-body p {
    font-size: 17px;
    line-height: 1.6;
    color: var(--apple-text-secondary);
    padding: 0 var(--spacing-md) var(--spacing-md);
    transition: color 0.3s ease;
}

/* Анимации */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(40px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Responsive */
@media (max-width: 1024px) {
    .features-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 768px) {
    .hero-section {
        height: auto;
        min-height: 100vh;
        padding: var(--spacing-3xl) var(--spacing-md);
    }

    .features-grid {
        grid-template-columns: 1fr;
    }

    .hero-actions {
        flex-direction: column;
        width: 100%;
    }

    .btn-primary,
    .btn-secondary {
        width: 100%;
        justify-content: center;
    }

    .section-title {
        font-size: clamp(32px, 8vw, 48px);
    }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* Focus States */
.btn-primary:focus-visible,
.btn-secondary:focus-visible {
    outline: 3px solid rgba(255, 255, 255, 0.5);
    outline-offset: 4px;
}


==== FILE: .\frontend\src\styles\MethodClubPage.css ====
/* ==================== METHOD CLUB PAGE - APPLE PRO STYLE ==================== */
.method-club-page {
    width: 100%;
    overflow: hidden;
}

/* ==================== HERO SECTION ==================== */
.method-club-hero {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 600px;
    padding: var(--spacing-3xl) var(--spacing-md);
    margin-bottom: 0;
    /* ✅ ИЗМЕНЕНО: было var(--spacing-2xl) */
    overflow: hidden;
    background: transparent;
}


/* Hero Content */
.hero-content-wrapper {
    position: relative;
    z-index: 1;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--spacing-xl);
    max-width: 1400px;
    width: 100%;
}

.hero-content {
    flex: 1;
    max-width: 600px;
}

.hero-title {
    font-family: var(--font-display);
    font-size: clamp(48px, 6vw, 80px);
    font-weight: 700;
    margin: 0 0 var(--spacing-md) 0;
    color: var(--apple-white);
    line-height: 1.05;
    letter-spacing: -0.02em;
    text-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);
}

.hero-subtitle {
    font-size: clamp(19px, 2vw, 24px);
    color: rgba(255, 255, 255, 0.9);
    line-height: 1.6;
    margin: 0;
    font-weight: 400;
    text-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);
}

/* Hero Illustration */
.hero-image {
    flex: 0 0 450px;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.hero-illustration {
    position: relative;
    width: 100%;
    height: 500px;
    display: flex;
    justify-content: center;
    align-items: center;
}

.illustration-phone {
    position: relative;
    width: 280px;
    height: 500px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 40px;
    padding: 12px;
    box-shadow:
        0 30px 60px rgba(0, 0, 0, 0.3),
        0 0 0 1px rgba(255, 255, 255, 0.2) inset;
    animation: phoneFloat 6s ease-in-out infinite;
    transform-style: preserve-3d;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

@keyframes phoneFloat {

    0%,
    100% {
        transform: translateY(0) rotateY(-5deg);
    }

    50% {
        transform: translateY(-20px) rotateY(5deg);
    }
}

.phone-screen {
    width: 100%;
    height: 100%;
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border-radius: 32px;
    padding: 40px 20px 20px;
    position: relative;
    overflow: hidden;
    box-shadow: var(--shadow-lg);
}

.phone-screen::before {
    content: '';
    position: absolute;
    top: 15px;
    left: 50%;
    transform: translateX(-50%);
    width: 100px;
    height: 4px;
    background: var(--apple-text-secondary);
    opacity: 0.3;
    border-radius: 2px;
}

.screen-content {
    display: flex;
    flex-direction: column;
    gap: 15px;
    height: 100%;
}

.profile-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 15px;
    background: rgba(255, 255, 255, 0.5);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
    position: relative;
    overflow: hidden;
    border-left: 3px solid rgba(102, 126, 234, 0.8);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.profile-item::after {
    content: '';
    position: absolute;
    left: 15px;
    width: 40px;
    height: 40px;
    background: var(--gradient-primary);
    opacity: 0.3;
    border-radius: 50%;
}

/* Floating Elements */
.floating-element {
    position: absolute;
    font-size: 2.5rem;
    opacity: 0.8;
    animation: elementFloat 4s ease-in-out infinite;
    filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.2));
}

.element-1 {
    top: 10%;
    left: 0;
    animation-delay: 0s;
}

.element-2 {
    bottom: 15%;
    left: -5%;
    animation-delay: 1s;
}

.element-3 {
    top: 60%;
    right: -5%;
    animation-delay: 2s;
}

@keyframes elementFloat {

    0%,
    100% {
        transform: translateY(0) rotate(0deg);
    }

    50% {
        transform: translateY(-30px) rotate(10deg);
    }
}

/* ==================== MATERIALS SECTION ==================== */
.method-club-materials {
    padding: var(--spacing-2xl) var(--spacing-md);
    max-width: 1400px;
    margin: 0 auto;
    position: relative;
}

.method-club-materials::before {
    content: '';
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    max-width: 1000px;
    height: 400px;
    background: radial-gradient(circle, rgba(102, 126, 234, 0.06) 0%, transparent 70%);
    pointer-events: none;
    z-index: 0;
}

.materials-title {
    font-family: var(--font-display);
    font-size: clamp(40px, 5vw, 56px);
    font-weight: 700;
    margin: 0 0 var(--spacing-xl) 0;
    color: var(--apple-text-primary);
    letter-spacing: -0.02em;
    position: relative;
    z-index: 1;
    transition: color 0.3s ease;
}

.materials-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: var(--spacing-md);
    position: relative;
    z-index: 1;
}

.material-card {
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-xl);
    overflow: hidden;
    transition: all 0.5s var(--transition-smooth);
    cursor: pointer;
    box-shadow: var(--glass-shadow);
    position: relative;
}

.material-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--gradient-primary);
    opacity: 0;
    transition: opacity 0.4s var(--transition-smooth);
}

.material-card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: var(--shadow-xl);
    border-color: rgba(102, 126, 234, 0.3);
}

.material-card:hover::before {
    opacity: 1;
}

.card-image-placeholder {
    width: 100%;
    height: 200px;
    background: var(--gradient-primary);
    position: relative;
    overflow: hidden;
}

.card-image-placeholder::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    animation: shimmer 2s infinite;
}

@keyframes shimmer {
    0% {
        transform: translateX(-100%);
    }

    100% {
        transform: translateX(100%);
    }
}

.card-content {
    padding: var(--spacing-md);
}

.card-category {
    display: inline-block;
    padding: 6px 12px;
    background: rgba(102, 126, 234, 0.1);
    color: #667eea;
    border-radius: var(--radius-button);
    font-size: 14px;
    font-weight: 600;
    margin-bottom: var(--spacing-sm);
    transition: all 0.3s var(--transition-smooth);
}

.material-card:hover .card-category {
    background: rgba(102, 126, 234, 0.2);
}

.card-title-placeholder {
    height: 24px;
    background: var(--apple-text-secondary);
    opacity: 0.2;
    border-radius: 8px;
    margin-bottom: var(--spacing-xs);
    animation: pulse 2s ease-in-out infinite;
}

.card-text-placeholder {
    height: 16px;
    background: var(--apple-text-secondary);
    opacity: 0.15;
    border-radius: 8px;
    width: 80%;
    animation: pulse 2s ease-in-out infinite;
    animation-delay: 0.2s;
}

@keyframes pulse {

    0%,
    100% {
        opacity: 0.2;
    }

    50% {
        opacity: 0.1;
    }
}

/* ==================== ANIMATIONS ==================== */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(40px) translateZ(0);
    }

    to {
        opacity: 1;
        transform: translateY(0) translateZ(0);
    }
}

.hero-title {
    animation: fadeInUp 0.8s var(--transition-smooth) 0.1s both;
}

.hero-subtitle {
    animation: fadeInUp 0.8s var(--transition-smooth) 0.25s both;
}

.hero-image {
    animation: fadeInUp 0.8s var(--transition-smooth) 0.4s both;
}

.materials-title {
    animation: fadeInUp 0.8s var(--transition-smooth) 0.2s both;
}

.materials-grid {
    animation: fadeInUp 0.8s var(--transition-smooth) 0.35s both;
}


/* ==================== RESPONSIVE ==================== */
@media (max-width: 1024px) {
    .hero-content-wrapper {
        gap: var(--spacing-lg);
    }

    .hero-title {
        font-size: clamp(40px, 6vw, 64px);
    }

    .hero-image {
        flex: 0 0 350px;
    }

    .illustration-phone {
        width: 220px;
        height: 400px;
    }

    .materials-grid {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    }
}

@media (max-width: 768px) {
    .method-club-hero {
        min-height: auto;
        padding: var(--spacing-2xl) var(--spacing-md);
    }

    .hero-content-wrapper {
        flex-direction: column;
        gap: var(--spacing-xl);
        text-align: center;
    }

    .hero-title {
        font-size: clamp(36px, 8vw, 48px);
    }

    .hero-subtitle {
        font-size: clamp(17px, 3vw, 19px);
    }

    .hero-image {
        flex: 0 0 auto;
    }

    .illustration-phone {
        width: 200px;
        height: 360px;
    }

    .floating-element {
        font-size: 2rem;
    }

    .materials-grid {
        grid-template-columns: 1fr;
        gap: var(--spacing-sm);
    }

    .method-club-materials {
        padding: var(--spacing-xl) var(--spacing-md);
    }
}

/* ==================== ACCESSIBILITY ==================== */
@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}


==== FILE: .\frontend\src\styles\Navigation.css ====
﻿/* ============================================
   APPLE PRO NAVIGATION - ULTIMATE EDITION 2025
   Perfect Layout & Premium Design
============================================ */

:root {
  /* Apple Color System */
  --nav-primary: #667eea;
  --nav-text: #1d1d1f;
  --nav-text-secondary: #86868b;
  --nav-bg: rgba(255, 255, 255, 0.8);
  --nav-border: rgba(0, 0, 0, 0.08);
  --nav-hover: rgba(0, 0, 0, 0.05);
  --nav-active: rgba(102, 126, 234, 0.1);
  --nav-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  --nav-height: 64px;

  /* Button Styles - как на лендинге */
  --btn-bg: rgba(255, 255, 255, 0.15);
  --btn-border: rgba(255, 255, 255, 0.3);
  --btn-radius: 12px;

  /* Typography */
  --nav-font: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, sans-serif;

  /* Transitions */
  --nav-transition: cubic-bezier(0.28, 0.11, 0.32, 1);
  --nav-speed: 0.3s;
}

/* Dark Mode */
[data-theme='dark'],
@media (prefers-color-scheme: dark) {
  :root:not([data-theme='light']) {
    --nav-text: #f5f5f7;
    --nav-text-secondary: #a1a1a6;
    --nav-bg: rgba(29, 29, 31, 0.8);
    --nav-border: rgba(255, 255, 255, 0.1);
    --nav-hover: rgba(255, 255, 255, 0.05);
    --nav-active: rgba(102, 126, 234, 0.15);
    --nav-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  }
}

[data-theme='dark'] {
  --nav-text: #f5f5f7;
  --nav-text-secondary: #a1a1a6;
  --nav-bg: rgba(29, 29, 31, 0.8);
  --nav-border: rgba(255, 255, 255, 0.1);
  --nav-hover: rgba(255, 255, 255, 0.05);
  --nav-active: rgba(102, 126, 234, 0.15);
  --nav-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

/* Navigation Container */
.navigation {
  width: 100%;
  background: var(--nav-bg);
  backdrop-filter: saturate(180%) blur(20px);
  -webkit-backdrop-filter: saturate(180%) blur(20px);
  border-bottom: 1px solid var(--nav-border);
  position: sticky;
  top: 0;
  z-index: 1000;
  transition: background var(--nav-speed) ease, border-color var(--nav-speed) ease;
  box-shadow: var(--nav-shadow);
  animation: navSlideDown 0.6s var(--nav-transition) backwards;
}

/* Nav Container - 3 колонки Grid */
.nav-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 24px;
  height: var(--nav-height);
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 24px;
}

/* Logo - в самый левый край */
.nav-logo {
  display: flex;
  align-items: center;
  gap: 12px;
  text-decoration: none;
  transition: opacity var(--nav-speed) var(--nav-transition);
  cursor: pointer;
  opacity: 0;
  animation: fadeInLeft 0.6s 0.1s var(--nav-transition) forwards;
}

.nav-logo:hover {
  opacity: 0.75;
}

.logo-icon {
  width: 38px;
  height: 38px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 10px;
  color: white;
  font-weight: 700;
  font-size: 18px;
  transition: transform var(--nav-speed) var(--nav-transition);
}

.nav-logo:hover .logo-icon {
  transform: scale(1.05);
}

.logo-text {
  font-size: 20px;
  font-weight: 600;
  color: var(--nav-text);
  font-family: var(--nav-font);
  letter-spacing: -0.02em;
}

/* Nav Links - всегда по центру */
.nav-links {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  list-style: none;
  margin: 0;
  padding: 0;
  opacity: 0;
  animation: fadeInUp 0.6s 0.2s var(--nav-transition) forwards;
}

.nav-link {
  color: var(--nav-text-secondary);
  font-size: 15px;
  font-weight: 500;
  padding: 10px 18px;
  border-radius: var(--btn-radius);
  text-decoration: none;
  transition: all var(--nav-speed) var(--nav-transition);
  font-family: var(--nav-font);
  position: relative;
}

.nav-link::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--nav-hover);
  border-radius: var(--btn-radius);
  opacity: 0;
  transition: opacity var(--nav-speed) var(--nav-transition);
}

.nav-link:hover {
  color: var(--nav-text);
}

.nav-link:hover::before {
  opacity: 1;
}

.nav-link.active {
  color: var(--nav-text);
  background: var(--nav-active);
  font-weight: 600;
}

/* Nav Actions - в самый правый край */
.nav-actions {
  display: flex;
  align-items: center;
  gap: 10px;
  justify-self: end;
  opacity: 0;
  animation: fadeInRight 0.6s 0.3s var(--nav-transition) forwards;
}

/* Все кнопки в ЕДИНОМ стиле - как на лендинге */
.theme-toggle,
.btn-login,
.btn-logout {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  height: 42px;
  padding: 0 20px;
  font-size: 15px;
  font-weight: 600;
  font-family: var(--nav-font);
  border-radius: var(--btn-radius);
  border: none;
  cursor: pointer;
  text-decoration: none;
  transition: all var(--nav-speed) var(--nav-transition);
  position: relative;
  overflow: hidden;
  white-space: nowrap;
}

/* Theme Toggle - в том же стиле */
.theme-toggle {
  width: 42px;
  padding: 0;
  background: var(--nav-hover);
  color: var(--nav-text-secondary);
  border: 1px solid var(--nav-border);
}

.theme-toggle::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--nav-active);
  opacity: 0;
  transition: opacity var(--nav-speed) var(--nav-transition);
}

.theme-toggle:hover {
  color: var(--nav-text);
  border-color: rgba(102, 126, 234, 0.3);
}

.theme-toggle:hover::before {
  opacity: 1;
}

.theme-toggle svg {
  position: relative;
  z-index: 1;
  transition: transform var(--nav-speed) var(--nav-transition);
}

.theme-toggle:hover svg {
  transform: scale(1.1);
}

/* Login Button - градиент как на лендинге */
.btn-login {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
  border: none;
}

.btn-login::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  transition: left 0.6s var(--nav-transition);
}

.btn-login:hover::before {
  left: 100%;
}

.btn-login:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
}

.btn-login:active {
  transform: translateY(0);
}

/* Logout Button - такой же стиль */
.btn-logout {
  background: var(--nav-hover);
  color: var(--nav-text);
  border: 1px solid var(--nav-border);
}

.btn-logout::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--nav-active);
  opacity: 0;
  transition: opacity var(--nav-speed) var(--nav-transition);
}

.btn-logout:hover {
  border-color: rgba(102, 126, 234, 0.3);
  transform: translateY(-1px);
}

.btn-logout:hover::before {
  opacity: 1;
}

.btn-logout:active {
  transform: translateY(0);
}

/* User Info */
.user-info {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 6px 14px 6px 6px;
  background: var(--nav-hover);
  border: 1px solid var(--nav-border);
  border-radius: var(--btn-radius);
  cursor: pointer;
  transition: all var(--nav-speed) var(--nav-transition);
  position: relative;
  overflow: hidden;
}

.user-info::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--nav-active);
  opacity: 0;
  transition: opacity var(--nav-speed) var(--nav-transition);
}

.user-info:hover {
  border-color: rgba(102, 126, 234, 0.3);
  transform: translateY(-1px);
}

.user-info:hover::before {
  opacity: 1;
}

.user-info>* {
  position: relative;
  z-index: 1;
}

.user-avatar {
  width: 30px;
  height: 30px;
  border-radius: 8px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 600;
  font-size: 14px;
  overflow: hidden;
}

.user-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.user-name {
  color: var(--nav-text);
  font-size: 14px;
  font-weight: 500;
  font-family: var(--nav-font);
}

/* Mobile Menu Toggle */
.mobile-menu-toggle {
  display: none;
  width: 42px;
  height: 42px;
  background: var(--nav-hover);
  border: 1px solid var(--nav-border);
  border-radius: var(--btn-radius);
  cursor: pointer;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 5px;
  transition: all var(--nav-speed) var(--nav-transition);
}

.mobile-menu-toggle:hover {
  background: var(--nav-active);
  border-color: rgba(102, 126, 234, 0.3);
}

.mobile-menu-bar {
  width: 18px;
  height: 2px;
  background: var(--nav-text);
  border-radius: 2px;
  transition: all var(--nav-speed) var(--nav-transition);
}

.mobile-menu-toggle.active .mobile-menu-bar:nth-child(1) {
  transform: rotate(45deg) translateY(7px);
}

.mobile-menu-toggle.active .mobile-menu-bar:nth-child(2) {
  opacity: 0;
}

.mobile-menu-toggle.active .mobile-menu-bar:nth-child(3) {
  transform: rotate(-45deg) translateY(-7px);
}

/* Mobile Menu Overlay */
.mobile-menu-overlay {
  position: fixed;
  top: var(--nav-height);
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--nav-bg);
  backdrop-filter: saturate(180%) blur(20px);
  -webkit-backdrop-filter: saturate(180%) blur(20px);
  opacity: 0;
  visibility: hidden;
  transition: opacity var(--nav-speed) ease, visibility var(--nav-speed) ease;
  z-index: 999;
  overflow-y: auto;
}

.mobile-menu-overlay.active {
  opacity: 1;
  visibility: visible;
}

.mobile-menu-content {
  padding: 24px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  animation: fadeInUp 0.4s var(--nav-transition);
}

.mobile-nav-link {
  display: flex;
  align-items: center;
  padding: 14px 18px;
  color: var(--nav-text-secondary);
  text-decoration: none;
  font-size: 16px;
  font-weight: 500;
  font-family: var(--nav-font);
  border-radius: var(--btn-radius);
  transition: all var(--nav-speed) var(--nav-transition);
  position: relative;
  overflow: hidden;
}

.mobile-nav-link::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--nav-hover);
  opacity: 0;
  transition: opacity var(--nav-speed) var(--nav-transition);
}

.mobile-nav-link:hover {
  color: var(--nav-text);
}

.mobile-nav-link:hover::before {
  opacity: 1;
}

.mobile-nav-link.active {
  color: var(--nav-text);
  background: var(--nav-active);
  font-weight: 600;
}

.mobile-divider {
  height: 1px;
  background: var(--nav-border);
  margin: 12px 0;
}

.mobile-actions {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding-top: 12px;
}

.mobile-theme-toggle {
  width: 100%;
  height: 46px;
  padding: 0 18px;
  background: var(--nav-hover);
  border: 1px solid var(--nav-border);
  border-radius: var(--btn-radius);
  color: var(--nav-text);
  font-size: 15px;
  font-weight: 600;
  font-family: var(--nav-font);
  cursor: pointer;
  transition: all var(--nav-speed) var(--nav-transition);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  position: relative;
  overflow: hidden;
}

.mobile-theme-toggle::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--nav-active);
  opacity: 0;
  transition: opacity var(--nav-speed) var(--nav-transition);
}

.mobile-theme-toggle:hover {
  border-color: rgba(102, 126, 234, 0.3);
}

.mobile-theme-toggle:hover::before {
  opacity: 1;
}

/* Анимации появления */
@keyframes navSlideDown {
  from {
    transform: translateY(-100%);
    opacity: 0;
  }

  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeInLeft {
  from {
    opacity: 0;
    transform: translateX(-20px);
  }

  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes fadeInRight {
  from {
    opacity: 0;
    transform: translateX(20px);
  }

  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Responsive */
@media (max-width: 768px) {
  .nav-container {
    padding: 0 16px;
    grid-template-columns: 1fr auto;
    gap: 16px;
  }

  .nav-links {
    display: none;
  }

  .mobile-menu-toggle {
    display: flex;
  }

  .user-name {
    display: none;
  }

  .theme-toggle {
    width: 40px;
    height: 40px;
  }

  .btn-login,
  .btn-logout {
    height: 40px;
    padding: 0 18px;
    font-size: 14px;
  }

  .user-info {
    padding: 5px;
  }
}

@media (max-width: 480px) {
  .nav-container {
    padding: 0 12px;
  }

  .logo-text {
    font-size: 18px;
  }

  .logo-icon {
    width: 34px;
    height: 34px;
    font-size: 16px;
  }

  .nav-actions {
    gap: 8px;
  }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {

  *,
  *::before,
  *::after {
    animation: none !important;
    transition-duration: 0.01ms !important;
  }
}

/* Focus States */
.nav-link:focus-visible,
.btn-login:focus-visible,
.btn-logout:focus-visible,
.theme-toggle:focus-visible,
.mobile-theme-toggle:focus-visible {
  outline: 2px solid var(--nav-primary);
  outline-offset: 2px;
}


==== FILE: .\frontend\src\styles\PioneersWorkPage.css ====
/* ==================== PIONEERS WORK PAGE - APPLE PRO STYLE ==================== */
.pioneers-work-page {
    width: 100%;
    overflow: hidden;
}

/* ==================== HERO SECTION ==================== */
.pioneers-hero {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 600px;
    padding: var(--spacing-3xl) var(--spacing-md);
    margin-bottom: var(--spacing-2xl);
    overflow: hidden;
    background: transparent;
    /* УБРАЛИ градиент */
}

.hero-content-wrapper {
    position: relative;
    z-index: 1;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--spacing-xl);
    max-width: 1400px;
    width: 100%;
}

.hero-content {
    flex: 1;
    max-width: 600px;
}

.hero-title {
    font-family: var(--font-display);
    font-size: clamp(48px, 6vw, 80px);
    font-weight: 700;
    margin: 0 0 var(--spacing-md) 0;
    color: var(--apple-white);
    line-height: 1.05;
    letter-spacing: -0.02em;
    text-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);
    will-change: opacity, transform;
    backface-visibility: hidden;
    -webkit-font-smoothing: antialiased;
}

.hero-subtitle {
    font-size: clamp(17px, 2vw, 21px);
    color: rgba(255, 255, 255, 0.9);
    line-height: 1.6;
    margin: 0;
    font-weight: 400;
    text-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);
}

/* Hero Illustration - Character on Books */
.hero-image {
    flex: 0 0 450px;
    display: flex;
    justify-content: center;
    align-items: flex-end;
    position: relative;
    height: 500px;
}

.hero-illustration-pioneers {
    position: relative;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: flex-end;
}

.books-stack {
    position: relative;
    width: 300px;
    height: 200px;
    animation: booksFloat 6s ease-in-out infinite;
}

@keyframes booksFloat {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-10px);
    }
}

.book {
    position: absolute;
    width: 120px;
    height: 40px;
    background: var(--glass-bg);
    border-radius: 8px;
    box-shadow: var(--shadow-md);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 2px solid rgba(255, 255, 255, 0.3);
}

.book-1 {
    bottom: 0;
    left: 20px;
    background: linear-gradient(135deg, #00e965, #00a049);
    transform: rotate(-2deg);
    width: 140px;
    height: 45px;
}

.book-2 {
    bottom: 40px;
    left: 40px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    transform: rotate(1deg);
    width: 160px;
    height: 50px;
}

.book-3 {
    bottom: 85px;
    left: 30px;
    background: linear-gradient(135deg, #f093fb, #f5576c);
    transform: rotate(-1deg);
    width: 150px;
    height: 48px;
}

.book-4 {
    bottom: 130px;
    left: 50px;
    background: linear-gradient(135deg, #4facfe, #00f2fe);
    transform: rotate(2deg);
    width: 130px;
    height: 42px;
}

.pioneer-character {
    position: absolute;
    bottom: 180px;
    left: 50%;
    transform: translateX(-50%);
    width: 100px;
    height: 150px;
    animation: characterFloat 6s ease-in-out infinite 0.3s;
}

@keyframes characterFloat {

    0%,
    100% {
        transform: translateX(-50%) translateY(0);
    }

    50% {
        transform: translateX(-50%) translateY(-15px);
    }
}

.character-body {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #00e965, #00a049);
    border-radius: 50px 50px 20px 20px;
    box-shadow: var(--shadow-lg);
    position: relative;
}

.character-body::before {
    content: '👤';
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 48px;
}

/* ==================== GETTING STARTED SECTION ==================== */
.getting-started-section {
    padding: var(--spacing-2xl) var(--spacing-md);
    max-width: 1400px;
    margin: 0 auto;
}

.section-title {
    font-family: var(--font-display);
    font-size: clamp(36px, 4vw, 48px);
    font-weight: 700;
    margin: 0 0 var(--spacing-xl) 0;
    color: var(--apple-text-primary);
    letter-spacing: -0.02em;
    transition: color 0.3s ease;
}

/* Filters */
.filters-container {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-xl);
}

.filter-btn {
    padding: 12px 24px;
    font-size: 15px;
    font-weight: 500;
    font-family: var(--font-text);
    color: var(--apple-text-primary);
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-button);
    cursor: pointer;
    transition: all 0.3s var(--transition-smooth);
    box-shadow: var(--shadow-sm);
}

.filter-btn:hover {
    background: rgba(102, 126, 234, 0.1);
    border-color: rgba(102, 126, 234, 0.3);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.filter-btn.active {
    background: var(--apple-black);
    color: var(--apple-white);
    border-color: var(--apple-black);
    font-weight: 600;
}

[data-theme='dark'] .filter-btn.active {
    background: var(--apple-white);
    color: var(--apple-black);
    border-color: var(--apple-white);
}

/* Cards Grid */
.pioneers-cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: var(--spacing-md);
}

.pioneer-card {
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-xl);
    overflow: hidden;
    cursor: pointer;
    box-shadow: var(--glass-shadow);
    position: relative;
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s var(--transition-smooth),
        transform 0.6s var(--transition-smooth);
}

.pioneers-cards-grid.mounted .pioneer-card {
    opacity: 1;
    transform: translateY(0);
    transition-delay: calc(var(--card-index) * 0.1s);
}

.pioneer-card:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-xl);
    border-color: rgba(102, 126, 234, 0.3);
    transition: transform 0.3s var(--transition-smooth),
        box-shadow 0.3s var(--transition-smooth),
        border-color 0.3s var(--transition-smooth);
}

.pioneer-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--gradient-primary);
    opacity: 0;
    transition: opacity 0.4s var(--transition-smooth);
}

.pioneer-card:hover::before {
    opacity: 1;
}

.card-image {
    width: 100%;
    height: 220px;
    overflow: hidden;
    background: linear-gradient(135deg, #667eea, #764ba2);
    position: relative;
}

.card-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s var(--transition-smooth);
}

.pioneer-card:hover .card-image img {
    transform: scale(1.05);
}

.card-body {
    padding: var(--spacing-md);
}

.card-category {
    display: inline-block;
    font-size: 12px;
    font-weight: 600;
    color: var(--apple-text-secondary);
    letter-spacing: 0.05em;
    margin-bottom: var(--spacing-xs);
}

.card-title {
    font-size: 19px;
    font-weight: 600;
    line-height: 1.4;
    color: var(--apple-text-primary);
    margin: 0;
    transition: color 0.3s var(--transition-smooth);
}

.pioneer-card:hover .card-title {
    color: #667eea;
}

/* ==================== PIONEER ASSEMBLY SECTION ==================== */
.pioneer-assembly-section {
    padding: var(--spacing-2xl) var(--spacing-md);
    max-width: 1400px;
    margin: 0 auto;
}

.assembly-content {
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-xl);
    padding: var(--spacing-xl);
    min-height: 300px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--glass-shadow);
}

.assembly-placeholder {
    font-size: 19px;
    color: var(--apple-text-secondary);
    text-align: center;
}

/* ==================== ANIMATIONS ==================== */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(40px) translateZ(0);
    }

    to {
        opacity: 1;
        transform: translateY(0) translateZ(0);
    }
}

.hero-title {
    animation: fadeInUp 0.8s var(--transition-smooth) 0.1s both;
}

.hero-subtitle {
    animation: fadeInUp 0.8s var(--transition-smooth) 0.25s both;
}

.hero-image {
    animation: fadeInUp 0.8s var(--transition-smooth) 0.4s both;
}

.section-title {
    animation: fadeInUp 0.8s var(--transition-smooth) 0.2s both;
}

.filters-container {
    animation: fadeInUp 0.8s var(--transition-smooth) 0.35s both;
}

.pioneers-cards-grid {
    animation: fadeInUp 0.8s var(--transition-smooth) 0.5s both;
}

.pioneer-card {
    animation: fadeInUp 0.6s var(--transition-smooth) calc(0.6s + var(--card-index) * 0.1s) both;
}


/* ==================== RESPONSIVE ==================== */
@media (max-width: 1024px) {
    .hero-content-wrapper {
        gap: var(--spacing-lg);
    }

    .hero-image {
        flex: 0 0 350px;
    }

    .pioneers-cards-grid {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    }
}

@media (max-width: 768px) {
    .pioneers-hero {
        padding: var(--spacing-2xl) var(--spacing-md);
    }

    .hero-content-wrapper {
        flex-direction: column;
        text-align: center;
        gap: var(--spacing-xl);
    }

    .hero-image {
        flex: 0 0 auto;
        height: 400px;
    }

    .books-stack {
        width: 250px;
    }

    .filters-container {
        gap: var(--spacing-xs);
    }

    .filter-btn {
        padding: 10px 18px;
        font-size: 14px;
    }

    .pioneers-cards-grid {
        grid-template-columns: 1fr;
    }
}

/* ==================== ACCESSIBILITY ==================== */
@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
    }
}


==== FILE: .\frontend\src\styles\SchoolLeadersPage.css ====
/* ==================== SCHOOL LEADERS PAGE - APPLE PRO STYLE ==================== */
.school-leaders-page {
    width: 100%;
    overflow: hidden;
}

/* ==================== HERO SECTION ==================== */
.school-leaders-hero {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 600px;
    padding: var(--spacing-3xl) var(--spacing-md);
    margin-bottom: var(--spacing-2xl);
    overflow: hidden;
    background: var(--gradient-primary);
}

.hero-background {
    position: absolute;
    inset: 0;
    z-index: 0;
}

.hero-gradient {
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 30% 20%,
            rgba(255, 255, 255, 0.15) 0%,
            rgba(255, 255, 255, 0.05) 50%,
            transparent 70%);
    animation: gradientShift 8s ease-in-out infinite;
}

.hero-blur {
    position: absolute;
    top: 10%;
    right: 10%;
    width: 400px;
    height: 400px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    filter: blur(80px);
    animation: float 20s ease-in-out infinite;
}

@keyframes gradientShift {

    0%,
    100% {
        opacity: 1;
        transform: scale(1);
    }

    50% {
        opacity: 0.8;
        transform: scale(1.1);
    }
}

@keyframes float {

    0%,
    100% {
        transform: translate(0, 0);
    }

    33% {
        transform: translate(30px, -30px);
    }

    66% {
        transform: translate(-20px, 20px);
    }
}

.hero-content-wrapper {
    position: relative;
    z-index: 1;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--spacing-xl);
    max-width: 1400px;
    width: 100%;
}

.hero-content {
    flex: 1;
    max-width: 600px;
}

.hero-title {
    font-family: var(--font-display);
    font-size: clamp(48px, 6vw, 80px);
    font-weight: 700;
    margin: 0 0 var(--spacing-md) 0;
    color: var(--apple-white);
    line-height: 1.05;
    letter-spacing: -0.02em;
    text-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);
}

.hero-subtitle {
    font-size: clamp(17px, 2vw, 21px);
    color: rgba(255, 255, 255, 0.9);
    line-height: 1.6;
    margin: 0;
    font-weight: 400;
    text-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);
}

/* Hero Illustration - Leaders at Table */
.hero-image {
    flex: 0 0 450px;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    height: 500px;
}

.hero-illustration-leaders {
    position: relative;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
}

.leaders-table {
    position: relative;
    width: 280px;
    height: 160px;
    animation: tableFloat 6s ease-in-out infinite;
}

@keyframes tableFloat {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-10px);
    }
}

.table-top {
    position: absolute;
    top: 60px;
    left: 0;
    width: 100%;
    height: 20px;
    background: linear-gradient(135deg, #00e965, #00a049);
    border-radius: 12px;
    box-shadow: var(--shadow-lg);
}

.table-legs {
    position: absolute;
    top: 80px;
    left: 50%;
    transform: translateX(-50%);
    width: 80%;
    height: 80px;
    background: transparent;
}

.table-legs::before,
.table-legs::after {
    content: '';
    position: absolute;
    width: 15px;
    height: 100%;
    background: linear-gradient(135deg, #00a049, #00763a);
    border-radius: 8px;
}

.table-legs::before {
    left: 20px;
}

.table-legs::after {
    right: 20px;
}

.leader-character {
    position: absolute;
    width: 100px;
    height: 120px;
    background: var(--glass-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 50px 50px 20px 20px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    box-shadow: var(--shadow-lg);
    display: flex;
    align-items: center;
    justify-content: center;
}

.leader-1 {
    top: 20%;
    left: 10%;
    background: linear-gradient(135deg, #667eea, #764ba2);
    animation: leader1Float 6s ease-in-out infinite;
}

.leader-2 {
    top: 20%;
    right: 10%;
    background: linear-gradient(135deg, #f093fb, #f5576c);
    animation: leader2Float 6s ease-in-out infinite 0.3s;
}

@keyframes leader1Float {

    0%,
    100% {
        transform: translateY(0) rotate(-5deg);
    }

    50% {
        transform: translateY(-15px) rotate(-3deg);
    }
}

@keyframes leader2Float {

    0%,
    100% {
        transform: translateY(0) rotate(5deg);
    }

    50% {
        transform: translateY(-15px) rotate(3deg);
    }
}

.character-icon {
    font-size: 48px;
    margin-top: -10px;
}

.floating-element {
    position: absolute;
    font-size: 2.5rem;
    opacity: 0.8;
    animation: elementFloat 4s ease-in-out infinite;
    filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.2));
}

.element-1 {
    top: 15%;
    left: 5%;
    animation-delay: 0s;
}

.element-2 {
    bottom: 20%;
    left: 0;
    animation-delay: 1s;
}

.element-3 {
    top: 50%;
    right: 0;
    animation-delay: 2s;
}

@keyframes elementFloat {

    0%,
    100% {
        transform: translateY(0) rotate(0deg);
    }

    50% {
        transform: translateY(-30px) rotate(10deg);
    }
}

/* ==================== CONTENT SECTION ==================== */
.leaders-content-section {
    padding: var(--spacing-2xl) var(--spacing-md);
    max-width: 1400px;
    margin: 0 auto;
}

.section-title {
    font-family: var(--font-display);
    font-size: clamp(36px, 4vw, 48px);
    font-weight: 700;
    margin: 0 0 var(--spacing-xl) 0;
    color: var(--apple-text-primary);
    letter-spacing: -0.02em;
    transition: color 0.3s ease;
}

.content-placeholder {
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-xl);
    padding: var(--spacing-xl);
    min-height: 300px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--glass-shadow);
}

.placeholder-text {
    font-size: 19px;
    color: var(--apple-text-secondary);
    text-align: center;
}

/* ==================== ANIMATIONS ==================== */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(40px) translateZ(0);
    }

    to {
        opacity: 1;
        transform: translateY(0) translateZ(0);
    }
}

.hero-title {
    animation: fadeInUp 0.8s var(--transition-smooth) 0.1s both;
}

.hero-subtitle {
    animation: fadeInUp 0.8s var(--transition-smooth) 0.25s both;
}

.hero-image {
    animation: fadeInUp 0.8s var(--transition-smooth) 0.4s both;
}

.section-title {
    animation: fadeInUp 0.8s var(--transition-smooth) 0.2s both;
}

.content-placeholder {
    animation: fadeInUp 0.8s var(--transition-smooth) 0.35s both;
}

/* ==================== RESPONSIVE ==================== */
@media (max-width: 1024px) {
    .hero-content-wrapper {
        gap: var(--spacing-lg);
    }

    .hero-image {
        flex: 0 0 350px;
    }
}

@media (max-width: 768px) {
    .school-leaders-hero {
        padding: var(--spacing-2xl) var(--spacing-md);
    }

    .hero-content-wrapper {
        flex-direction: column;
        text-align: center;
        gap: var(--spacing-xl);
    }

    .hero-image {
        flex: 0 0 auto;
        height: 400px;
    }

    .leaders-table {
        width: 220px;
    }

    .leader-character {
        width: 80px;
        height: 100px;
    }

    .character-icon {
        font-size: 36px;
    }

    .floating-element {
        font-size: 2rem;
    }
}

/* ==================== ACCESSIBILITY ==================== */
@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
    }
}


==== FILE: .\frontend\src\styles\SearchFilters.css ====
/* ============================================
   APPLE PRO SEARCH FILTERS - CLEAN
============================================ */


:root {
    --sf-primary: #667eea;
    --sf-secondary: #764ba2;
    --sf-text: #1d1d1f;
    --sf-text-secondary: #6e6e73;
    --sf-bg: #ffffff;
    --sf-surface: #f5f5f7;
    --sf-border: rgba(0, 0, 0, 0.1);
    --sf-hover: rgba(0, 0, 0, 0.05);
    --sf-glass-bg: rgba(255, 255, 255, 0.8);
    --sf-glass-blur: saturate(180%) blur(20px);
    --sf-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
    --sf-shadow-md: 0 4px 16px rgba(0, 0, 0, 0.12);
    --sf-shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.16);
    --sf-font: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", system-ui, sans-serif;
    --sf-transition: cubic-bezier(0.28, 0.11, 0.32, 1);
    --sf-speed: 0.4s;
}


[data-theme='dark'] {
    --sf-text: #f5f5f7;
    --sf-text-secondary: #98989d;
    --sf-bg: #000000;
    --sf-surface: #1c1c1e;
    --sf-border: rgba(255, 255, 255, 0.15);
    --sf-hover: rgba(255, 255, 255, 0.08);
    --sf-glass-bg: rgba(28, 28, 30, 0.8);
    --sf-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
    --sf-shadow-md: 0 4px 16px rgba(0, 0, 0, 0.5);
    --sf-shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.6);
}


@media (prefers-color-scheme: dark) {
    :root:not([data-theme='light']) {
        --sf-text: #f5f5f7;
        --sf-text-secondary: #98989d;
        --sf-bg: #000000;
        --sf-surface: #1c1c1e;
        --sf-border: rgba(255, 255, 255, 0.15);
        --sf-hover: rgba(255, 255, 255, 0.08);
        --sf-glass-bg: rgba(28, 28, 30, 0.8);
        --sf-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
        --sf-shadow-md: 0 4px 16px rgba(0, 0, 0, 0.5);
        --sf-shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.6);
    }
}


.search-filters {
    width: 100%;
    margin-bottom: 32px;
}


.search-bar {
    position: relative;
    margin-bottom: 16px;
}


.search-input {
    width: 100%;
    height: 56px;
    padding: 0 20px;
    font-size: 17px;
    font-weight: 400;
    font-family: var(--sf-font);
    color: var(--sf-text);
    background: var(--sf-glass-bg);
    backdrop-filter: var(--sf-glass-blur);
    -webkit-backdrop-filter: var(--sf-glass-blur);
    border: 1px solid var(--sf-border);
    border-radius: 12px;
    outline: none;
    transition: all var(--sf-speed) var(--sf-transition);
    box-shadow: var(--sf-shadow-sm);
}


.search-input::placeholder {
    color: var(--sf-text-secondary);
}


.search-input:hover {
    border-color: rgba(102, 126, 234, 0.3);
    box-shadow: var(--sf-shadow-md);
}


.search-input:focus {
    border-color: var(--sf-primary);
    box-shadow: var(--sf-shadow-md);
    outline: none;
}


.filters-row {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr auto;
    gap: 12px;
    align-items: stretch;
}


.custom-select-wrapper {
    position: relative;
    width: 100%;
}


.custom-select-button {
    width: 100%;
    height: 44px;
    padding: 0 40px 0 16px;
    font-size: 15px;
    font-weight: 500;
    font-family: var(--sf-font);
    color: var(--sf-text);
    background: var(--sf-glass-bg);
    backdrop-filter: var(--sf-glass-blur);
    -webkit-backdrop-filter: var(--sf-glass-blur);
    border: 1px solid var(--sf-border);
    border-radius: 12px;
    cursor: pointer;
    transition: all var(--sf-speed) var(--sf-transition);
    box-shadow: var(--sf-shadow-sm);
    display: flex;
    align-items: center;
    justify-content: space-between;
    text-align: left;
    outline: none;
}


.custom-select-button:hover {
    border-color: rgba(102, 126, 234, 0.3);
    box-shadow: var(--sf-shadow-md);
}


.custom-select-button.active {
    border-color: var(--sf-primary);
    box-shadow: var(--sf-shadow-md);
    outline: none;
}


.custom-select-value {
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    color: var(--sf-text);
}


.custom-select-arrow {
    width: 20px;
    height: 20px;
    color: var(--sf-text-secondary);
    transition: transform var(--sf-speed) var(--sf-transition);
    flex-shrink: 0;
}


.custom-select-button.active .custom-select-arrow {
    transform: rotate(180deg);
}


.custom-select-dropdown {
    background: var(--sf-glass-bg);
    backdrop-filter: var(--sf-glass-blur);
    -webkit-backdrop-filter: var(--sf-glass-blur);
    border: 1px solid var(--sf-border);
    border-radius: 12px;
    box-shadow: var(--sf-shadow-lg);
    max-height: 320px;
    overflow: hidden;
}


.custom-select-dropdown-inner {
    max-height: 320px;
    overflow-y: auto;
    padding: 6px;
}


.custom-select-dropdown-inner::-webkit-scrollbar {
    width: 8px;
}


.custom-select-dropdown-inner::-webkit-scrollbar-track {
    background: transparent;
}


.custom-select-dropdown-inner::-webkit-scrollbar-thumb {
    background: var(--sf-border);
    border-radius: 4px;
}


.custom-select-dropdown-inner::-webkit-scrollbar-thumb:hover {
    background: var(--sf-text-secondary);
}


.custom-select-option {
    padding: 10px 12px;
    font-size: 15px;
    font-family: var(--sf-font);
    color: var(--sf-text);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s var(--sf-transition);
    margin-bottom: 2px;
    display: flex;
    align-items: center;
    gap: 8px;
}


.custom-select-option:hover {
    background: var(--sf-hover);
}


.custom-select-option.selected {
    background: linear-gradient(135deg, var(--sf-primary) 0%, var(--sf-secondary) 100%);
    color: white;
    font-weight: 600;
}


.check-mark {
    font-size: 14px;
    font-weight: bold;
}


.option-text {
    flex: 1;
}


.btn-reset {
    height: 44px;
    padding: 0 24px;
    font-size: 15px;
    font-weight: 600;
    font-family: var(--sf-font);
    color: var(--sf-text);
    background: var(--sf-glass-bg);
    backdrop-filter: var(--sf-glass-blur);
    -webkit-backdrop-filter: var(--sf-glass-blur);
    border: 1px solid var(--sf-border);
    border-radius: 12px;
    cursor: pointer;
    transition: all var(--sf-speed) var(--sf-transition);
    box-shadow: var(--sf-shadow-sm);
    white-space: nowrap;
    outline: none;
}


.btn-reset:hover {
    border-color: rgba(102, 126, 234, 0.3);
    box-shadow: var(--sf-shadow-md);
}


.btn-reset:focus {
    outline: none;
}


@media (max-width: 1024px) {
    .filters-row {
        grid-template-columns: 1fr 1fr;
        gap: 10px;
    }


    .btn-reset {
        grid-column: 1 / -1;
    }
}


@media (max-width: 768px) {
    .filters-row {
        grid-template-columns: 1fr;
        gap: 10px;
    }


    .custom-select-button,
    .btn-reset {
        height: 40px;
        font-size: 14px;
    }


    .search-input {
        height: 48px;
        font-size: 15px;
    }
}


@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation: none !important;
        transition-duration: 0.01ms !important;
    }
}

.search-input,
.search-input:focus,
.search-input:focus-visible {
    outline: none !important;
    box-shadow: none !important;
}


==== FILE: .\frontend\src\styles\SectionsPage.css ====
/* ==================== SECTIONS PAGE ==================== */
.sections-page {
    width: 100%;
    min-height: 100vh;
    position: relative;
    background: transparent;
    /* Изменено с var(--bg-primary) */
}

.sections-container {
    max-width: 100%;
    margin: 0 auto;
    padding: 0;
    position: relative;
    z-index: 1;
    background: var(--bg-primary);
    /* Фон только для контента после hero */
}

/* ==================== SECTIONS NAV ==================== */
.sections-nav {
    background: var(--nav-bg);
    backdrop-filter: saturate(180%) blur(20px);
    -webkit-backdrop-filter: saturate(180%) blur(20px);
    border-bottom: 1px solid var(--nav-border);
    position: sticky;
    top: var(--nav-height);
    z-index: 999;
    transition: background var(--nav-speed) ease, border-color var(--nav-speed) ease;
    box-shadow: var(--nav-shadow);
}

.sections-tabs {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    list-style: none;
    height: var(--nav-height);
    overflow-x: auto;
    scrollbar-width: none;
}

.sections-tabs::-webkit-scrollbar {
    display: none;
}

.section-tab {
    color: var(--nav-text-secondary);
    font-size: 15px;
    font-weight: 500;
    padding: 10px 18px;
    border-radius: var(--btn-radius);
    text-decoration: none;
    transition: all var(--nav-speed) var(--nav-transition);
    font-family: var(--nav-font);
    position: relative;
    white-space: nowrap;
}

.section-tab::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--nav-hover);
    border-radius: var(--btn-radius);
    opacity: 0;
    transition: opacity var(--nav-speed) var(--nav-transition);
}

.section-tab:hover {
    color: var(--nav-text);
}

.section-tab:hover::before {
    opacity: 1;
}

.section-tab.active {
    color: var(--nav-text);
    background: var(--nav-active);
    font-weight: 600;
}

.section-content {
    animation: fadeIn 0.4s ease;
    position: relative;
    z-index: 1;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

/* ==================== RESPONSIVE ==================== */
@media (max-width: 768px) {
    .sections-nav {
        top: 60px;
    }

    .sections-tabs {
        padding: 0 16px;
        justify-content: flex-start;
    }

    .section-tab {
        font-size: 14px;
        padding: 8px 14px;
    }
}

@media (max-width: 480px) {
    .sections-tabs {
        padding: 0 12px;
    }
}

.section-tab:focus-visible {
    outline: 2px solid var(--nav-primary);
    outline-offset: 2px;
}

@media (prefers-reduced-motion: reduce) {

    .section-tab,
    .section-tab::before {
        transition-duration: 0.01ms !important;
    }
}


==== FILE: .\frontend\src\styles\VolunteersPage.css ====
/* ==================== VOLUNTEERS PAGE - APPLE PRO STYLE ==================== */
.volunteers-page {
    width: 100%;
    overflow: hidden;
}

/* ==================== HERO SECTION ==================== */
.volunteers-hero {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 600px;
    padding: var(--spacing-3xl) var(--spacing-md);
    margin-bottom: var(--spacing-2xl);
    overflow: hidden;
    background: var(--gradient-primary);
}

.hero-background {
    position: absolute;
    inset: 0;
    z-index: 0;
}

.hero-gradient {
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 30% 20%,
            rgba(255, 255, 255, 0.15) 0%,
            rgba(255, 255, 255, 0.05) 50%,
            transparent 70%);
    animation: gradientShift 8s ease-in-out infinite;
}

.hero-blur {
    position: absolute;
    top: 10%;
    right: 10%;
    width: 400px;
    height: 400px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    filter: blur(80px);
    animation: float 20s ease-in-out infinite;
}

@keyframes gradientShift {

    0%,
    100% {
        opacity: 1;
        transform: scale(1);
    }

    50% {
        opacity: 0.8;
        transform: scale(1.1);
    }
}

@keyframes float {

    0%,
    100% {
        transform: translate(0, 0);
    }

    33% {
        transform: translate(30px, -30px);
    }

    66% {
        transform: translate(-20px, 20px);
    }
}

.hero-content-wrapper {
    position: relative;
    z-index: 1;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--spacing-xl);
    max-width: 1400px;
    width: 100%;
}

.hero-content {
    flex: 1;
    max-width: 600px;
}

.hero-title {
    font-family: var(--font-display);
    font-size: clamp(48px, 6vw, 80px);
    font-weight: 700;
    margin: 0 0 var(--spacing-md) 0;
    color: var(--apple-white);
    line-height: 1.05;
    letter-spacing: -0.02em;
    text-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);
}

.hero-subtitle {
    font-size: clamp(17px, 2vw, 21px);
    color: rgba(255, 255, 255, 0.9);
    line-height: 1.6;
    margin: 0;
    font-weight: 400;
    text-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);
}

/* Hero Illustration - Three Characters with Puzzles */
.hero-image {
    flex: 0 0 450px;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    height: 500px;
}

.hero-illustration-volunteers {
    position: relative;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
}

.volunteer-character {
    width: 120px;
    height: 180px;
    background: var(--glass-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 60px 60px 30px 30px;
    border: 3px solid rgba(255, 255, 255, 0.3);
    box-shadow: var(--shadow-lg);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding-top: 30px;
    position: relative;
}

.character-1 {
    background: linear-gradient(135deg, #4facfe, #00f2fe);
    animation: character1Float 6s ease-in-out infinite;
}

.character-2 {
    background: linear-gradient(135deg, #00e965, #00a049);
    animation: character2Float 6s ease-in-out infinite 0.2s;
    margin-top: -30px;
}

.character-3 {
    background: linear-gradient(135deg, #667eea, #764ba2);
    animation: character3Float 6s ease-in-out infinite 0.4s;
}

@keyframes character1Float {

    0%,
    100% {
        transform: translateY(0) scale(1);
    }

    50% {
        transform: translateY(-20px) scale(1.02);
    }
}

@keyframes character2Float {

    0%,
    100% {
        transform: translateY(0) scale(1);
    }

    50% {
        transform: translateY(-25px) scale(1.03);
    }
}

@keyframes character3Float {

    0%,
    100% {
        transform: translateY(0) scale(1);
    }

    50% {
        transform: translateY(-20px) scale(1.02);
    }
}

.volunteer-character::before {
    content: '👤';
    position: absolute;
    top: 15px;
    font-size: 40px;
}

.puzzle-piece {
    width: 80px;
    height: 80px;
    position: absolute;
    top: 70px;
    border-radius: 10px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    animation: puzzleFloat 3s ease-in-out infinite;
}

.piece-green {
    background: linear-gradient(135deg, #00e965, #00a049);
}

.piece-yellow {
    background: linear-gradient(135deg, #FFD700, #FFA500);
}

.piece-blue {
    background: linear-gradient(135deg, #4facfe, #00f2fe);
}

@keyframes puzzleFloat {

    0%,
    100% {
        transform: translateY(0) rotate(0deg);
    }

    50% {
        transform: translateY(-10px) rotate(5deg);
    }
}

/* Puzzle piece shape */
.puzzle-piece::before {
    content: '';
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 20px;
    height: 20px;
    background: inherit;
    border-radius: 50%;
}

.puzzle-piece::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 20px;
    height: 20px;
    background: rgba(0, 0, 0, 0.1);
    border-radius: 50%;
}

/* ==================== CONTENT SECTION ==================== */
.volunteers-content-section {
    padding: var(--spacing-2xl) var(--spacing-md);
    max-width: 1400px;
    margin: 0 auto;
}

.section-title {
    font-family: var(--font-display);
    font-size: clamp(36px, 4vw, 48px);
    font-weight: 700;
    margin: 0 0 var(--spacing-xl) 0;
    color: var(--apple-text-primary);
    letter-spacing: -0.02em;
    transition: color 0.3s ease;
}

.content-placeholder {
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-xl);
    padding: var(--spacing-xl);
    min-height: 300px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--glass-shadow);
}

.placeholder-text {
    font-size: 19px;
    color: var(--apple-text-secondary);
    text-align: center;
}

/* ==================== ANIMATIONS ==================== */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(40px) translateZ(0);
    }

    to {
        opacity: 1;
        transform: translateY(0) translateZ(0);
    }
}

.hero-title {
    animation: fadeInUp 0.8s var(--transition-smooth) 0.1s both;
}

.hero-subtitle {
    animation: fadeInUp 0.8s var(--transition-smooth) 0.25s both;
}

.hero-image {
    animation: fadeInUp 0.8s var(--transition-smooth) 0.4s both;
}

.section-title {
    animation: fadeInUp 0.8s var(--transition-smooth) 0.2s both;
}

.content-placeholder {
    animation: fadeInUp 0.8s var(--transition-smooth) 0.35s both;
}

/* ==================== RESPONSIVE ==================== */
@media (max-width: 1024px) {
    .hero-content-wrapper {
        gap: var(--spacing-lg);
    }

    .hero-image {
        flex: 0 0 350px;
    }

    .volunteer-character {
        width: 100px;
        height: 150px;
    }
}

@media (max-width: 768px) {
    .volunteers-hero {
        padding: var(--spacing-2xl) var(--spacing-md);
    }

    .hero-content-wrapper {
        flex-direction: column;
        text-align: center;
        gap: var(--spacing-xl);
    }

    .hero-image {
        flex: 0 0 auto;
        height: 400px;
    }

    .hero-illustration-volunteers {
        gap: 10px;
    }

    .volunteer-character {
        width: 80px;
        height: 130px;
    }

    .volunteer-character::before {
        font-size: 32px;
    }

    .puzzle-piece {
        width: 60px;
        height: 60px;
    }
}

/* ==================== ACCESSIBILITY ==================== */
@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
    }
}

